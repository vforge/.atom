'use strict';

var cov_8wcz5j460 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/LoadingSpinner.js',
      hash = 'dde724b673b0570300b919e3539a8329e7b1da79',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/LoadingSpinner.js',
    statementMap: {
      '0': {
        start: {
          line: 30,
          column: 35
        },
        end: {
          line: 35,
          column: 2
        }
      },
      '1': {
        start: {
          line: 37,
          column: 33
        },
        end: {
          line: 42,
          column: 2
        }
      },
      '2': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 17
        }
      },
      '3': {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 55,
          column: 51
        }
      },
      '4': {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 64,
          column: 5
        }
      },
      '5': {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 63,
          column: 8
        }
      },
      '6': {
        start: {
          line: 61,
          column: 14
        },
        end: {
          line: 61,
          column: 49
        }
      },
      '7': {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 70,
          column: 5
        }
      },
      '8': {
        start: {
          line: 69,
          column: 6
        },
        end: {
          line: 69,
          column: 34
        }
      },
      '9': {
        start: {
          line: 74,
          column: 39
        },
        end: {
          line: 74,
          column: 49
        }
      },
      '10': {
        start: {
          line: 75,
          column: 4
        },
        end: {
          line: 77,
          column: 5
        }
      },
      '11': {
        start: {
          line: 76,
          column: 6
        },
        end: {
          line: 76,
          column: 18
        }
      },
      '12': {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 52
        }
      },
      '13': {
        start: {
          line: 81,
          column: 6
        },
        end: {
          line: 83,
          column: 36
        }
      },
      '14': {
        start: {
          line: 84,
          column: 26
        },
        end: {
          line: 84,
          column: 60
        }
      },
      '15': {
        start: {
          line: 85,
          column: 25
        },
        end: {
          line: 85,
          column: 72
        }
      },
      '16': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 54
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 28
          },
          end: {
            line: 56,
            column: 3
          }
        },
        line: 53
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 58,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        },
        loc: {
          start: {
            line: 58,
            column: 28
          },
          end: {
            line: 65,
            column: 3
          }
        },
        line: 58
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 61,
            column: 8
          },
          end: {
            line: 61,
            column: 9
          }
        },
        loc: {
          start: {
            line: 61,
            column: 14
          },
          end: {
            line: 61,
            column: 49
          }
        },
        line: 61
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        },
        loc: {
          start: {
            line: 67,
            column: 31
          },
          end: {
            line: 71,
            column: 3
          }
        },
        line: 67
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 73,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        loc: {
          start: {
            line: 73,
            column: 23
          },
          end: {
            line: 87,
            column: 3
          }
        },
        line: 73
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        }, {
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        }],
        line: 59
      },
      '1': {
        loc: {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 70,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 70,
            column: 5
          }
        }, {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 70,
            column: 5
          }
        }],
        line: 68
      },
      '2': {
        loc: {
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        }, {
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        }],
        line: 75
      },
      '3': {
        loc: {
          start: {
            line: 79,
            column: 16
          },
          end: {
            line: 79,
            column: 52
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 79,
            column: 26
          },
          end: {
            line: 79,
            column: 45
          }
        }, {
          start: {
            line: 79,
            column: 48
          },
          end: {
            line: 79,
            column: 52
          }
        }],
        line: 79
      },
      '4': {
        loc: {
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 83,
            column: 36
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 82,
            column: 10
          },
          end: {
            line: 82,
            column: 14
          }
        }, {
          start: {
            line: 83,
            column: 10
          },
          end: {
            line: 83,
            column: 36
          }
        }],
        line: 81
      },
      '5': {
        loc: {
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 81,
            column: 62
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 81,
            column: 18
          }
        }, {
          start: {
            line: 81,
            column: 22
          },
          end: {
            line: 81,
            column: 62
          }
        }],
        line: 81
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LoadingSpinner = exports.LoadingSpinnerSizes = undefined;

var _addTooltip;

function _load_addTooltip() {
  return _addTooltip = _interopRequireDefault(require('./addTooltip'));
}

var _classnames;

function _load_classnames() {
  return _classnames = _interopRequireDefault(require('classnames'));
}

var _react = _interopRequireWildcard(require('react'));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const LoadingSpinnerSizes = exports.LoadingSpinnerSizes = (cov_8wcz5j460.s[0]++, Object.freeze({
  EXTRA_SMALL: 'EXTRA_SMALL',
  SMALL: 'SMALL',
  MEDIUM: 'MEDIUM',
  LARGE: 'LARGE'
})); /**
      * Copyright (c) 2017-present, Facebook, Inc.
      * All rights reserved.
      *
      * This source code is licensed under the BSD-style license found in the
      * LICENSE file in the root directory of this source tree. An additional grant
      * of patent rights can be found in the PATENTS file in the same directory.
      *
      * 
      * @format
      */

const LoadingSpinnerClassnames = (cov_8wcz5j460.s[1]++, Object.freeze({
  EXTRA_SMALL: 'loading-spinner-tiny',
  SMALL: 'loading-spinner-small',
  MEDIUM: 'loading-spinner-medium',
  LARGE: 'loading-spinner-large'
}));

/**
 * Shows an indefinite, animated LoadingSpinner.
 */
class LoadingSpinner extends _react.Component {

  constructor(props) {
    cov_8wcz5j460.f[0]++;
    cov_8wcz5j460.s[2]++;

    super(props);
    cov_8wcz5j460.s[3]++;
    this.state = { shouldRender: !this.props.delay };
  }

  componentDidMount() {
    cov_8wcz5j460.f[1]++;
    cov_8wcz5j460.s[4]++;

    if (!this.state.shouldRender) {
      cov_8wcz5j460.b[0][0]++;
      cov_8wcz5j460.s[5]++;

      this._timeout = setTimeout(() => {
        cov_8wcz5j460.f[2]++;
        cov_8wcz5j460.s[6]++;
        return this.setState({ shouldRender: true });
      }, this.props.delay);
    } else {
      cov_8wcz5j460.b[0][1]++;
    }
  }

  componentWillUnmount() {
    cov_8wcz5j460.f[3]++;
    cov_8wcz5j460.s[7]++;

    if (this._timeout != null) {
      cov_8wcz5j460.b[1][0]++;
      cov_8wcz5j460.s[8]++;

      clearTimeout(this._timeout);
    } else {
      cov_8wcz5j460.b[1][1]++;
    }
  }

  render() {
    cov_8wcz5j460.f[4]++;

    const { className, size, tooltip } = (cov_8wcz5j460.s[9]++, this.props);
    cov_8wcz5j460.s[10]++;
    if (!this.state.shouldRender) {
      cov_8wcz5j460.b[2][0]++;
      cov_8wcz5j460.s[11]++;

      return null;
    } else {
      cov_8wcz5j460.b[2][1]++;
    }

    const ref = (cov_8wcz5j460.s[12]++, tooltip ? (cov_8wcz5j460.b[3][0]++, (0, (_addTooltip || _load_addTooltip()).default)(tooltip)) : (cov_8wcz5j460.b[3][1]++, null));
    const safeSize = (cov_8wcz5j460.s[13]++, (cov_8wcz5j460.b[5][0]++, size != null) && (cov_8wcz5j460.b[5][1]++, LoadingSpinnerSizes.hasOwnProperty(size)) ? (cov_8wcz5j460.b[4][0]++, size) : (cov_8wcz5j460.b[4][1]++, LoadingSpinnerSizes.MEDIUM));
    const sizeClassname = (cov_8wcz5j460.s[14]++, LoadingSpinnerClassnames[safeSize]);
    const newClassName = (cov_8wcz5j460.s[15]++, (0, (_classnames || _load_classnames()).default)(className, 'loading', sizeClassname));
    cov_8wcz5j460.s[16]++;
    return _react.createElement('div', { className: newClassName, ref: ref });
  }
}
exports.LoadingSpinner = LoadingSpinner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxvYWRpbmdTcGlubmVyLmpzIl0sIm5hbWVzIjpbIkxvYWRpbmdTcGlubmVyU2l6ZXMiLCJPYmplY3QiLCJmcmVlemUiLCJFWFRSQV9TTUFMTCIsIlNNQUxMIiwiTUVESVVNIiwiTEFSR0UiLCJMb2FkaW5nU3Bpbm5lckNsYXNzbmFtZXMiLCJMb2FkaW5nU3Bpbm5lciIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJzdGF0ZSIsInNob3VsZFJlbmRlciIsImRlbGF5IiwiY29tcG9uZW50RGlkTW91bnQiLCJfdGltZW91dCIsInNldFRpbWVvdXQiLCJzZXRTdGF0ZSIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiY2xlYXJUaW1lb3V0IiwicmVuZGVyIiwiY2xhc3NOYW1lIiwic2l6ZSIsInRvb2x0aXAiLCJyZWYiLCJzYWZlU2l6ZSIsImhhc093blByb3BlcnR5Iiwic2l6ZUNsYXNzbmFtZSIsIm5ld0NsYXNzTmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVlBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7QUFDQTs7Ozs7O0FBZU8sTUFBTUEsMkVBQXNCQyxPQUFPQyxNQUFQLENBQWM7QUFDL0NDLGVBQWEsYUFEa0M7QUFFL0NDLFNBQU8sT0FGd0M7QUFHL0NDLFVBQVEsUUFIdUM7QUFJL0NDLFNBQU87QUFKd0MsQ0FBZCxDQUF0QixDQUFOLEMsQ0E3QlA7Ozs7Ozs7Ozs7OztBQW9DQSxNQUFNQyxrREFBMkJOLE9BQU9DLE1BQVAsQ0FBYztBQUM3Q0MsZUFBYSxzQkFEZ0M7QUFFN0NDLFNBQU8sdUJBRnNDO0FBRzdDQyxVQUFRLHdCQUhxQztBQUk3Q0MsU0FBTztBQUpzQyxDQUFkLENBQTNCLENBQU47O0FBT0E7OztBQUdPLE1BQU1FLGNBQU4sU0FBNkIsT0FBTUMsU0FBbkMsQ0FHTDs7QUFHQUMsY0FBWUMsS0FBWixFQUEwQjtBQUFBO0FBQUE7O0FBQ3hCLFVBQU1BLEtBQU47QUFEd0I7QUFFeEIsU0FBS0MsS0FBTCxHQUFhLEVBQUNDLGNBQWMsQ0FBQyxLQUFLRixLQUFMLENBQVdHLEtBQTNCLEVBQWI7QUFDRDs7QUFFREMsc0JBQTBCO0FBQUE7QUFBQTs7QUFDeEIsUUFBSSxDQUFDLEtBQUtILEtBQUwsQ0FBV0MsWUFBaEIsRUFBOEI7QUFBQTtBQUFBOztBQUM1QixXQUFLRyxRQUFMLEdBQWdCQyxXQUNkLE1BQU07QUFBQTtBQUFBO0FBQUEsb0JBQUtDLFFBQUwsQ0FBYyxFQUFDTCxjQUFjLElBQWYsRUFBZDtBQUFtQyxPQUQzQixFQUVkLEtBQUtGLEtBQUwsQ0FBV0csS0FGRyxDQUFoQjtBQUlELEtBTEQ7QUFBQTtBQUFBO0FBTUQ7O0FBRURLLHlCQUE2QjtBQUFBO0FBQUE7O0FBQzNCLFFBQUksS0FBS0gsUUFBTCxJQUFpQixJQUFyQixFQUEyQjtBQUFBO0FBQUE7O0FBQ3pCSSxtQkFBYSxLQUFLSixRQUFsQjtBQUNELEtBRkQ7QUFBQTtBQUFBO0FBR0Q7O0FBRURLLFdBQXFCO0FBQUE7O0FBQ25CLFVBQU0sRUFBQ0MsU0FBRCxFQUFZQyxJQUFaLEVBQWtCQyxPQUFsQiw0QkFBNkIsS0FBS2IsS0FBbEMsQ0FBTjtBQURtQjtBQUVuQixRQUFJLENBQUMsS0FBS0MsS0FBTCxDQUFXQyxZQUFoQixFQUE4QjtBQUFBO0FBQUE7O0FBQzVCLGFBQU8sSUFBUDtBQUNELEtBRkQ7QUFBQTtBQUFBOztBQUlBLFVBQU1ZLDhCQUFNRCxvQ0FBVSxpREFBV0EsT0FBWCxDQUFWLDhCQUFnQyxJQUFoQyxDQUFOLENBQU47QUFDQSxVQUFNRSxtQ0FDSixrQ0FBUSxJQUFSLCtCQUFnQjFCLG9CQUFvQjJCLGNBQXBCLENBQW1DSixJQUFuQyxDQUFoQiw4QkFDSUEsSUFESiw4QkFFSXZCLG9CQUFvQkssTUFGeEIsQ0FESSxDQUFOO0FBSUEsVUFBTXVCLHdDQUFnQnJCLHlCQUF5Qm1CLFFBQXpCLENBQWhCLENBQU47QUFDQSxVQUFNRyx1Q0FBZSxpREFBV1AsU0FBWCxFQUFzQixTQUF0QixFQUFpQ00sYUFBakMsQ0FBZixDQUFOO0FBWm1CO0FBYW5CLFdBQU8sOEJBQUssV0FBV0MsWUFBaEIsRUFBOEIsS0FBS0osR0FBbkMsR0FBUDtBQUNEO0FBckNEO1FBSFdqQixjLEdBQUFBLGMiLCJmaWxlIjoiTG9hZGluZ1NwaW5uZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgYWRkVG9vbHRpcCBmcm9tICcuL2FkZFRvb2x0aXAnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbnR5cGUgTG9hZGluZ1NwaW5uZXJTaXplID0gJ0VYVFJBX1NNQUxMJyB8ICdTTUFMTCcgfCAnTUVESVVNJyB8ICdMQVJHRSc7XG50eXBlIFByb3BzID0ge1xuICBjbGFzc05hbWU/OiBzdHJpbmcsXG4gIC8qKiBUaGUgc2l6ZSBvZiB0aGUgTG9hZGluZ1NwaW5uZXIuIERlZmF1bHRzIHRvIE1FRElVTS4gKi9cbiAgc2l6ZT86IExvYWRpbmdTcGlubmVyU2l6ZSxcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGRlbGF5IChpbiBtaWxsaXNlY29uZHMpIGJldHdlZW4gbW91bnRpbmcgdGhlIGNvbXBvbmVudCBhbmQgYWN0dWFsbHkgcmVuZGVyaW5nXG4gICAqIHRoZSBzcGlubmVyIHRvIGF2b2lkIFVJIGNodXJuLlxuICAgKi9cbiAgZGVsYXk/OiBudW1iZXIsXG4gIHRvb2x0aXA/OiBhdG9tJFRvb2x0aXBzQWRkT3B0aW9ucyxcbn07XG5cbmV4cG9ydCBjb25zdCBMb2FkaW5nU3Bpbm5lclNpemVzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIEVYVFJBX1NNQUxMOiAnRVhUUkFfU01BTEwnLFxuICBTTUFMTDogJ1NNQUxMJyxcbiAgTUVESVVNOiAnTUVESVVNJyxcbiAgTEFSR0U6ICdMQVJHRScsXG59KTtcblxuY29uc3QgTG9hZGluZ1NwaW5uZXJDbGFzc25hbWVzID0gT2JqZWN0LmZyZWV6ZSh7XG4gIEVYVFJBX1NNQUxMOiAnbG9hZGluZy1zcGlubmVyLXRpbnknLFxuICBTTUFMTDogJ2xvYWRpbmctc3Bpbm5lci1zbWFsbCcsXG4gIE1FRElVTTogJ2xvYWRpbmctc3Bpbm5lci1tZWRpdW0nLFxuICBMQVJHRTogJ2xvYWRpbmctc3Bpbm5lci1sYXJnZScsXG59KTtcblxuLyoqXG4gKiBTaG93cyBhbiBpbmRlZmluaXRlLCBhbmltYXRlZCBMb2FkaW5nU3Bpbm5lci5cbiAqL1xuZXhwb3J0IGNsYXNzIExvYWRpbmdTcGlubmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFxuICBQcm9wcyxcbiAge3Nob3VsZFJlbmRlcjogYm9vbGVhbn0sXG4+IHtcbiAgX3RpbWVvdXQ6ID9udW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7c2hvdWxkUmVuZGVyOiAhdGhpcy5wcm9wcy5kZWxheX07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgKCkgPT4gdGhpcy5zZXRTdGF0ZSh7c2hvdWxkUmVuZGVyOiB0cnVlfSksXG4gICAgICAgIHRoaXMucHJvcHMuZGVsYXksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl90aW1lb3V0ICE9IG51bGwpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgY29uc3Qge2NsYXNzTmFtZSwgc2l6ZSwgdG9vbHRpcH0gPSB0aGlzLnByb3BzO1xuICAgIGlmICghdGhpcy5zdGF0ZS5zaG91bGRSZW5kZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZiA9IHRvb2x0aXAgPyBhZGRUb29sdGlwKHRvb2x0aXApIDogbnVsbDtcbiAgICBjb25zdCBzYWZlU2l6ZSA9XG4gICAgICBzaXplICE9IG51bGwgJiYgTG9hZGluZ1NwaW5uZXJTaXplcy5oYXNPd25Qcm9wZXJ0eShzaXplKVxuICAgICAgICA/IHNpemVcbiAgICAgICAgOiBMb2FkaW5nU3Bpbm5lclNpemVzLk1FRElVTTtcbiAgICBjb25zdCBzaXplQ2xhc3NuYW1lID0gTG9hZGluZ1NwaW5uZXJDbGFzc25hbWVzW3NhZmVTaXplXTtcbiAgICBjb25zdCBuZXdDbGFzc05hbWUgPSBjbGFzc25hbWVzKGNsYXNzTmFtZSwgJ2xvYWRpbmcnLCBzaXplQ2xhc3NuYW1lKTtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e25ld0NsYXNzTmFtZX0gcmVmPXtyZWZ9IC8+O1xuICB9XG59XG4iXX0=