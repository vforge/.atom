'use strict';

var cov_1fla6uiyzn = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/SettingsInput.js',
      hash = 'a77c55afc4b094a9b73aa22601aa51b75e4d2dff',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/SettingsInput.js',
    statementMap: {
      '0': {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 34,
          column: 17
        }
      },
      '1': {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 35,
          column: 38
        }
      },
      '2': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 37
        }
      },
      '3': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 28
        }
      },
      '4': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 38
        }
      },
      '5': {
        start: {
          line: 45,
          column: 19
        },
        end: {
          line: 45,
          column: 28
        }
      },
      '6': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 48,
          column: 5
        }
      },
      '7': {
        start: {
          line: 47,
          column: 6
        },
        end: {
          line: 47,
          column: 13
        }
      },
      '8': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 53
        }
      },
      '9': {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 34
        }
      },
      '10': {
        start: {
          line: 55,
          column: 20
        },
        end: {
          line: 55,
          column: 38
        }
      },
      '11': {
        start: {
          line: 56,
          column: 18
        },
        end: {
          line: 56,
          column: 36
        }
      },
      '12': {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 60,
          column: 5
        }
      },
      '13': {
        start: {
          line: 58,
          column: 27
        },
        end: {
          line: 58,
          column: 63
        }
      },
      '14': {
        start: {
          line: 59,
          column: 6
        },
        end: {
          line: 59,
          column: 45
        }
      },
      '15': {
        start: {
          line: 64,
          column: 20
        },
        end: {
          line: 64,
          column: 38
        }
      },
      '16': {
        start: {
          line: 65,
          column: 18
        },
        end: {
          line: 65,
          column: 36
        }
      },
      '17': {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 68,
          column: 5
        }
      },
      '18': {
        start: {
          line: 67,
          column: 6
        },
        end: {
          line: 67,
          column: 35
        }
      },
      '19': {
        start: {
          line: 72,
          column: 16
        },
        end: {
          line: 72,
          column: 47
        }
      },
      '20': {
        start: {
          line: 74,
          column: 25
        },
        end: {
          line: 74,
          column: 72
        }
      },
      '21': {
        start: {
          line: 75,
          column: 4
        },
        end: {
          line: 77,
          column: 5
        }
      },
      '22': {
        start: {
          line: 76,
          column: 6
        },
        end: {
          line: 76,
          column: 17
        }
      },
      '23': {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 17
        }
      },
      '24': {
        start: {
          line: 83,
          column: 25
        },
        end: {
          line: 83,
          column: 72
        }
      },
      '25': {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 84,
          column: 58
        }
      },
      '26': {
        start: {
          line: 88,
          column: 18
        },
        end: {
          line: 88,
          column: 47
        }
      },
      '27': {
        start: {
          line: 89,
          column: 18
        },
        end: {
          line: 89,
          column: 34
        }
      },
      '28': {
        start: {
          line: 90,
          column: 4
        },
        end: {
          line: 92,
          column: 5
        }
      },
      '29': {
        start: {
          line: 91,
          column: 6
        },
        end: {
          line: 91,
          column: 38
        }
      },
      '30': {
        start: {
          line: 96,
          column: 20
        },
        end: {
          line: 96,
          column: 38
        }
      },
      '31': {
        start: {
          line: 97,
          column: 15
        },
        end: {
          line: 97,
          column: 43
        }
      },
      '32': {
        start: {
          line: 98,
          column: 18
        },
        end: {
          line: 98,
          column: 34
        }
      },
      '33': {
        start: {
          line: 99,
          column: 24
        },
        end: {
          line: 99,
          column: 46
        }
      },
      '34': {
        start: {
          line: 100,
          column: 18
        },
        end: {
          line: 100,
          column: 34
        }
      },
      '35': {
        start: {
          line: 101,
          column: 24
        },
        end: {
          line: 101,
          column: 46
        }
      },
      '36': {
        start: {
          line: 103,
          column: 4
        },
        end: {
          line: 126,
          column: 6
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 33,
            column: 2
          },
          end: {
            line: 33,
            column: 3
          }
        },
        loc: {
          start: {
            line: 33,
            column: 29
          },
          end: {
            line: 36,
            column: 3
          }
        },
        line: 33
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 38,
            column: 2
          },
          end: {
            line: 38,
            column: 3
          }
        },
        loc: {
          start: {
            line: 38,
            column: 51
          },
          end: {
            line: 42,
            column: 3
          }
        },
        line: 38
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 44,
            column: 18
          },
          end: {
            line: 44,
            column: 19
          }
        },
        loc: {
          start: {
            line: 44,
            column: 41
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 44
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 54,
            column: 13
          },
          end: {
            line: 54,
            column: 14
          }
        },
        loc: {
          start: {
            line: 54,
            column: 19
          },
          end: {
            line: 61,
            column: 3
          }
        },
        line: 54
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 63,
            column: 12
          },
          end: {
            line: 63,
            column: 13
          }
        },
        loc: {
          start: {
            line: 63,
            column: 18
          },
          end: {
            line: 69,
            column: 3
          }
        },
        line: 63
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 71,
            column: 3
          }
        },
        loc: {
          start: {
            line: 71,
            column: 22
          },
          end: {
            line: 80,
            column: 3
          }
        },
        line: 71
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        loc: {
          start: {
            line: 82,
            column: 28
          },
          end: {
            line: 85,
            column: 3
          }
        },
        line: 82
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 87,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        loc: {
          start: {
            line: 87,
            column: 45
          },
          end: {
            line: 93,
            column: 3
          }
        },
        line: 87
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 95,
            column: 2
          },
          end: {
            line: 95,
            column: 3
          }
        },
        loc: {
          start: {
            line: 95,
            column: 23
          },
          end: {
            line: 127,
            column: 3
          }
        },
        line: 95
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        }, {
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        }],
        line: 46
      },
      '1': {
        loc: {
          start: {
            line: 57,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 57,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        }, {
          start: {
            line: 57,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        }],
        line: 57
      },
      '2': {
        loc: {
          start: {
            line: 66,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 66,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        }, {
          start: {
            line: 66,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        }],
        line: 66
      },
      '3': {
        loc: {
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        }, {
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 77,
            column: 5
          }
        }],
        line: 75
      },
      '4': {
        loc: {
          start: {
            line: 84,
            column: 11
          },
          end: {
            line: 84,
            column: 57
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 84,
            column: 26
          },
          end: {
            line: 84,
            column: 52
          }
        }, {
          start: {
            line: 84,
            column: 55
          },
          end: {
            line: 84,
            column: 57
          }
        }],
        line: 84
      },
      '5': {
        loc: {
          start: {
            line: 90,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 90,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        }, {
          start: {
            line: 90,
            column: 4
          },
          end: {
            line: 92,
            column: 5
          }
        }],
        line: 90
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _AtomInput;

function _load_AtomInput() {
  return _AtomInput = require('./AtomInput');
}

var _react = _interopRequireWildcard(require('react'));

var _SettingsUtils;

function _load_SettingsUtils() {
  return _SettingsUtils = require('./SettingsUtils');
}

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class SettingsInput extends _react.Component {

  constructor(props) {
    cov_1fla6uiyzn.f[0]++;
    cov_1fla6uiyzn.s[0]++;

    super(props);

    this._handleChange = newValue_ => {
      cov_1fla6uiyzn.f[2]++;

      let newValue = (cov_1fla6uiyzn.s[5]++, newValue_);
      cov_1fla6uiyzn.s[6]++;
      if (this._ignoreInputCallback) {
        cov_1fla6uiyzn.b[0][0]++;
        cov_1fla6uiyzn.s[7]++;

        return;
      } else {
        cov_1fla6uiyzn.b[0][1]++;
      }

      cov_1fla6uiyzn.s[8]++;
      newValue = (0, (_SettingsUtils || _load_SettingsUtils()).parseValue)(this.props.type, newValue);
      cov_1fla6uiyzn.s[9]++;
      this.props.onChange(newValue);
    };

    this._onFocus = () => {
      cov_1fla6uiyzn.f[3]++;

      const keyPath = (cov_1fla6uiyzn.s[10]++, this.props.keyPath);
      const input = (cov_1fla6uiyzn.s[11]++, this.refs[keyPath]);
      cov_1fla6uiyzn.s[12]++;
      if ((0, (_SettingsUtils || _load_SettingsUtils()).isDefaultConfigValue)(keyPath)) {
        cov_1fla6uiyzn.b[1][0]++;

        const defaultValue = (cov_1fla6uiyzn.s[13]++, (0, (_SettingsUtils || _load_SettingsUtils()).getDefaultConfigValueString)(keyPath));
        cov_1fla6uiyzn.s[14]++;
        this._updateInput(input, defaultValue);
      } else {
        cov_1fla6uiyzn.b[1][1]++;
      }
    };

    this._onBlur = () => {
      cov_1fla6uiyzn.f[4]++;

      const keyPath = (cov_1fla6uiyzn.s[15]++, this.props.keyPath);
      const input = (cov_1fla6uiyzn.s[16]++, this.refs[keyPath]);
      cov_1fla6uiyzn.s[17]++;
      if ((0, (_SettingsUtils || _load_SettingsUtils()).isDefaultConfigValue)(keyPath, input.getText())) {
        cov_1fla6uiyzn.b[2][0]++;
        cov_1fla6uiyzn.s[18]++;

        this._updateInput(input, '');
      } else {
        cov_1fla6uiyzn.b[2][1]++;
      }
    };

    cov_1fla6uiyzn.s[1]++;
    this._ignoreInputCallback = false;
  }

  _updateInput(input, newValue) {
    cov_1fla6uiyzn.f[1]++;
    cov_1fla6uiyzn.s[2]++;

    this._ignoreInputCallback = true;
    cov_1fla6uiyzn.s[3]++;
    input.setText(newValue);
    cov_1fla6uiyzn.s[4]++;
    this._ignoreInputCallback = false;
  }

  _getValue() {
    cov_1fla6uiyzn.f[5]++;

    let value = (cov_1fla6uiyzn.s[19]++, (0, (_SettingsUtils || _load_SettingsUtils()).valueToString)(this.props.value));

    const defaultValue = (cov_1fla6uiyzn.s[20]++, (0, (_SettingsUtils || _load_SettingsUtils()).getDefaultConfigValueString)(this.props.keyPath));
    cov_1fla6uiyzn.s[21]++;
    if (defaultValue === value) {
      cov_1fla6uiyzn.b[3][0]++;
      cov_1fla6uiyzn.s[22]++;

      value = '';
    } else {
      cov_1fla6uiyzn.b[3][1]++;
    }

    cov_1fla6uiyzn.s[23]++;
    return value;
  }

  _getPlaceholder() {
    cov_1fla6uiyzn.f[6]++;

    const defaultValue = (cov_1fla6uiyzn.s[24]++, (0, (_SettingsUtils || _load_SettingsUtils()).getDefaultConfigValueString)(this.props.keyPath));
    cov_1fla6uiyzn.s[25]++;
    return defaultValue ? (cov_1fla6uiyzn.b[4][0]++, 'Default: ' + defaultValue) : (cov_1fla6uiyzn.b[4][1]++, '');
  }

  componentDidUpdate(prevProps) {
    cov_1fla6uiyzn.f[7]++;

    const input = (cov_1fla6uiyzn.s[26]++, this.refs[this.props.keyPath]);
    const value = (cov_1fla6uiyzn.s[27]++, this._getValue());
    cov_1fla6uiyzn.s[28]++;
    if (input.getText() !== value) {
      cov_1fla6uiyzn.b[5][0]++;
      cov_1fla6uiyzn.s[29]++;

      this._updateInput(input, value);
    } else {
      cov_1fla6uiyzn.b[5][1]++;
    }
  }

  render() {
    cov_1fla6uiyzn.f[8]++;

    const keyPath = (cov_1fla6uiyzn.s[30]++, this.props.keyPath);
    const id = (cov_1fla6uiyzn.s[31]++, (0, (_SettingsUtils || _load_SettingsUtils()).normalizeIdentifier)(keyPath));
    const title = (cov_1fla6uiyzn.s[32]++, this.props.title);
    const description = (cov_1fla6uiyzn.s[33]++, this.props.description);
    const value = (cov_1fla6uiyzn.s[34]++, this._getValue());
    const placeholder = (cov_1fla6uiyzn.s[35]++, this._getPlaceholder());

    cov_1fla6uiyzn.s[36]++;
    return _react.createElement(
      'div',
      null,
      _react.createElement(
        'label',
        { className: 'control-label' },
        _react.createElement(
          'div',
          { className: 'setting-title' },
          title
        ),
        _react.createElement(
          'div',
          { className: 'setting-description' },
          description
        )
      ),
      _react.createElement(
        'div',
        { className: 'controls' },
        _react.createElement(
          'div',
          { className: 'editor-container' },
          _react.createElement(
            'subview',
            null,
            _react.createElement((_AtomInput || _load_AtomInput()).AtomInput, {
              className: id,
              initialValue: value,
              onDidChange: this._handleChange,
              onFocus: this._onFocus,
              onBlur: this._onBlur,
              placeholderText: placeholder,
              ref: keyPath,
              text: value
            })
          )
        )
      )
    );
  }
}
exports.default = SettingsInput;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNldHRpbmdzSW5wdXQuanMiXSwibmFtZXMiOlsiU2V0dGluZ3NJbnB1dCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJfaGFuZGxlQ2hhbmdlIiwibmV3VmFsdWVfIiwibmV3VmFsdWUiLCJfaWdub3JlSW5wdXRDYWxsYmFjayIsInR5cGUiLCJvbkNoYW5nZSIsIl9vbkZvY3VzIiwia2V5UGF0aCIsImlucHV0IiwicmVmcyIsImRlZmF1bHRWYWx1ZSIsIl91cGRhdGVJbnB1dCIsIl9vbkJsdXIiLCJnZXRUZXh0Iiwic2V0VGV4dCIsIl9nZXRWYWx1ZSIsInZhbHVlIiwiX2dldFBsYWNlaG9sZGVyIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicmVuZGVyIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGxhY2Vob2xkZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LFdBQVUsVUFBZjtBQUNFO0FBQUE7QUFBQSxZQUFLLFdBQVUsa0JBQWY7QUFDRTtBQUFBO0FBQUE7QUFDRTtBQUNFLHlCQUFXRixFQURiO0FBRUUsNEJBQWNMLEtBRmhCO0FBR0UsMkJBQWEsS0FBS2hCLGFBSHBCO0FBSUUsdUJBQVMsS0FBS00sUUFKaEI7QUFLRSxzQkFBUSxLQUFLTSxPQUxmO0FBTUUsK0JBQWlCWSxXQU5uQjtBQU9FLG1CQUFLakIsT0FQUDtBQVFFLG9CQUFNUztBQVJSO0FBREY7QUFERjtBQURGO0FBTEYsS0FERjtBQXdCRDtBQWpHK0Q7a0JBQTdDcEIsYSIsImZpbGUiOiJTZXR0aW5nc0lucHV0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1NldHRpbmdzUHJvcHNEZWZhdWx0fSBmcm9tICcuL1NldHRpbmdzVXRpbHMnO1xuXG5pbXBvcnQge0F0b21JbnB1dH0gZnJvbSAnLi9BdG9tSW5wdXQnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgaXNEZWZhdWx0Q29uZmlnVmFsdWUsXG4gIGdldERlZmF1bHRDb25maWdWYWx1ZVN0cmluZyxcbiAgbm9ybWFsaXplSWRlbnRpZmllcixcbiAgcGFyc2VWYWx1ZSxcbiAgdmFsdWVUb1N0cmluZyxcbn0gZnJvbSAnLi9TZXR0aW5nc1V0aWxzJztcblxudHlwZSBQcm9wcyA9IFNldHRpbmdzUHJvcHNEZWZhdWx0ICYge1xuICB0eXBlOiBzdHJpbmcsXG4gIHZhbHVlOiBudW1iZXIgfCBzdHJpbmcgfCBBcnJheTxhbnk+LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3NJbnB1dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICBfaWdub3JlSW5wdXRDYWxsYmFjazogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuX2lnbm9yZUlucHV0Q2FsbGJhY2sgPSBmYWxzZTtcbiAgfVxuXG4gIF91cGRhdGVJbnB1dChpbnB1dDogQXRvbUlucHV0LCBuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5faWdub3JlSW5wdXRDYWxsYmFjayA9IHRydWU7XG4gICAgaW5wdXQuc2V0VGV4dChuZXdWYWx1ZSk7XG4gICAgdGhpcy5faWdub3JlSW5wdXRDYWxsYmFjayA9IGZhbHNlO1xuICB9XG5cbiAgX2hhbmRsZUNoYW5nZSA9IChuZXdWYWx1ZV86IHN0cmluZykgPT4ge1xuICAgIGxldCBuZXdWYWx1ZSA9IG5ld1ZhbHVlXztcbiAgICBpZiAodGhpcy5faWdub3JlSW5wdXRDYWxsYmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5ld1ZhbHVlID0gcGFyc2VWYWx1ZSh0aGlzLnByb3BzLnR5cGUsIG5ld1ZhbHVlKTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgfTtcblxuICBfb25Gb2N1cyA9ICgpID0+IHtcbiAgICBjb25zdCBrZXlQYXRoID0gdGhpcy5wcm9wcy5rZXlQYXRoO1xuICAgIGNvbnN0IGlucHV0ID0gdGhpcy5yZWZzW2tleVBhdGhdO1xuICAgIGlmIChpc0RlZmF1bHRDb25maWdWYWx1ZShrZXlQYXRoKSkge1xuICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gZ2V0RGVmYXVsdENvbmZpZ1ZhbHVlU3RyaW5nKGtleVBhdGgpO1xuICAgICAgdGhpcy5fdXBkYXRlSW5wdXQoaW5wdXQsIGRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIF9vbkJsdXIgPSAoKSA9PiB7XG4gICAgY29uc3Qga2V5UGF0aCA9IHRoaXMucHJvcHMua2V5UGF0aDtcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMucmVmc1trZXlQYXRoXTtcbiAgICBpZiAoaXNEZWZhdWx0Q29uZmlnVmFsdWUoa2V5UGF0aCwgaW5wdXQuZ2V0VGV4dCgpKSkge1xuICAgICAgdGhpcy5fdXBkYXRlSW5wdXQoaW5wdXQsICcnKTtcbiAgICB9XG4gIH07XG5cbiAgX2dldFZhbHVlKCk6IHN0cmluZyB7XG4gICAgbGV0IHZhbHVlID0gdmFsdWVUb1N0cmluZyh0aGlzLnByb3BzLnZhbHVlKTtcblxuICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGdldERlZmF1bHRDb25maWdWYWx1ZVN0cmluZyh0aGlzLnByb3BzLmtleVBhdGgpO1xuICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICB2YWx1ZSA9ICcnO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIF9nZXRQbGFjZWhvbGRlcigpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGdldERlZmF1bHRDb25maWdWYWx1ZVN0cmluZyh0aGlzLnByb3BzLmtleVBhdGgpO1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWUgPyAnRGVmYXVsdDogJyArIGRlZmF1bHRWYWx1ZSA6ICcnO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9IHRoaXMucmVmc1t0aGlzLnByb3BzLmtleVBhdGhdO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5fZ2V0VmFsdWUoKTtcbiAgICBpZiAoaW5wdXQuZ2V0VGV4dCgpICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fdXBkYXRlSW5wdXQoaW5wdXQsIHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgY29uc3Qga2V5UGF0aCA9IHRoaXMucHJvcHMua2V5UGF0aDtcbiAgICBjb25zdCBpZCA9IG5vcm1hbGl6ZUlkZW50aWZpZXIoa2V5UGF0aCk7XG4gICAgY29uc3QgdGl0bGUgPSB0aGlzLnByb3BzLnRpdGxlO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wcm9wcy5kZXNjcmlwdGlvbjtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX2dldFZhbHVlKCk7XG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLl9nZXRQbGFjZWhvbGRlcigpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJjb250cm9sLWxhYmVsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZXR0aW5nLXRpdGxlXCI+e3RpdGxlfTwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2V0dGluZy1kZXNjcmlwdGlvblwiPntkZXNjcmlwdGlvbn08L2Rpdj5cbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdG9yLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPHN1YnZpZXc+XG4gICAgICAgICAgICAgIDxBdG9tSW5wdXRcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2lkfVxuICAgICAgICAgICAgICAgIGluaXRpYWxWYWx1ZT17dmFsdWV9XG4gICAgICAgICAgICAgICAgb25EaWRDaGFuZ2U9e3RoaXMuX2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBvbkZvY3VzPXt0aGlzLl9vbkZvY3VzfVxuICAgICAgICAgICAgICAgIG9uQmx1cj17dGhpcy5fb25CbHVyfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyVGV4dD17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgcmVmPXtrZXlQYXRofVxuICAgICAgICAgICAgICAgIHRleHQ9e3ZhbHVlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zdWJ2aWV3PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiJdfQ==