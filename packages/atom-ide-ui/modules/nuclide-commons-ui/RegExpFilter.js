'use strict';

var cov_1zcl69e6o6 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/RegExpFilter.js',
      hash = '50f903f506675c307c045ea0a67ae900a97f1ece',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-ui/RegExpFilter.js',
    statementMap: {
      '0': {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 17
        }
      },
      '1': {
        start: {
          line: 60,
          column: 4
        },
        end: {
          line: 60,
          column: 37
        }
      },
      '2': {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 65,
          column: 37
        }
      },
      '3': {
        start: {
          line: 69,
          column: 47
        },
        end: {
          line: 69,
          column: 57
        }
      },
      '4': {
        start: {
          line: 70,
          column: 17
        },
        end: {
          line: 70,
          column: 40
        }
      },
      '5': {
        start: {
          line: 71,
          column: 23
        },
        end: {
          line: 71,
          column: 42
        }
      },
      '6': {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 73,
          column: 65
        }
      },
      '7': {
        start: {
          line: 74,
          column: 27
        },
        end: {
          line: 78,
          column: 5
        }
      },
      '8': {
        start: {
          line: 80,
          column: 4
        },
        end: {
          line: 102,
          column: 6
        }
      },
      '9': {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 84,
          column: 29
        }
      },
      '10': {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 108,
          column: 5
        }
      },
      '11': {
        start: {
          line: 107,
          column: 6
        },
        end: {
          line: 107,
          column: 13
        }
      },
      '12': {
        start: {
          line: 109,
          column: 4
        },
        end: {
          line: 109,
          column: 24
        }
      },
      '13': {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 116,
          column: 7
        }
      },
      '14': {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 122,
          column: 5
        }
      },
      '15': {
        start: {
          line: 121,
          column: 6
        },
        end: {
          line: 121,
          column: 13
        }
      },
      '16': {
        start: {
          line: 123,
          column: 4
        },
        end: {
          line: 126,
          column: 7
        }
      },
      '17': {
        start: {
          line: 131,
          column: 2
        },
        end: {
          line: 141,
          column: 3
        }
      },
      '18': {
        start: {
          line: 133,
          column: 6
        },
        end: {
          line: 133,
          column: 37
        }
      },
      '19': {
        start: {
          line: 135,
          column: 6
        },
        end: {
          line: 135,
          column: 31
        }
      },
      '20': {
        start: {
          line: 137,
          column: 6
        },
        end: {
          line: 137,
          column: 31
        }
      },
      '21': {
        start: {
          line: 139,
          column: 6
        },
        end: {
          line: 139,
          column: 20
        }
      },
      '22': {
        start: {
          line: 140,
          column: 6
        },
        end: {
          line: 140,
          column: 47
        }
      },
      '23': {
        start: {
          line: 148,
          column: 2
        },
        end: {
          line: 150,
          column: 3
        }
      },
      '24': {
        start: {
          line: 149,
          column: 4
        },
        end: {
          line: 149,
          column: 43
        }
      },
      '25': {
        start: {
          line: 151,
          column: 17
        },
        end: {
          line: 151,
          column: 59
        }
      },
      '26': {
        start: {
          line: 152,
          column: 2
        },
        end: {
          line: 162,
          column: 3
        }
      },
      '27': {
        start: {
          line: 153,
          column: 4
        },
        end: {
          line: 156,
          column: 6
        }
      },
      '28': {
        start: {
          line: 158,
          column: 4
        },
        end: {
          line: 161,
          column: 6
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 58,
            column: 2
          },
          end: {
            line: 58,
            column: 3
          }
        },
        loc: {
          start: {
            line: 58,
            column: 28
          },
          end: {
            line: 61,
            column: 3
          }
        },
        line: 58
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 63,
            column: 2
          },
          end: {
            line: 63,
            column: 3
          }
        },
        loc: {
          start: {
            line: 63,
            column: 48
          },
          end: {
            line: 66,
            column: 3
          }
        },
        line: 63
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 68,
            column: 2
          },
          end: {
            line: 68,
            column: 3
          }
        },
        loc: {
          start: {
            line: 68,
            column: 23
          },
          end: {
            line: 103,
            column: 3
          }
        },
        line: 68
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 83,
            column: 15
          },
          end: {
            line: 83,
            column: 16
          }
        },
        loc: {
          start: {
            line: 83,
            column: 21
          },
          end: {
            line: 85,
            column: 11
          }
        },
        line: 83
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 105,
            column: 2
          },
          end: {
            line: 105,
            column: 3
          }
        },
        loc: {
          start: {
            line: 105,
            column: 16
          },
          end: {
            line: 110,
            column: 3
          }
        },
        line: 105
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 112,
            column: 31
          },
          end: {
            line: 112,
            column: 32
          }
        },
        loc: {
          start: {
            line: 112,
            column: 43
          },
          end: {
            line: 117,
            column: 3
          }
        },
        line: 112
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 119,
            column: 22
          },
          end: {
            line: 119,
            column: 23
          }
        },
        loc: {
          start: {
            line: 119,
            column: 46
          },
          end: {
            line: 127,
            column: 3
          }
        },
        line: 119
      },
      '7': {
        name: 'getButtonSize',
        decl: {
          start: {
            line: 130,
            column: 9
          },
          end: {
            line: 130,
            column: 22
          }
        },
        loc: {
          start: {
            line: 130,
            column: 47
          },
          end: {
            line: 142,
            column: 1
          }
        },
        line: 130
      },
      '8': {
        name: 'getFilterPattern',
        decl: {
          start: {
            line: 144,
            column: 16
          },
          end: {
            line: 144,
            column: 32
          }
        },
        loc: {
          start: {
            line: 147,
            column: 17
          },
          end: {
            line: 163,
            column: 1
          }
        },
        line: 147
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 70,
            column: 17
          },
          end: {
            line: 70,
            column: 40
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 70,
            column: 17
          },
          end: {
            line: 70,
            column: 32
          }
        }, {
          start: {
            line: 70,
            column: 36
          },
          end: {
            line: 70,
            column: 40
          }
        }],
        line: 70
      },
      '1': {
        loc: {
          start: {
            line: 73,
            column: 6
          },
          end: {
            line: 73,
            column: 65
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 73,
            column: 38
          },
          end: {
            line: 73,
            column: 41
          }
        }, {
          start: {
            line: 73,
            column: 44
          },
          end: {
            line: 73,
            column: 65
          }
        }],
        line: 73
      },
      '2': {
        loc: {
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 108,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 108,
            column: 5
          }
        }, {
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 108,
            column: 5
          }
        }],
        line: 106
      },
      '3': {
        loc: {
          start: {
            line: 120,
            column: 4
          },
          end: {
            line: 122,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 120,
            column: 4
          },
          end: {
            line: 122,
            column: 5
          }
        }, {
          start: {
            line: 120,
            column: 4
          },
          end: {
            line: 122,
            column: 5
          }
        }],
        line: 120
      },
      '4': {
        loc: {
          start: {
            line: 131,
            column: 2
          },
          end: {
            line: 141,
            column: 3
          }
        },
        type: 'switch',
        locations: [{
          start: {
            line: 132,
            column: 4
          },
          end: {
            line: 133,
            column: 37
          }
        }, {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 135,
            column: 31
          }
        }, {
          start: {
            line: 136,
            column: 4
          },
          end: {
            line: 137,
            column: 31
          }
        }, {
          start: {
            line: 138,
            column: 4
          },
          end: {
            line: 140,
            column: 47
          }
        }],
        line: 131
      },
      '5': {
        loc: {
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 150,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 150,
            column: 3
          }
        }, {
          start: {
            line: 148,
            column: 2
          },
          end: {
            line: 150,
            column: 3
          }
        }],
        line: 148
      },
      '6': {
        loc: {
          start: {
            line: 151,
            column: 17
          },
          end: {
            line: 151,
            column: 59
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 151,
            column: 28
          },
          end: {
            line: 151,
            column: 32
          }
        }, {
          start: {
            line: 151,
            column: 35
          },
          end: {
            line: 151,
            column: 59
          }
        }],
        line: 151
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0, 0, 0],
      '5': [0, 0],
      '6': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getFilterPattern = getFilterPattern;

var _AtomInput;

function _load_AtomInput() {
  return _AtomInput = require('./AtomInput');
}

var _classnames;

function _load_classnames() {
  return _classnames = _interopRequireDefault(require('classnames'));
}

var _Button;

function _load_Button() {
  return _Button = require('./Button');
}

var _ButtonGroup;

function _load_ButtonGroup() {
  return _ButtonGroup = require('./ButtonGroup');
}

var _escapeStringRegexp;

function _load_escapeStringRegexp() {
  return _escapeStringRegexp = _interopRequireDefault(require('escape-string-regexp'));
}

var _react = _interopRequireWildcard(require('react'));

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class RegExpFilter extends _react.Component {

  constructor(props) {
    cov_1zcl69e6o6.f[0]++;
    cov_1zcl69e6o6.s[0]++;

    super(props);

    this._handleReToggleButtonClick = () => {
      cov_1zcl69e6o6.f[5]++;
      cov_1zcl69e6o6.s[13]++;

      this.props.onChange({
        text: this._currentValue.text,
        isRegExp: !this._currentValue.isRegExp
      });
    };

    this._handleTextChange = text => {
      cov_1zcl69e6o6.f[6]++;
      cov_1zcl69e6o6.s[14]++;

      if (text === this._currentValue.text) {
        cov_1zcl69e6o6.b[3][0]++;
        cov_1zcl69e6o6.s[15]++;

        return;
      } else {
        cov_1zcl69e6o6.b[3][1]++;
      }
      cov_1zcl69e6o6.s[16]++;
      this.props.onChange({
        text,
        isRegExp: this._currentValue.isRegExp
      });
    };

    cov_1zcl69e6o6.s[1]++;
    this._currentValue = props.value;
  }

  componentWillReceiveProps(props) {
    cov_1zcl69e6o6.f[1]++;
    cov_1zcl69e6o6.s[2]++;

    // We need to store this so that we can use it in the event handlers.
    this._currentValue = props.value;
  }

  render() {
    cov_1zcl69e6o6.f[2]++;

    const { value: { text, isRegExp, invalid } } = (cov_1zcl69e6o6.s[3]++, this.props);
    const size = (cov_1zcl69e6o6.s[4]++, (cov_1zcl69e6o6.b[0][0]++, this.props.size) || (cov_1zcl69e6o6.b[0][1]++, 'sm'));
    const buttonSize = (cov_1zcl69e6o6.s[5]++, getButtonSize(size));
    const inputWidth = (cov_1zcl69e6o6.s[6]++, this.props.inputWidth == null ? (cov_1zcl69e6o6.b[1][0]++, 200) : (cov_1zcl69e6o6.b[1][1]++, this.props.inputWidth));
    const inputClassName = (cov_1zcl69e6o6.s[7]++, (0, (_classnames || _load_classnames()).default)('nuclide-ui-regexp-filter-input', this.props.inputClassName, { invalid }));

    cov_1zcl69e6o6.s[8]++;
    return _react.createElement(
      (_ButtonGroup || _load_ButtonGroup()).ButtonGroup,
      { className: 'inline-block' },
      _react.createElement((_AtomInput || _load_AtomInput()).AtomInput, {
        ref: el => {
          cov_1zcl69e6o6.f[3]++;
          cov_1zcl69e6o6.s[9]++;

          this._input = el;
        },
        className: inputClassName,
        size: size,
        width: inputWidth,
        placeholderText: 'Filter',
        onDidChange: this._handleTextChange,
        value: text
      }),
      _react.createElement(
        (_Button || _load_Button()).Button,
        {
          className: 'nuclide-ui-regexp-filter-button',
          size: buttonSize,
          selected: isRegExp,
          onClick: this._handleReToggleButtonClick,
          tooltip: { title: 'Use Regex' } },
        '.*'
      )
    );
  }

  focus() {
    cov_1zcl69e6o6.f[4]++;
    cov_1zcl69e6o6.s[10]++;

    if (this._input == null) {
      cov_1zcl69e6o6.b[2][0]++;
      cov_1zcl69e6o6.s[11]++;

      return;
    } else {
      cov_1zcl69e6o6.b[2][1]++;
    }
    cov_1zcl69e6o6.s[12]++;
    this._input.focus();
  }

}

exports.default = RegExpFilter; /**
                                 * Copyright (c) 2017-present, Facebook, Inc.
                                 * All rights reserved.
                                 *
                                 * This source code is licensed under the BSD-style license found in the
                                 * LICENSE file in the root directory of this source tree. An additional grant
                                 * of patent rights can be found in the PATENTS file in the same directory.
                                 *
                                 * 
                                 * @format
                                 */

function getButtonSize(size) {
  cov_1zcl69e6o6.f[7]++;
  cov_1zcl69e6o6.s[17]++;

  switch (size) {
    case 'xs':
      cov_1zcl69e6o6.b[4][0]++;
      cov_1zcl69e6o6.s[18]++;

      return (_Button || _load_Button()).ButtonSizes.EXTRA_SMALL;
    case 'sm':
      cov_1zcl69e6o6.b[4][1]++;
      cov_1zcl69e6o6.s[19]++;

      return (_Button || _load_Button()).ButtonSizes.SMALL;
    case 'lg':
      cov_1zcl69e6o6.b[4][2]++;
      cov_1zcl69e6o6.s[20]++;

      return (_Button || _load_Button()).ButtonSizes.LARGE;
    default:
      cov_1zcl69e6o6.b[4][3]++;
      cov_1zcl69e6o6.s[21]++;

      size;
      cov_1zcl69e6o6.s[22]++;
      throw new Error(`Invalid size: ${size}`);
  }
}

function getFilterPattern(text, isRegExp) {
  cov_1zcl69e6o6.f[8]++;
  cov_1zcl69e6o6.s[23]++;

  if (text === '') {
    cov_1zcl69e6o6.b[5][0]++;
    cov_1zcl69e6o6.s[24]++;

    return { pattern: null, invalid: false };
  } else {
    cov_1zcl69e6o6.b[5][1]++;
  }
  const source = (cov_1zcl69e6o6.s[25]++, isRegExp ? (cov_1zcl69e6o6.b[6][0]++, text) : (cov_1zcl69e6o6.b[6][1]++, (0, (_escapeStringRegexp || _load_escapeStringRegexp()).default)(text)));
  cov_1zcl69e6o6.s[26]++;
  try {
    cov_1zcl69e6o6.s[27]++;

    return {
      pattern: new RegExp(source, 'i'),
      invalid: false
    };
  } catch (err) {
    cov_1zcl69e6o6.s[28]++;

    return {
      pattern: null,
      invalid: true
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlZ0V4cEZpbHRlci5qcyJdLCJuYW1lcyI6WyJnZXRGaWx0ZXJQYXR0ZXJuIiwiUmVnRXhwRmlsdGVyIiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIl9oYW5kbGVSZVRvZ2dsZUJ1dHRvbkNsaWNrIiwib25DaGFuZ2UiLCJ0ZXh0IiwiX2N1cnJlbnRWYWx1ZSIsImlzUmVnRXhwIiwiX2hhbmRsZVRleHRDaGFuZ2UiLCJ2YWx1ZSIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJyZW5kZXIiLCJpbnZhbGlkIiwic2l6ZSIsImJ1dHRvblNpemUiLCJnZXRCdXR0b25TaXplIiwiaW5wdXRXaWR0aCIsImlucHV0Q2xhc3NOYW1lIiwiZWwiLCJfaW5wdXQiLCJ0aXRsZSIsImZvY3VzIiwiRVhUUkFfU01BTEwiLCJTTUFMTCIsIkxBUkdFIiwiRXJyb3IiLCJwYXR0ZXJuIiwic291cmNlIiwiUmVnRXhwIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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WCxFQUFtQixHQUFuQixDQURKO0FBRUxmLGVBQVM7QUFGSixLQUFQO0FBSUQsR0FMRCxDQUtFLE9BQU9pQixHQUFQLEVBQVk7QUFBQTs7QUFDWixXQUFPO0FBQ0xILGVBQVMsSUFESjtBQUVMZCxlQUFTO0FBRkosS0FBUDtBQUlEO0FBQ0YiLCJmaWxlIjoiUmVnRXhwRmlsdGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge0J1dHRvblNpemV9IGZyb20gJy4vQnV0dG9uJztcblxuaW1wb3J0IHtBdG9tSW5wdXR9IGZyb20gJy4vQXRvbUlucHV0JztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHtCdXR0b24sIEJ1dHRvblNpemVzfSBmcm9tICcuL0J1dHRvbic7XG5pbXBvcnQge0J1dHRvbkdyb3VwfSBmcm9tICcuL0J1dHRvbkdyb3VwJztcbmltcG9ydCBlc2NhcGVTdHJpbmdSZWdleHAgZnJvbSAnZXNjYXBlLXN0cmluZy1yZWdleHAnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG50eXBlIFNpemUgPSAneHMnIHwgJ3NtJyB8ICdsZyc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHZhbHVlOiBSZWdFeHBGaWx0ZXJWYWx1ZSxcbiAgaW5wdXRXaWR0aD86IG51bWJlcixcbiAgaW5wdXRDbGFzc05hbWU/OiBzdHJpbmcsXG4gIG9uQ2hhbmdlOiAodmFsdWU6IFJlZ0V4cEZpbHRlckNoYW5nZSkgPT4gbWl4ZWQsXG4gIHNpemU/OiBTaXplLFxufTtcblxudHlwZSBTdGF0ZSA9IHtcbiAgdGV4dDogc3RyaW5nLFxuICBpc1JlZ0V4cDogYm9vbGVhbixcbiAgaW52YWxpZDogYm9vbGVhbixcbn07XG5cbmV4cG9ydCB0eXBlIFJlZ0V4cEZpbHRlclZhbHVlID0ge1xuICB0ZXh0OiBzdHJpbmcsXG4gIGlzUmVnRXhwOiBib29sZWFuLFxuICBpbnZhbGlkOiBib29sZWFuLFxufTtcblxuZXhwb3J0IHR5cGUgRmlsdGVyUGF0dGVybiA9IHtcbiAgcGF0dGVybjogP1JlZ0V4cCxcbiAgaW52YWxpZDogYm9vbGVhbixcbn07XG5cbmV4cG9ydCB0eXBlIFJlZ0V4cEZpbHRlckNoYW5nZSA9IHtcbiAgdGV4dDogc3RyaW5nLFxuICBpc1JlZ0V4cDogYm9vbGVhbixcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZ0V4cEZpbHRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgX2N1cnJlbnRWYWx1ZTogUmVnRXhwRmlsdGVyVmFsdWU7XG4gIF9pbnB1dDogP0F0b21JbnB1dDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5fY3VycmVudFZhbHVlID0gcHJvcHMudmFsdWU7XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzOiBQcm9wcyk6IHZvaWQge1xuICAgIC8vIFdlIG5lZWQgdG8gc3RvcmUgdGhpcyBzbyB0aGF0IHdlIGNhbiB1c2UgaXQgaW4gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgIHRoaXMuX2N1cnJlbnRWYWx1ZSA9IHByb3BzLnZhbHVlO1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGNvbnN0IHt2YWx1ZToge3RleHQsIGlzUmVnRXhwLCBpbnZhbGlkfX0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLnByb3BzLnNpemUgfHwgJ3NtJztcbiAgICBjb25zdCBidXR0b25TaXplID0gZ2V0QnV0dG9uU2l6ZShzaXplKTtcbiAgICBjb25zdCBpbnB1dFdpZHRoID1cbiAgICAgIHRoaXMucHJvcHMuaW5wdXRXaWR0aCA9PSBudWxsID8gMjAwIDogdGhpcy5wcm9wcy5pbnB1dFdpZHRoO1xuICAgIGNvbnN0IGlucHV0Q2xhc3NOYW1lID0gY2xhc3NuYW1lcyhcbiAgICAgICdudWNsaWRlLXVpLXJlZ2V4cC1maWx0ZXItaW5wdXQnLFxuICAgICAgdGhpcy5wcm9wcy5pbnB1dENsYXNzTmFtZSxcbiAgICAgIHtpbnZhbGlkfSxcbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCdXR0b25Hcm91cCBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2tcIj5cbiAgICAgICAgPEF0b21JbnB1dFxuICAgICAgICAgIHJlZj17ZWwgPT4ge1xuICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBlbDtcbiAgICAgICAgICB9fVxuICAgICAgICAgIGNsYXNzTmFtZT17aW5wdXRDbGFzc05hbWV9XG4gICAgICAgICAgc2l6ZT17c2l6ZX1cbiAgICAgICAgICB3aWR0aD17aW5wdXRXaWR0aH1cbiAgICAgICAgICBwbGFjZWhvbGRlclRleHQ9XCJGaWx0ZXJcIlxuICAgICAgICAgIG9uRGlkQ2hhbmdlPXt0aGlzLl9oYW5kbGVUZXh0Q2hhbmdlfVxuICAgICAgICAgIHZhbHVlPXt0ZXh0fVxuICAgICAgICAvPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPVwibnVjbGlkZS11aS1yZWdleHAtZmlsdGVyLWJ1dHRvblwiXG4gICAgICAgICAgc2l6ZT17YnV0dG9uU2l6ZX1cbiAgICAgICAgICBzZWxlY3RlZD17aXNSZWdFeHB9XG4gICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlUmVUb2dnbGVCdXR0b25DbGlja31cbiAgICAgICAgICB0b29sdGlwPXt7dGl0bGU6ICdVc2UgUmVnZXgnfX0+XG4gICAgICAgICAgLipcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L0J1dHRvbkdyb3VwPlxuICAgICk7XG4gIH1cblxuICBmb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faW5wdXQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgX2hhbmRsZVJlVG9nZ2xlQnV0dG9uQ2xpY2sgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICB0ZXh0OiB0aGlzLl9jdXJyZW50VmFsdWUudGV4dCxcbiAgICAgIGlzUmVnRXhwOiAhdGhpcy5fY3VycmVudFZhbHVlLmlzUmVnRXhwLFxuICAgIH0pO1xuICB9O1xuXG4gIF9oYW5kbGVUZXh0Q2hhbmdlID0gKHRleHQ6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIGlmICh0ZXh0ID09PSB0aGlzLl9jdXJyZW50VmFsdWUudGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIHRleHQsXG4gICAgICBpc1JlZ0V4cDogdGhpcy5fY3VycmVudFZhbHVlLmlzUmVnRXhwLFxuICAgIH0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRCdXR0b25TaXplKHNpemU6IFNpemUpOiBCdXR0b25TaXplIHtcbiAgc3dpdGNoIChzaXplKSB7XG4gICAgY2FzZSAneHMnOlxuICAgICAgcmV0dXJuIEJ1dHRvblNpemVzLkVYVFJBX1NNQUxMO1xuICAgIGNhc2UgJ3NtJzpcbiAgICAgIHJldHVybiBCdXR0b25TaXplcy5TTUFMTDtcbiAgICBjYXNlICdsZyc6XG4gICAgICByZXR1cm4gQnV0dG9uU2l6ZXMuTEFSR0U7XG4gICAgZGVmYXVsdDpcbiAgICAgIChzaXplOiBlbXB0eSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2l6ZTogJHtzaXplfWApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJQYXR0ZXJuKFxuICB0ZXh0OiBzdHJpbmcsXG4gIGlzUmVnRXhwOiBib29sZWFuLFxuKTogRmlsdGVyUGF0dGVybiB7XG4gIGlmICh0ZXh0ID09PSAnJykge1xuICAgIHJldHVybiB7cGF0dGVybjogbnVsbCwgaW52YWxpZDogZmFsc2V9O1xuICB9XG4gIGNvbnN0IHNvdXJjZSA9IGlzUmVnRXhwID8gdGV4dCA6IGVzY2FwZVN0cmluZ1JlZ2V4cCh0ZXh0KTtcbiAgdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0dGVybjogbmV3IFJlZ0V4cChzb3VyY2UsICdpJyksXG4gICAgICBpbnZhbGlkOiBmYWxzZSxcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGF0dGVybjogbnVsbCxcbiAgICAgIGludmFsaWQ6IHRydWUsXG4gICAgfTtcbiAgfVxufVxuIl19