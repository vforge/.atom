'use strict';

var cov_frh0zol2o = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/lib/services/IndieLinterRegistry.js',
      hash = '36ae088196edd6a6353d19f4cbe60103d2c1d855',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/lib/services/IndieLinterRegistry.js',
    statementMap: {
      '0': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 39,
          column: 29
        }
      },
      '1': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 75
        }
      },
      '2': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 43,
          column: 6
        }
      },
      '3': {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 44,
          column: 24
        }
      },
      '4': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 34
        }
      },
      '5': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 40
        }
      },
      '6': {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 47,
          column: 49
        }
      },
      '7': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 48
        }
      },
      '8': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 60
        }
      },
      '9': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 22
        }
      },
      '10': {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 59,
          column: 39
        }
      },
      '11': {
        start: {
          line: 63,
          column: 4
        },
        end: {
          line: 63,
          column: 28
        }
      },
      '12': {
        start: {
          line: 67,
          column: 4
        },
        end: {
          line: 67,
          column: 26
        }
      },
      '13': {
        start: {
          line: 71,
          column: 4
        },
        end: {
          line: 71,
          column: 24
        }
      },
      '14': {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 45
        }
      },
      '15': {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 78,
          column: 24
        }
      },
      '16': {
        start: {
          line: 77,
          column: 25
        },
        end: {
          line: 77,
          column: 59
        }
      },
      '17': {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 81,
          column: 6
        }
      },
      '18': {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 85,
          column: 25
        }
      },
      '19': {
        start: {
          line: 86,
          column: 4
        },
        end: {
          line: 86,
          column: 30
        }
      },
      '20': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 89,
          column: 6
        }
      },
      '21': {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 99,
          column: 6
        }
      },
      '22': {
        start: {
          line: 97,
          column: 8
        },
        end: {
          line: 97,
          column: 33
        }
      },
      '23': {
        start: {
          line: 103,
          column: 4
        },
        end: {
          line: 108,
          column: 6
        }
      },
      '24': {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 116,
          column: 5
        }
      },
      '25': {
        start: {
          line: 114,
          column: 6
        },
        end: {
          line: 114,
          column: 27
        }
      },
      '26': {
        start: {
          line: 115,
          column: 6
        },
        end: {
          line: 115,
          column: 33
        }
      },
      '27': {
        start: {
          line: 124,
          column: 4
        },
        end: {
          line: 124,
          column: 32
        }
      },
      '28': {
        start: {
          line: 128,
          column: 21
        },
        end: {
          line: 128,
          column: 52
        }
      },
      '29': {
        start: {
          line: 129,
          column: 4
        },
        end: {
          line: 129,
          column: 34
        }
      },
      '30': {
        start: {
          line: 130,
          column: 4
        },
        end: {
          line: 132,
          column: 7
        }
      },
      '31': {
        start: {
          line: 131,
          column: 6
        },
        end: {
          line: 131,
          column: 39
        }
      },
      '32': {
        start: {
          line: 133,
          column: 4
        },
        end: {
          line: 133,
          column: 20
        }
      },
      '33': {
        start: {
          line: 137,
          column: 4
        },
        end: {
          line: 137,
          column: 60
        }
      },
      '34': {
        start: {
          line: 137,
          column: 40
        },
        end: {
          line: 137,
          column: 58
        }
      },
      '35': {
        start: {
          line: 138,
          column: 4
        },
        end: {
          line: 138,
          column: 28
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 38,
            column: 2
          },
          end: {
            line: 38,
            column: 3
          }
        },
        loc: {
          start: {
            line: 38,
            column: 36
          },
          end: {
            line: 51,
            column: 3
          }
        },
        line: 38
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 21
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 53
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 57,
            column: 3
          }
        },
        loc: {
          start: {
            line: 57,
            column: 60
          },
          end: {
            line: 60,
            column: 3
          }
        },
        line: 57
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 62,
            column: 2
          },
          end: {
            line: 62,
            column: 3
          }
        },
        loc: {
          start: {
            line: 62,
            column: 34
          },
          end: {
            line: 64,
            column: 3
          }
        },
        line: 62
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 66,
            column: 2
          },
          end: {
            line: 66,
            column: 3
          }
        },
        loc: {
          start: {
            line: 66,
            column: 40
          },
          end: {
            line: 68,
            column: 3
          }
        },
        line: 66
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 70,
            column: 2
          },
          end: {
            line: 70,
            column: 3
          }
        },
        loc: {
          start: {
            line: 70,
            column: 24
          },
          end: {
            line: 73,
            column: 3
          }
        },
        line: 70
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 75,
            column: 3
          }
        },
        loc: {
          start: {
            line: 75,
            column: 72
          },
          end: {
            line: 82,
            column: 3
          }
        },
        line: 75
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 77,
            column: 14
          },
          end: {
            line: 77,
            column: 15
          }
        },
        loc: {
          start: {
            line: 77,
            column: 25
          },
          end: {
            line: 77,
            column: 59
          }
        },
        line: 77
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 84,
            column: 3
          }
        },
        loc: {
          start: {
            line: 84,
            column: 57
          },
          end: {
            line: 90,
            column: 3
          }
        },
        line: 84
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 92,
            column: 2
          },
          end: {
            line: 92,
            column: 3
          }
        },
        loc: {
          start: {
            line: 94,
            column: 17
          },
          end: {
            line: 100,
            column: 3
          }
        },
        line: 94
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 96,
            column: 67
          },
          end: {
            line: 96,
            column: 68
          }
        },
        loc: {
          start: {
            line: 96,
            column: 73
          },
          end: {
            line: 98,
            column: 7
          }
        },
        line: 96
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 102,
            column: 2
          },
          end: {
            line: 102,
            column: 3
          }
        },
        loc: {
          start: {
            line: 102,
            column: 51
          },
          end: {
            line: 109,
            column: 3
          }
        },
        line: 102
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 111,
            column: 2
          },
          end: {
            line: 111,
            column: 3
          }
        },
        loc: {
          start: {
            line: 111,
            column: 12
          },
          end: {
            line: 117,
            column: 3
          }
        },
        line: 111
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 123,
            column: 2
          },
          end: {
            line: 123,
            column: 3
          }
        },
        loc: {
          start: {
            line: 123,
            column: 16
          },
          end: {
            line: 125,
            column: 3
          }
        },
        line: 123
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 127,
            column: 2
          },
          end: {
            line: 127,
            column: 3
          }
        },
        loc: {
          start: {
            line: 127,
            column: 54
          },
          end: {
            line: 134,
            column: 3
          }
        },
        line: 127
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 130,
            column: 26
          },
          end: {
            line: 130,
            column: 27
          }
        },
        loc: {
          start: {
            line: 130,
            column: 32
          },
          end: {
            line: 132,
            column: 5
          }
        },
        line: 130
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 136,
            column: 2
          },
          end: {
            line: 136,
            column: 3
          }
        },
        loc: {
          start: {
            line: 136,
            column: 18
          },
          end: {
            line: 139,
            column: 3
          }
        },
        line: 136
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 137,
            column: 28
          },
          end: {
            line: 137,
            column: 29
          }
        },
        loc: {
          start: {
            line: 137,
            column: 40
          },
          end: {
            line: 137,
            column: 58
          }
        },
        line: 137
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 40,
            column: 34
          },
          end: {
            line: 40,
            column: 74
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 40,
            column: 34
          },
          end: {
            line: 40,
            column: 62
          }
        }, {
          start: {
            line: 40,
            column: 66
          },
          end: {
            line: 40,
            column: 74
          }
        }],
        line: 40
      },
      '1': {
        loc: {
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 42,
            column: 56
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 42,
            column: 26
          },
          end: {
            line: 42,
            column: 51
          }
        }, {
          start: {
            line: 42,
            column: 54
          },
          end: {
            line: 42,
            column: 56
          }
        }],
        line: 42
      },
      '2': {
        loc: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        }, {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        }],
        line: 113
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.IndieLinterDelegate = undefined;

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _LinterAdapter;

function _load_LinterAdapter() {
  return _LinterAdapter = require('../services/LinterAdapter');
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class IndieLinterDelegate {

  // For compatibility with the Nuclide API.
  constructor(config) {
    cov_frh0zol2o.f[0]++;
    cov_frh0zol2o.s[0]++;

    this._name = config.name;
    cov_frh0zol2o.s[1]++;
    this._supportedMessageKinds = (cov_frh0zol2o.b[0][0]++, config.supportedMessageKinds) || (cov_frh0zol2o.b[0][1]++, ['lint']);
    cov_frh0zol2o.s[2]++;
    this._uiSettings = Object.freeze(config.uiSettings ? (cov_frh0zol2o.b[1][0]++, config.uiSettings.slice()) : (cov_frh0zol2o.b[1][1]++, []));
    cov_frh0zol2o.s[3]++;
    this._messages = [];
    cov_frh0zol2o.s[4]++;
    this._updates = new _rxjsBundlesRxMinJs.Subject();
    cov_frh0zol2o.s[5]++;
    this._invalidations = new _rxjsBundlesRxMinJs.Subject();
    cov_frh0zol2o.s[6]++;
    this._destroyed = new _rxjsBundlesRxMinJs.BehaviorSubject(false);

    cov_frh0zol2o.s[7]++;
    this.updates = this._updates.asObservable();
    cov_frh0zol2o.s[8]++;
    this.invalidations = this._invalidations.asObservable();
  }

  get name() {
    cov_frh0zol2o.f[1]++;
    cov_frh0zol2o.s[9]++;

    return this._name;
  }

  get supportedMessageKinds() {
    cov_frh0zol2o.f[2]++;
    cov_frh0zol2o.s[10]++;

    // We'll count on ourselves not to mutate this.
    return this._supportedMessageKinds;
  }

  get uiSettings() {
    cov_frh0zol2o.f[3]++;
    cov_frh0zol2o.s[11]++;

    return this._uiSettings;
  }

  getMessages() {
    cov_frh0zol2o.f[4]++;
    cov_frh0zol2o.s[12]++;

    return this._messages;
  }

  clearMessages() {
    cov_frh0zol2o.f[5]++;
    cov_frh0zol2o.s[13]++;

    this._messages = [];
    cov_frh0zol2o.s[14]++;
    this._invalidations.next({ scope: 'all' });
  }

  setMessages(filePath, messages) {
    cov_frh0zol2o.f[6]++;
    cov_frh0zol2o.s[15]++;

    this._messages = this._messages.filter(message => {
      cov_frh0zol2o.f[7]++;
      cov_frh0zol2o.s[16]++;
      return message.location.file !== filePath;
    }).concat(messages);
    cov_frh0zol2o.s[17]++;
    this._updates.next((0, (_LinterAdapter || _load_LinterAdapter()).linterMessagesToDiagnosticUpdate)(filePath, [...messages], this._name));
  }

  setAllMessages(messages) {
    cov_frh0zol2o.f[8]++;
    cov_frh0zol2o.s[18]++;

    this.clearMessages();
    cov_frh0zol2o.s[19]++;
    this._messages = messages;
    cov_frh0zol2o.s[20]++;
    this._updates.next((0, (_LinterAdapter || _load_LinterAdapter()).linterMessagesToDiagnosticUpdate)(null, [...messages], this._name));
  }

  onDidUpdate(callback) {
    cov_frh0zol2o.f[9]++;
    cov_frh0zol2o.s[21]++;

    return new (_UniversalDisposable || _load_UniversalDisposable()).default(_rxjsBundlesRxMinJs.Observable.merge(this.updates, this.invalidations).subscribe(() => {
      cov_frh0zol2o.f[10]++;
      cov_frh0zol2o.s[22]++;

      callback(this._messages);
    }));
  }

  onDidDestroy(callback) {
    cov_frh0zol2o.f[11]++;
    cov_frh0zol2o.s[23]++;

    return new (_UniversalDisposable || _load_UniversalDisposable()).default(this._destroyed.filter(Boolean).take(1).subscribe(callback));
  }

  dispose() {
    cov_frh0zol2o.f[12]++;
    cov_frh0zol2o.s[24]++;

    // Guard against double-destruction.
    if (!this._destroyed.getValue()) {
      cov_frh0zol2o.b[2][0]++;
      cov_frh0zol2o.s[25]++;

      this.clearMessages();
      cov_frh0zol2o.s[26]++;
      this._destroyed.next(true);
    } else {
      cov_frh0zol2o.b[2][1]++;
    }
  }
}

exports.IndieLinterDelegate = IndieLinterDelegate;
class IndieLinterRegistry {

  constructor() {
    cov_frh0zol2o.f[13]++;
    cov_frh0zol2o.s[27]++;

    this._delegates = new Set();
  }

  register(config) {
    cov_frh0zol2o.f[14]++;

    const delegate = (cov_frh0zol2o.s[28]++, new IndieLinterDelegate(config));
    cov_frh0zol2o.s[29]++;
    this._delegates.add(delegate);
    cov_frh0zol2o.s[30]++;
    delegate.onDidDestroy(() => {
      cov_frh0zol2o.f[15]++;
      cov_frh0zol2o.s[31]++;

      this._delegates.delete(delegate);
    });
    cov_frh0zol2o.s[32]++;
    return delegate;
  }

  dispose() {
    cov_frh0zol2o.f[16]++;
    cov_frh0zol2o.s[33]++;

    this._delegates.forEach(delegate => {
      cov_frh0zol2o.f[17]++;
      cov_frh0zol2o.s[34]++;
      return delegate.dispose();
    });
    cov_frh0zol2o.s[35]++;
    this._delegates.clear();
  }
}
exports.default = IndieLinterRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkluZGllTGludGVyUmVnaXN0cnkuanMiXSwibmFtZXMiOlsiSW5kaWVMaW50ZXJEZWxlZ2F0ZSIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiX25hbWUiLCJuYW1lIiwiX3N1cHBvcnRlZE1lc3NhZ2VLaW5kcyIsInN1cHBvcnRlZE1lc3NhZ2VLaW5kcyIsIl91aVNldHRpbmdzIiwiT2JqZWN0IiwiZnJlZXplIiwidWlTZXR0aW5ncyIsInNsaWNlIiwiX21lc3NhZ2VzIiwiX3VwZGF0ZXMiLCJfaW52YWxpZGF0aW9ucyIsIl9kZXN0cm95ZWQiLCJ1cGRhdGVzIiwiYXNPYnNlcnZhYmxlIiwiaW52YWxpZGF0aW9ucyIsImdldE1lc3NhZ2VzIiwiY2xlYXJNZXNzYWdlcyIsIm5leHQiLCJzY29wZSIsInNldE1lc3NhZ2VzIiwiZmlsZVBhdGgiLCJtZXNzYWdlcyIsImZpbHRlciIsIm1lc3NhZ2UiLCJsb2NhdGlvbiIsImZpbGUiLCJjb25jYXQiLCJzZXRBbGxNZXNzYWdlcyIsIm9uRGlkVXBkYXRlIiwiY2FsbGJhY2siLCJtZXJnZSIsInN1YnNjcmliZSIsIm9uRGlkRGVzdHJveSIsIkJvb2xlYW4iLCJ0YWtlIiwiZGlzcG9zZSIsImdldFZhbHVlIiwiSW5kaWVMaW50ZXJSZWdpc3RyeSIsIl9kZWxlZ2F0ZXMiLCJTZXQiLCJyZWdpc3RlciIsImRlbGVnYXRlIiwiYWRkIiwiZGVsZXRlIiwiZm9yRWFjaCIsImNsZWFyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQXRCQTs7Ozs7Ozs7Ozs7O0FBd0JPLE1BQU1BLG1CQUFOLENBQTBCOztBQVMvQjtBQUlBQyxjQUFZQyxNQUFaLEVBQWtDO0FBQUE7QUFBQTs7QUFDaEMsU0FBS0MsS0FBTCxHQUFh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QUUvQixXQUFLTCxVQUFMLENBQWdCTSxJQUFoQixDQUFxQixJQUFyQjtBQUNELEtBSEQ7QUFBQTtBQUFBO0FBSUQ7QUE1RjhCOztRQUFwQnJCLG1CLEdBQUFBLG1CO0FBK0ZFLE1BQU15QyxtQkFBTixDQUEwQjs7QUFHdkN4QyxnQkFBYztBQUFBO0FBQUE7O0FBQ1osU0FBS3lDLFVBQUwsR0FBa0IsSUFBSUMsR0FBSixFQUFsQjtBQUNEOztBQUVEQyxXQUFTMUMsTUFBVCxFQUFvRDtBQUFBOztBQUNsRCxVQUFNMkMsbUNBQVcsSUFBSTdDLG1CQUFKLENBQXdCRSxNQUF4QixDQUFYLENBQU47QUFEa0Q7QUFFbEQsU0FBS3dDLFVBQUwsQ0FBZ0JJLEdBQWhCLENBQW9CRCxRQUFwQjtBQUZrRDtBQUdsREEsYUFBU1QsWUFBVCxDQUFzQixNQUFNO0FBQUE7QUFBQTs7QUFDMUIsV0FBS00sVUFBTCxDQUFnQkssTUFBaEIsQ0FBdUJGLFFBQXZCO0FBQ0QsS0FGRDtBQUhrRDtBQU1sRCxXQUFPQSxRQUFQO0FBQ0Q7O0FBRUROLFlBQWdCO0FBQUE7QUFBQTs7QUFDZCxTQUFLRyxVQUFMLENBQWdCTSxPQUFoQixDQUF3QkgsWUFBWTtBQUFBO0FBQUE7QUFBQSxzQkFBU04sT0FBVDtBQUFrQixLQUF0RDtBQURjO0FBRWQsU0FBS0csVUFBTCxDQUFnQk8sS0FBaEI7QUFDRDtBQW5Cc0M7a0JBQXBCUixtQiIsImZpbGUiOiJJbmRpZUxpbnRlclJlZ2lzdHJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBEaWFnbm9zdGljUHJvdmlkZXJVcGRhdGUsXG4gIERpYWdub3N0aWNJbnZhbGlkYXRpb25NZXNzYWdlLFxuICBEaWFnbm9zdGljTWVzc2FnZUtpbmQsXG4gIExpbnRlckNvbmZpZyxcbiAgTGludGVyTWVzc2FnZVYyLFxufSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7QmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlLCBTdWJqZWN0fSBmcm9tICdyeGpzJztcbmltcG9ydCBVbml2ZXJzYWxEaXNwb3NhYmxlIGZyb20gJ251Y2xpZGUtY29tbW9ucy9Vbml2ZXJzYWxEaXNwb3NhYmxlJztcbmltcG9ydCB7bGludGVyTWVzc2FnZXNUb0RpYWdub3N0aWNVcGRhdGV9IGZyb20gJy4uL3NlcnZpY2VzL0xpbnRlckFkYXB0ZXInO1xuXG5leHBvcnQgY2xhc3MgSW5kaWVMaW50ZXJEZWxlZ2F0ZSB7XG4gIF9uYW1lOiBzdHJpbmc7XG4gIF9zdXBwb3J0ZWRNZXNzYWdlS2luZHM6IEFycmF5PERpYWdub3N0aWNNZXNzYWdlS2luZD47XG4gIF91aVNldHRpbmdzOiBBcnJheTxzdHJpbmc+O1xuICBfbWVzc2FnZXM6IEFycmF5PExpbnRlck1lc3NhZ2VWMj47XG4gIF91cGRhdGVzOiBTdWJqZWN0PERpYWdub3N0aWNQcm92aWRlclVwZGF0ZT47XG4gIF9pbnZhbGlkYXRpb25zOiBTdWJqZWN0PERpYWdub3N0aWNJbnZhbGlkYXRpb25NZXNzYWdlPjtcbiAgX2Rlc3Ryb3llZDogQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+O1xuXG4gIC8vIEZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIE51Y2xpZGUgQVBJLlxuICB1cGRhdGVzOiBPYnNlcnZhYmxlPERpYWdub3N0aWNQcm92aWRlclVwZGF0ZT47XG4gIGludmFsaWRhdGlvbnM6IE9ic2VydmFibGU8RGlhZ25vc3RpY0ludmFsaWRhdGlvbk1lc3NhZ2U+O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogTGludGVyQ29uZmlnKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgIHRoaXMuX3N1cHBvcnRlZE1lc3NhZ2VLaW5kcyA9IGNvbmZpZy5zdXBwb3J0ZWRNZXNzYWdlS2luZHMgfHwgWydsaW50J107XG4gICAgdGhpcy5fdWlTZXR0aW5ncyA9IE9iamVjdC5mcmVlemUoXG4gICAgICBjb25maWcudWlTZXR0aW5ncyA/IGNvbmZpZy51aVNldHRpbmdzLnNsaWNlKCkgOiBbXSxcbiAgICApO1xuICAgIHRoaXMuX21lc3NhZ2VzID0gW107XG4gICAgdGhpcy5fdXBkYXRlcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgdGhpcy5faW52YWxpZGF0aW9ucyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgdGhpcy5fZGVzdHJveWVkID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XG5cbiAgICB0aGlzLnVwZGF0ZXMgPSB0aGlzLl91cGRhdGVzLmFzT2JzZXJ2YWJsZSgpO1xuICAgIHRoaXMuaW52YWxpZGF0aW9ucyA9IHRoaXMuX2ludmFsaWRhdGlvbnMuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG5cbiAgZ2V0IHN1cHBvcnRlZE1lc3NhZ2VLaW5kcygpOiBBcnJheTxEaWFnbm9zdGljTWVzc2FnZUtpbmQ+IHtcbiAgICAvLyBXZSdsbCBjb3VudCBvbiBvdXJzZWx2ZXMgbm90IHRvIG11dGF0ZSB0aGlzLlxuICAgIHJldHVybiB0aGlzLl9zdXBwb3J0ZWRNZXNzYWdlS2luZHM7XG4gIH1cblxuICBnZXQgdWlTZXR0aW5ncygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5fdWlTZXR0aW5ncztcbiAgfVxuXG4gIGdldE1lc3NhZ2VzKCk6IEFycmF5PExpbnRlck1lc3NhZ2VWMj4ge1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlcztcbiAgfVxuXG4gIGNsZWFyTWVzc2FnZXMoKTogdm9pZCB7XG4gICAgdGhpcy5fbWVzc2FnZXMgPSBbXTtcbiAgICB0aGlzLl9pbnZhbGlkYXRpb25zLm5leHQoe3Njb3BlOiAnYWxsJ30pO1xuICB9XG5cbiAgc2V0TWVzc2FnZXMoZmlsZVBhdGg6IHN0cmluZywgbWVzc2FnZXM6IEFycmF5PExpbnRlck1lc3NhZ2VWMj4pOiB2b2lkIHtcbiAgICB0aGlzLl9tZXNzYWdlcyA9IHRoaXMuX21lc3NhZ2VzXG4gICAgICAuZmlsdGVyKG1lc3NhZ2UgPT4gbWVzc2FnZS5sb2NhdGlvbi5maWxlICE9PSBmaWxlUGF0aClcbiAgICAgIC5jb25jYXQobWVzc2FnZXMpO1xuICAgIHRoaXMuX3VwZGF0ZXMubmV4dChcbiAgICAgIGxpbnRlck1lc3NhZ2VzVG9EaWFnbm9zdGljVXBkYXRlKGZpbGVQYXRoLCBbLi4ubWVzc2FnZXNdLCB0aGlzLl9uYW1lKSxcbiAgICApO1xuICB9XG5cbiAgc2V0QWxsTWVzc2FnZXMobWVzc2FnZXM6IEFycmF5PExpbnRlck1lc3NhZ2VWMj4pOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyTWVzc2FnZXMoKTtcbiAgICB0aGlzLl9tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgIHRoaXMuX3VwZGF0ZXMubmV4dChcbiAgICAgIGxpbnRlck1lc3NhZ2VzVG9EaWFnbm9zdGljVXBkYXRlKG51bGwsIFsuLi5tZXNzYWdlc10sIHRoaXMuX25hbWUpLFxuICAgICk7XG4gIH1cblxuICBvbkRpZFVwZGF0ZShcbiAgICBjYWxsYmFjazogKG1lc3NhZ2VzOiBBcnJheTxMaW50ZXJNZXNzYWdlVjI+KSA9PiBtaXhlZCxcbiAgKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZShcbiAgICAgIE9ic2VydmFibGUubWVyZ2UodGhpcy51cGRhdGVzLCB0aGlzLmludmFsaWRhdGlvbnMpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMuX21lc3NhZ2VzKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBvbkRpZERlc3Ryb3koY2FsbGJhY2s6ICgpID0+IG1peGVkKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZShcbiAgICAgIHRoaXMuX2Rlc3Ryb3llZFxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgIC50YWtlKDEpXG4gICAgICAgIC5zdWJzY3JpYmUoY2FsbGJhY2spLFxuICAgICk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIC8vIEd1YXJkIGFnYWluc3QgZG91YmxlLWRlc3RydWN0aW9uLlxuICAgIGlmICghdGhpcy5fZGVzdHJveWVkLmdldFZhbHVlKCkpIHtcbiAgICAgIHRoaXMuY2xlYXJNZXNzYWdlcygpO1xuICAgICAgdGhpcy5fZGVzdHJveWVkLm5leHQodHJ1ZSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZGllTGludGVyUmVnaXN0cnkge1xuICBfZGVsZWdhdGVzOiBTZXQ8SW5kaWVMaW50ZXJEZWxlZ2F0ZT47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fZGVsZWdhdGVzID0gbmV3IFNldCgpO1xuICB9XG5cbiAgcmVnaXN0ZXIoY29uZmlnOiBMaW50ZXJDb25maWcpOiBJbmRpZUxpbnRlckRlbGVnYXRlIHtcbiAgICBjb25zdCBkZWxlZ2F0ZSA9IG5ldyBJbmRpZUxpbnRlckRlbGVnYXRlKGNvbmZpZyk7XG4gICAgdGhpcy5fZGVsZWdhdGVzLmFkZChkZWxlZ2F0ZSk7XG4gICAgZGVsZWdhdGUub25EaWREZXN0cm95KCgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGVnYXRlcy5kZWxldGUoZGVsZWdhdGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWxlZ2F0ZTtcbiAgfVxuXG4gIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fZGVsZWdhdGVzLmZvckVhY2goZGVsZWdhdGUgPT4gZGVsZWdhdGUuZGlzcG9zZSgpKTtcbiAgICB0aGlzLl9kZWxlZ2F0ZXMuY2xlYXIoKTtcbiAgfVxufVxuIl19