'use strict';

var cov_r8ly3lo29 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/lib/main.js',
      hash = '1441bbfd30d2f583f049f7f0400c44de2ca7443d',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics/lib/main.js',
    statementMap: {
      '0': {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 40
        }
      },
      '1': {
        start: {
          line: 44,
          column: 32
        },
        end: {
          line: 44,
          column: 57
        }
      },
      '2': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 45,
          column: 51
        }
      },
      '3': {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 50,
          column: 7
        }
      },
      '4': {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 48,
          column: 68
        }
      },
      '5': {
        start: {
          line: 48,
          column: 49
        },
        end: {
          line: 48,
          column: 66
        }
      },
      '6': {
        start: {
          line: 49,
          column: 6
        },
        end: {
          line: 49,
          column: 38
        }
      },
      '7': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 32
        }
      },
      '8': {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 61,
          column: 46
        }
      },
      '9': {
        start: {
          line: 65,
          column: 21
        },
        end: {
          line: 65,
          column: 46
        }
      },
      '10': {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 66,
          column: 36
        }
      },
      '11': {
        start: {
          line: 67,
          column: 4
        },
        end: {
          line: 74,
          column: 6
        }
      },
      '12': {
        start: {
          line: 68,
          column: 23
        },
        end: {
          line: 68,
          column: 48
        }
      },
      '13': {
        start: {
          line: 69,
          column: 25
        },
        end: {
          line: 69,
          column: 68
        }
      },
      '14': {
        start: {
          line: 70,
          column: 6
        },
        end: {
          line: 72,
          column: 9
        }
      },
      '15': {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 71,
          column: 29
        }
      },
      '16': {
        start: {
          line: 73,
          column: 6
        },
        end: {
          line: 73,
          column: 22
        }
      },
      '17': {
        start: {
          line: 78,
          column: 4
        },
        end: {
          line: 78,
          column: 38
        }
      },
      '18': {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 81,
          column: 7
        }
      },
      '19': {
        start: {
          line: 80,
          column: 6
        },
        end: {
          line: 80,
          column: 37
        }
      },
      '20': {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 87,
          column: 5
        }
      },
      '21': {
        start: {
          line: 86,
          column: 6
        },
        end: {
          line: 86,
          column: 55
        }
      },
      '22': {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 88,
          column: 37
        }
      },
      '23': {
        start: {
          line: 92,
          column: 4
        },
        end: {
          line: 92,
          column: 64
        }
      },
      '24': {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 96,
          column: 7
        }
      },
      '25': {
        start: {
          line: 94,
          column: 6
        },
        end: {
          line: 94,
          column: 70
        }
      },
      '26': {
        start: {
          line: 95,
          column: 6
        },
        end: {
          line: 95,
          column: 63
        }
      },
      '27': {
        start: {
          line: 102,
          column: 22
        },
        end: {
          line: 102,
          column: 75
        }
      },
      '28': {
        start: {
          line: 103,
          column: 31
        },
        end: {
          line: 103,
          column: 56
        }
      },
      '29': {
        start: {
          line: 104,
          column: 4
        },
        end: {
          line: 119,
          column: 5
        }
      },
      '30': {
        start: {
          line: 105,
          column: 22
        },
        end: {
          line: 105,
          column: 79
        }
      },
      '31': {
        start: {
          line: 105,
          column: 55
        },
        end: {
          line: 105,
          column: 78
        }
      },
      '32': {
        start: {
          line: 106,
          column: 6
        },
        end: {
          line: 108,
          column: 7
        }
      },
      '33': {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 107,
          column: 17
        }
      },
      '34': {
        start: {
          line: 109,
          column: 6
        },
        end: {
          line: 109,
          column: 43
        }
      },
      '35': {
        start: {
          line: 110,
          column: 35
        },
        end: {
          line: 113,
          column: 8
        }
      },
      '36': {
        start: {
          line: 114,
          column: 6
        },
        end: {
          line: 118,
          column: 9
        }
      },
      '37': {
        start: {
          line: 115,
          column: 8
        },
        end: {
          line: 115,
          column: 39
        }
      },
      '38': {
        start: {
          line: 116,
          column: 8
        },
        end: {
          line: 116,
          column: 26
        }
      },
      '39': {
        start: {
          line: 117,
          column: 8
        },
        end: {
          line: 117,
          column: 48
        }
      },
      '40': {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 120,
          column: 30
        }
      },
      '41': {
        start: {
          line: 127,
          column: 31
        },
        end: {
          line: 134,
          column: 5
        }
      },
      '42': {
        start: {
          line: 135,
          column: 4
        },
        end: {
          line: 135,
          column: 65
        }
      },
      '43': {
        start: {
          line: 141,
          column: 4
        },
        end: {
          line: 141,
          column: 56
        }
      },
      '44': {
        start: {
          line: 142,
          column: 4
        },
        end: {
          line: 144,
          column: 7
        }
      },
      '45': {
        start: {
          line: 143,
          column: 6
        },
        end: {
          line: 143,
          column: 61
        }
      },
      '46': {
        start: {
          line: 148,
          column: 0
        },
        end: {
          line: 148,
          column: 42
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 41,
            column: 2
          },
          end: {
            line: 41,
            column: 3
          }
        },
        loc: {
          start: {
            line: 41,
            column: 16
          },
          end: {
            line: 51,
            column: 3
          }
        },
        line: 41
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 47,
            column: 69
          },
          end: {
            line: 47,
            column: 70
          }
        },
        loc: {
          start: {
            line: 47,
            column: 75
          },
          end: {
            line: 50,
            column: 5
          }
        },
        line: 47
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 48,
            column: 38
          },
          end: {
            line: 48,
            column: 39
          }
        },
        loc: {
          start: {
            line: 48,
            column: 49
          },
          end: {
            line: 48,
            column: 66
          }
        },
        line: 48
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 53
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 60,
            column: 2
          },
          end: {
            line: 60,
            column: 3
          }
        },
        loc: {
          start: {
            line: 60,
            column: 48
          },
          end: {
            line: 62,
            column: 3
          }
        },
        line: 60
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 3
          }
        },
        loc: {
          start: {
            line: 64,
            column: 38
          },
          end: {
            line: 75,
            column: 3
          }
        },
        line: 64
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 67,
            column: 11
          },
          end: {
            line: 67,
            column: 12
          }
        },
        loc: {
          start: {
            line: 67,
            column: 21
          },
          end: {
            line: 74,
            column: 5
          }
        },
        line: 67
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 70,
            column: 28
          },
          end: {
            line: 70,
            column: 29
          }
        },
        loc: {
          start: {
            line: 70,
            column: 34
          },
          end: {
            line: 72,
            column: 7
          }
        },
        line: 70
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 77,
            column: 2
          },
          end: {
            line: 77,
            column: 3
          }
        },
        loc: {
          start: {
            line: 77,
            column: 61
          },
          end: {
            line: 82,
            column: 3
          }
        },
        line: 77
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 79,
            column: 35
          },
          end: {
            line: 79,
            column: 36
          }
        },
        loc: {
          start: {
            line: 79,
            column: 41
          },
          end: {
            line: 81,
            column: 5
          }
        },
        line: 79
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 84,
            column: 3
          }
        },
        loc: {
          start: {
            line: 84,
            column: 42
          },
          end: {
            line: 89,
            column: 3
          }
        },
        line: 84
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 91,
            column: 2
          },
          end: {
            line: 91,
            column: 3
          }
        },
        loc: {
          start: {
            line: 91,
            column: 68
          },
          end: {
            line: 97,
            column: 3
          }
        },
        line: 91
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 93,
            column: 35
          },
          end: {
            line: 93,
            column: 36
          }
        },
        loc: {
          start: {
            line: 93,
            column: 41
          },
          end: {
            line: 96,
            column: 5
          }
        },
        line: 93
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 99,
            column: 2
          },
          end: {
            line: 99,
            column: 3
          }
        },
        loc: {
          start: {
            line: 101,
            column: 17
          },
          end: {
            line: 121,
            column: 3
          }
        },
        line: 101
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 105,
            column: 46
          },
          end: {
            line: 105,
            column: 47
          }
        },
        loc: {
          start: {
            line: 105,
            column: 55
          },
          end: {
            line: 105,
            column: 78
          }
        },
        line: 105
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 114,
            column: 29
          },
          end: {
            line: 114,
            column: 30
          }
        },
        loc: {
          start: {
            line: 114,
            column: 35
          },
          end: {
            line: 118,
            column: 7
          }
        },
        line: 114
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 123,
            column: 2
          },
          end: {
            line: 123,
            column: 3
          }
        },
        loc: {
          start: {
            line: 125,
            column: 17
          },
          end: {
            line: 136,
            column: 3
          }
        },
        line: 125
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 138,
            column: 2
          },
          end: {
            line: 138,
            column: 3
          }
        },
        loc: {
          start: {
            line: 140,
            column: 17
          },
          end: {
            line: 145,
            column: 3
          }
        },
        line: 140
      },
      '18': {
        name: '(anonymous_18)',
        decl: {
          start: {
            line: 142,
            column: 35
          },
          end: {
            line: 142,
            column: 36
          }
        },
        loc: {
          start: {
            line: 142,
            column: 41
          },
          end: {
            line: 144,
            column: 5
          }
        },
        line: 142
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 85,
            column: 4
          },
          end: {
            line: 87,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 85,
            column: 4
          },
          end: {
            line: 87,
            column: 5
          }
        }, {
          start: {
            line: 85,
            column: 4
          },
          end: {
            line: 87,
            column: 5
          }
        }],
        line: 85
      },
      '1': {
        loc: {
          start: {
            line: 102,
            column: 22
          },
          end: {
            line: 102,
            column: 75
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 102,
            column: 50
          },
          end: {
            line: 102,
            column: 60
          }
        }, {
          start: {
            line: 102,
            column: 63
          },
          end: {
            line: 102,
            column: 75
          }
        }],
        line: 102
      },
      '2': {
        loc: {
          start: {
            line: 106,
            column: 6
          },
          end: {
            line: 108,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 106,
            column: 6
          },
          end: {
            line: 108,
            column: 7
          }
        }, {
          start: {
            line: 106,
            column: 6
          },
          end: {
            line: 108,
            column: 7
          }
        }],
        line: 106
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _createPackage;

function _load_createPackage() {
  return _createPackage = _interopRequireDefault(require('nuclide-commons-atom/createPackage'));
}

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _event;

function _load_event() {
  return _event = require('nuclide-commons/event');
}

var _MessageRangeTracker;

function _load_MessageRangeTracker() {
  return _MessageRangeTracker = _interopRequireDefault(require('./MessageRangeTracker'));
}

var _DiagnosticUpdater;

function _load_DiagnosticUpdater() {
  return _DiagnosticUpdater = _interopRequireDefault(require('./services/DiagnosticUpdater'));
}

var _IndieLinterRegistry;

function _load_IndieLinterRegistry() {
  return _IndieLinterRegistry = _interopRequireDefault(require('./services/IndieLinterRegistry'));
}

var _LinterAdapterFactory;

function _load_LinterAdapterFactory() {
  return _LinterAdapterFactory = require('./services/LinterAdapterFactory');
}

var _Actions;

function _load_Actions() {
  return _Actions = _interopRequireWildcard(require('./redux/Actions'));
}

var _createStore;

function _load_createStore() {
  return _createStore = _interopRequireDefault(require('./redux/createStore'));
}

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class Activation {

  constructor() {
    cov_r8ly3lo29.f[0]++;
    cov_r8ly3lo29.s[0]++;

    this._allLinterAdapters = new Set();

    const messageRangeTracker = (cov_r8ly3lo29.s[1]++, new (_MessageRangeTracker || _load_MessageRangeTracker()).default());
    cov_r8ly3lo29.s[2]++;
    this._store = (0, (_createStore || _load_createStore()).default)(messageRangeTracker);

    cov_r8ly3lo29.s[3]++;
    this._disposables = new (_UniversalDisposable || _load_UniversalDisposable()).default(messageRangeTracker, () => {
      cov_r8ly3lo29.f[1]++;
      cov_r8ly3lo29.s[4]++;

      this._allLinterAdapters.forEach(adapter => {
        cov_r8ly3lo29.f[2]++;
        cov_r8ly3lo29.s[5]++;
        return adapter.dispose();
      });
      cov_r8ly3lo29.s[6]++;
      this._allLinterAdapters.clear();
    });
  }

  dispose() {
    cov_r8ly3lo29.f[3]++;
    cov_r8ly3lo29.s[7]++;

    this._disposables.dispose();
  }

  /**
   * @return A wrapper around the methods on DiagnosticStore that allow reading data.
   */
  provideDiagnosticUpdates() {
    cov_r8ly3lo29.f[4]++;
    cov_r8ly3lo29.s[8]++;

    return new (_DiagnosticUpdater || _load_DiagnosticUpdater()).default(this._store);
  }

  provideIndie() {
    cov_r8ly3lo29.f[5]++;

    const registry = (cov_r8ly3lo29.s[9]++, new (_IndieLinterRegistry || _load_IndieLinterRegistry()).default());
    cov_r8ly3lo29.s[10]++;
    this._disposables.add(registry);
    cov_r8ly3lo29.s[11]++;
    return config => {
      cov_r8ly3lo29.f[6]++;

      const delegate = (cov_r8ly3lo29.s[12]++, registry.register(config));
      const disposable = (cov_r8ly3lo29.s[13]++, this.consumeDiagnosticsProviderV2(delegate));
      cov_r8ly3lo29.s[14]++;
      delegate.onDidDestroy(() => {
        cov_r8ly3lo29.f[7]++;
        cov_r8ly3lo29.s[15]++;

        disposable.dispose();
      });
      cov_r8ly3lo29.s[16]++;
      return delegate;
    };
  }

  consumeBusySignal(service) {
    cov_r8ly3lo29.f[8]++;
    cov_r8ly3lo29.s[17]++;

    this._busySignalService = service;
    cov_r8ly3lo29.s[18]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default(() => {
      cov_r8ly3lo29.f[9]++;
      cov_r8ly3lo29.s[19]++;

      this._busySignalService = null;
    });
  }

  _reportBusy(title) {
    cov_r8ly3lo29.f[10]++;
    cov_r8ly3lo29.s[20]++;

    if (this._busySignalService != null) {
      cov_r8ly3lo29.b[0][0]++;
      cov_r8ly3lo29.s[21]++;

      return this._busySignalService.reportBusy(title);
    } else {
      cov_r8ly3lo29.b[0][1]++;
    }
    cov_r8ly3lo29.s[22]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default();
  }

  consumeCodeActionFetcher(fetcher) {
    cov_r8ly3lo29.f[11]++;
    cov_r8ly3lo29.s[23]++;

    this._store.dispatch((_Actions || _load_Actions()).setCodeActionFetcher(fetcher));
    cov_r8ly3lo29.s[24]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default(() => {
      cov_r8ly3lo29.f[12]++;
      cov_r8ly3lo29.s[25]++;

      if (!(this._store.getState().codeActionFetcher === fetcher)) {
        throw new Error('Invariant violation: "this._store.getState().codeActionFetcher === fetcher"');
      }

      cov_r8ly3lo29.s[26]++;

      this._store.dispatch((_Actions || _load_Actions()).setCodeActionFetcher(null));
    });
  }

  consumeLinterProvider(providers_) {
    cov_r8ly3lo29.f[13]++;

    const providers = (cov_r8ly3lo29.s[27]++, Array.isArray(providers_) ? (cov_r8ly3lo29.b[1][0]++, providers_) : (cov_r8ly3lo29.b[1][1]++, [providers_]));
    const adapterDisposables = (cov_r8ly3lo29.s[28]++, new (_UniversalDisposable || _load_UniversalDisposable()).default());
    cov_r8ly3lo29.s[29]++;
    for (const provider of providers) {
      const adapter = (cov_r8ly3lo29.s[30]++, (0, (_LinterAdapterFactory || _load_LinterAdapterFactory()).createAdapter)(provider, title => {
        cov_r8ly3lo29.f[14]++;
        cov_r8ly3lo29.s[31]++;
        return this._reportBusy(title);
      }));
      cov_r8ly3lo29.s[32]++;
      if (adapter == null) {
        cov_r8ly3lo29.b[2][0]++;
        cov_r8ly3lo29.s[33]++;

        continue;
      } else {
        cov_r8ly3lo29.b[2][1]++;
      }
      cov_r8ly3lo29.s[34]++;
      this._allLinterAdapters.add(adapter);
      const diagnosticDisposable = (cov_r8ly3lo29.s[35]++, this.consumeDiagnosticsProviderV2({
        updates: adapter.getUpdates(),
        invalidations: adapter.getInvalidations()
      }));
      cov_r8ly3lo29.s[36]++;
      adapterDisposables.add(() => {
        cov_r8ly3lo29.f[15]++;
        cov_r8ly3lo29.s[37]++;

        diagnosticDisposable.dispose();
        cov_r8ly3lo29.s[38]++;
        adapter.dispose();
        cov_r8ly3lo29.s[39]++;
        this._allLinterAdapters.delete(adapter);
      });
    }
    cov_r8ly3lo29.s[40]++;
    return adapterDisposables;
  }

  consumeDiagnosticsProviderV1(provider) {
    cov_r8ly3lo29.f[16]++;

    // Register the diagnostic store for updates from the new provider.
    const observableProvider = (cov_r8ly3lo29.s[41]++, {
      updates: (0, (_event || _load_event()).observableFromSubscribeFunction)(provider.onMessageUpdate.bind(provider)),
      invalidations: (0, (_event || _load_event()).observableFromSubscribeFunction)(provider.onMessageInvalidation.bind(provider))
    });
    cov_r8ly3lo29.s[42]++;
    return this.consumeDiagnosticsProviderV2(observableProvider);
  }

  consumeDiagnosticsProviderV2(provider) {
    cov_r8ly3lo29.f[17]++;
    cov_r8ly3lo29.s[43]++;

    this._store.dispatch((_Actions || _load_Actions()).addProvider(provider));
    cov_r8ly3lo29.s[44]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default(() => {
      cov_r8ly3lo29.f[18]++;
      cov_r8ly3lo29.s[45]++;

      this._store.dispatch((_Actions || _load_Actions()).removeProvider(provider));
    });
  }
}

cov_r8ly3lo29.s[46]++;
(0, (_createPackage || _load_createPackage()).default)(module.exports, Activation);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQWN0aXZhdGlvbiIsImNvbnN0cnVjdG9yIiwiX2FsbExpbnRlckFkYXB0ZXJzIiwiU2V0IiwibWVzc2FnZVJhbmdlVHJhY2tlciIsIl9zdG9yZSIsIl9kaXNwb3NhYmxlcyIsImZvckVhY2giLCJhZGFwdGVyIiwiZGlzcG9zZSIsImNsZWFyIiwicHJvdmlkZURpYWdub3N0aWNVcGRhdGVzIiwicHJvdmlkZUluZGllIiwicmVnaXN0cnkiLCJhZGQiLCJjb25maWciLCJkZWxlZ2F0ZSIsInJlZ2lzdGVyIiwiZGlzcG9zYWJsZSIsImNvbnN1bWVEaWFnbm9zdGljc1Byb3ZpZGVyVjIiLCJvbkRpZERlc3Ryb3kiLCJjb25zdW1lQnVzeVNpZ25hbCIsInNlcnZpY2UiLCJfYnVzeVNpZ25hbFNlcnZpY2UiLCJfcmVwb3J0QnVzeSIsInRpdGxlIiwicmVwb3J0QnVzeSIsImNvbnN1bWVDb2RlQWN0aW9uRmV0Y2hlciIsImZldGNoZXIiLCJkaXNwYXRjaCIsInNldENvZGVBY3Rpb25GZXRjaGVyIiwiZ2V0U3RhdGUiLCJjb2RlQWN0aW9uRmV0Y2hlciIsImNvbnN1bWVMaW50ZXJQcm92aWRlciIsInByb3ZpZGVyc18iLCJwcm92aWRlcnMiLCJBcnJheSIsImlzQXJyYXkiLCJhZGFwdGVyRGlzcG9zYWJsZXMiLCJwcm92aWRlciIsImRpYWdub3N0aWNEaXNwb3NhYmxlIiwidXBkYXRlcyIsImdldFVwZGF0ZXMiLCJpbnZhbGlkYXRpb25zIiwiZ2V0SW52YWxpZGF0aW9ucyIsImRlbGV0ZSIsImNvbnN1bWVEaWFnbm9zdGljc1Byb3ZpZGVyVjEiLCJvYnNlcnZhYmxlUHJvdmlkZXIiLCJvbk1lc3NhZ2VVcGRhdGUiLCJiaW5kIiwib25NZXNzYWdlSW52YWxpZGF0aW9uIiwiYWRkUHJvdmlkZXIiLCJyZW1vdmVQcm92aWRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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VCxDQUF5QkMsSUFBekIsQ0FBOEJWLFFBQTlCLENBRE8sQ0FEZ0I7QUFJekJJLHFCQUFlLCtEQUNiSixTQUFTVyxxQkFBVCxDQUErQkQsSUFBL0IsQ0FBb0NWLFFBQXBDLENBRGE7QUFKVSxLQUFyQixDQUFOO0FBRmE7QUFVYixXQUFPLEtBQUtwQiw0QkFBTCxDQUFrQzRCLGtCQUFsQyxDQUFQO0FBQ0Q7O0FBRUQ1QiwrQkFDRW9CLFFBREYsRUFFZTtBQUFBO0FBQUE7O0FBQ2IsU0FBS2xDLE1BQUwsQ0FBWXdCLFFBQVosQ0FBcUIsOEJBQVFzQixXQUFSLENBQW9CWixRQUFwQixDQUFyQjtBQURhO0FBRWIsV0FBTyxrRUFBd0IsTUFBTTtBQUFBO0FBQUE7O0FBQ25DLFdBQUtsQyxNQUFMLENBQVl3QixRQUFaLENBQXFCLDhCQUFRdUIsY0FBUixDQUF1QmIsUUFBdkIsQ0FBckI7QUFDRCxLQUZNLENBQVA7QUFHRDtBQTlHYzs7O0FBaUhqQix1REFBY2MsT0FBT0MsT0FBckIsRUFBOEJ0RCxVQUE5QiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1xuICBDYWxsYmFja0RpYWdub3N0aWNQcm92aWRlcixcbiAgTGludGVyUHJvdmlkZXIsXG4gIE9ic2VydmFibGVEaWFnbm9zdGljUHJvdmlkZXIsXG4gIFJlZ2lzdGVySW5kaWVMaW50ZXIsXG4gIFN0b3JlLFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHtMaW50ZXJBZGFwdGVyfSBmcm9tICcuL3NlcnZpY2VzL0xpbnRlckFkYXB0ZXInO1xuaW1wb3J0IHR5cGUge0J1c3lTaWduYWxTZXJ2aWNlfSBmcm9tICcuLi8uLi9hdG9tLWlkZS1idXN5LXNpZ25hbC9saWIvdHlwZXMnO1xuaW1wb3J0IHR5cGUge0NvZGVBY3Rpb25GZXRjaGVyfSBmcm9tICcuLi8uLi9hdG9tLWlkZS1jb2RlLWFjdGlvbnMvbGliL3R5cGVzJztcblxuaW1wb3J0IGludmFyaWFudCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IGNyZWF0ZVBhY2thZ2UgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vY3JlYXRlUGFja2FnZSc7XG5pbXBvcnQgVW5pdmVyc2FsRGlzcG9zYWJsZSBmcm9tICdudWNsaWRlLWNvbW1vbnMvVW5pdmVyc2FsRGlzcG9zYWJsZSc7XG5pbXBvcnQge29ic2VydmFibGVGcm9tU3Vic2NyaWJlRnVuY3Rpb259IGZyb20gJ251Y2xpZGUtY29tbW9ucy9ldmVudCc7XG5pbXBvcnQgTWVzc2FnZVJhbmdlVHJhY2tlciBmcm9tICcuL01lc3NhZ2VSYW5nZVRyYWNrZXInO1xuaW1wb3J0IERpYWdub3N0aWNVcGRhdGVyIGZyb20gJy4vc2VydmljZXMvRGlhZ25vc3RpY1VwZGF0ZXInO1xuaW1wb3J0IEluZGllTGludGVyUmVnaXN0cnkgZnJvbSAnLi9zZXJ2aWNlcy9JbmRpZUxpbnRlclJlZ2lzdHJ5JztcbmltcG9ydCB7Y3JlYXRlQWRhcHRlcn0gZnJvbSAnLi9zZXJ2aWNlcy9MaW50ZXJBZGFwdGVyRmFjdG9yeSc7XG5pbXBvcnQgKiBhcyBBY3Rpb25zIGZyb20gJy4vcmVkdXgvQWN0aW9ucyc7XG5pbXBvcnQgY3JlYXRlU3RvcmUgZnJvbSAnLi9yZWR1eC9jcmVhdGVTdG9yZSc7XG5cbmNsYXNzIEFjdGl2YXRpb24ge1xuICBfZGlzcG9zYWJsZXM6IFVuaXZlcnNhbERpc3Bvc2FibGU7XG4gIF9hbGxMaW50ZXJBZGFwdGVyczogU2V0PExpbnRlckFkYXB0ZXI+O1xuICBfc3RvcmU6IFN0b3JlO1xuICBfYnVzeVNpZ25hbFNlcnZpY2U6ID9CdXN5U2lnbmFsU2VydmljZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9hbGxMaW50ZXJBZGFwdGVycyA9IG5ldyBTZXQoKTtcblxuICAgIGNvbnN0IG1lc3NhZ2VSYW5nZVRyYWNrZXIgPSBuZXcgTWVzc2FnZVJhbmdlVHJhY2tlcigpO1xuICAgIHRoaXMuX3N0b3JlID0gY3JlYXRlU3RvcmUobWVzc2FnZVJhbmdlVHJhY2tlcik7XG5cbiAgICB0aGlzLl9kaXNwb3NhYmxlcyA9IG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKG1lc3NhZ2VSYW5nZVRyYWNrZXIsICgpID0+IHtcbiAgICAgIHRoaXMuX2FsbExpbnRlckFkYXB0ZXJzLmZvckVhY2goYWRhcHRlciA9PiBhZGFwdGVyLmRpc3Bvc2UoKSk7XG4gICAgICB0aGlzLl9hbGxMaW50ZXJBZGFwdGVycy5jbGVhcigpO1xuICAgIH0pO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiBBIHdyYXBwZXIgYXJvdW5kIHRoZSBtZXRob2RzIG9uIERpYWdub3N0aWNTdG9yZSB0aGF0IGFsbG93IHJlYWRpbmcgZGF0YS5cbiAgICovXG4gIHByb3ZpZGVEaWFnbm9zdGljVXBkYXRlcygpOiBEaWFnbm9zdGljVXBkYXRlciB7XG4gICAgcmV0dXJuIG5ldyBEaWFnbm9zdGljVXBkYXRlcih0aGlzLl9zdG9yZSk7XG4gIH1cblxuICBwcm92aWRlSW5kaWUoKTogUmVnaXN0ZXJJbmRpZUxpbnRlciB7XG4gICAgY29uc3QgcmVnaXN0cnkgPSBuZXcgSW5kaWVMaW50ZXJSZWdpc3RyeSgpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmFkZChyZWdpc3RyeSk7XG4gICAgcmV0dXJuIGNvbmZpZyA9PiB7XG4gICAgICBjb25zdCBkZWxlZ2F0ZSA9IHJlZ2lzdHJ5LnJlZ2lzdGVyKGNvbmZpZyk7XG4gICAgICBjb25zdCBkaXNwb3NhYmxlID0gdGhpcy5jb25zdW1lRGlhZ25vc3RpY3NQcm92aWRlclYyKGRlbGVnYXRlKTtcbiAgICAgIGRlbGVnYXRlLm9uRGlkRGVzdHJveSgoKSA9PiB7XG4gICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGVsZWdhdGU7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN1bWVCdXN5U2lnbmFsKHNlcnZpY2U6IEJ1c3lTaWduYWxTZXJ2aWNlKTogSURpc3Bvc2FibGUge1xuICAgIHRoaXMuX2J1c3lTaWduYWxTZXJ2aWNlID0gc2VydmljZTtcbiAgICByZXR1cm4gbmV3IFVuaXZlcnNhbERpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgdGhpcy5fYnVzeVNpZ25hbFNlcnZpY2UgPSBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgX3JlcG9ydEJ1c3kodGl0bGU6IHN0cmluZyk6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAodGhpcy5fYnVzeVNpZ25hbFNlcnZpY2UgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2J1c3lTaWduYWxTZXJ2aWNlLnJlcG9ydEJ1c3kodGl0bGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFVuaXZlcnNhbERpc3Bvc2FibGUoKTtcbiAgfVxuXG4gIGNvbnN1bWVDb2RlQWN0aW9uRmV0Y2hlcihmZXRjaGVyOiBDb2RlQWN0aW9uRmV0Y2hlcik6IElEaXNwb3NhYmxlIHtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChBY3Rpb25zLnNldENvZGVBY3Rpb25GZXRjaGVyKGZldGNoZXIpKTtcbiAgICByZXR1cm4gbmV3IFVuaXZlcnNhbERpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgaW52YXJpYW50KHRoaXMuX3N0b3JlLmdldFN0YXRlKCkuY29kZUFjdGlvbkZldGNoZXIgPT09IGZldGNoZXIpO1xuICAgICAgdGhpcy5fc3RvcmUuZGlzcGF0Y2goQWN0aW9ucy5zZXRDb2RlQWN0aW9uRmV0Y2hlcihudWxsKSk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdW1lTGludGVyUHJvdmlkZXIoXG4gICAgcHJvdmlkZXJzXzogTGludGVyUHJvdmlkZXIgfCBBcnJheTxMaW50ZXJQcm92aWRlcj4sXG4gICk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBwcm92aWRlcnMgPSBBcnJheS5pc0FycmF5KHByb3ZpZGVyc18pID8gcHJvdmlkZXJzXyA6IFtwcm92aWRlcnNfXTtcbiAgICBjb25zdCBhZGFwdGVyRGlzcG9zYWJsZXMgPSBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZSgpO1xuICAgIGZvciAoY29uc3QgcHJvdmlkZXIgb2YgcHJvdmlkZXJzKSB7XG4gICAgICBjb25zdCBhZGFwdGVyID0gY3JlYXRlQWRhcHRlcihwcm92aWRlciwgdGl0bGUgPT4gdGhpcy5fcmVwb3J0QnVzeSh0aXRsZSkpO1xuICAgICAgaWYgKGFkYXB0ZXIgPT0gbnVsbCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2FsbExpbnRlckFkYXB0ZXJzLmFkZChhZGFwdGVyKTtcbiAgICAgIGNvbnN0IGRpYWdub3N0aWNEaXNwb3NhYmxlID0gdGhpcy5jb25zdW1lRGlhZ25vc3RpY3NQcm92aWRlclYyKHtcbiAgICAgICAgdXBkYXRlczogYWRhcHRlci5nZXRVcGRhdGVzKCksXG4gICAgICAgIGludmFsaWRhdGlvbnM6IGFkYXB0ZXIuZ2V0SW52YWxpZGF0aW9ucygpLFxuICAgICAgfSk7XG4gICAgICBhZGFwdGVyRGlzcG9zYWJsZXMuYWRkKCgpID0+IHtcbiAgICAgICAgZGlhZ25vc3RpY0Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICBhZGFwdGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fYWxsTGludGVyQWRhcHRlcnMuZGVsZXRlKGFkYXB0ZXIpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhZGFwdGVyRGlzcG9zYWJsZXM7XG4gIH1cblxuICBjb25zdW1lRGlhZ25vc3RpY3NQcm92aWRlclYxKFxuICAgIHByb3ZpZGVyOiBDYWxsYmFja0RpYWdub3N0aWNQcm92aWRlcixcbiAgKTogSURpc3Bvc2FibGUge1xuICAgIC8vIFJlZ2lzdGVyIHRoZSBkaWFnbm9zdGljIHN0b3JlIGZvciB1cGRhdGVzIGZyb20gdGhlIG5ldyBwcm92aWRlci5cbiAgICBjb25zdCBvYnNlcnZhYmxlUHJvdmlkZXIgPSB7XG4gICAgICB1cGRhdGVzOiBvYnNlcnZhYmxlRnJvbVN1YnNjcmliZUZ1bmN0aW9uKFxuICAgICAgICBwcm92aWRlci5vbk1lc3NhZ2VVcGRhdGUuYmluZChwcm92aWRlciksXG4gICAgICApLFxuICAgICAgaW52YWxpZGF0aW9uczogb2JzZXJ2YWJsZUZyb21TdWJzY3JpYmVGdW5jdGlvbihcbiAgICAgICAgcHJvdmlkZXIub25NZXNzYWdlSW52YWxpZGF0aW9uLmJpbmQocHJvdmlkZXIpLFxuICAgICAgKSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNvbnN1bWVEaWFnbm9zdGljc1Byb3ZpZGVyVjIob2JzZXJ2YWJsZVByb3ZpZGVyKTtcbiAgfVxuXG4gIGNvbnN1bWVEaWFnbm9zdGljc1Byb3ZpZGVyVjIoXG4gICAgcHJvdmlkZXI6IE9ic2VydmFibGVEaWFnbm9zdGljUHJvdmlkZXIsXG4gICk6IElEaXNwb3NhYmxlIHtcbiAgICB0aGlzLl9zdG9yZS5kaXNwYXRjaChBY3Rpb25zLmFkZFByb3ZpZGVyKHByb3ZpZGVyKSk7XG4gICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgIHRoaXMuX3N0b3JlLmRpc3BhdGNoKEFjdGlvbnMucmVtb3ZlUHJvdmlkZXIocHJvdmlkZXIpKTtcbiAgICB9KTtcbiAgfVxufVxuXG5jcmVhdGVQYWNrYWdlKG1vZHVsZS5leHBvcnRzLCBBY3RpdmF0aW9uKTtcbiJdfQ==