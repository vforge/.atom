'use strict';

var cov_t0khi2efn = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-outline-view/lib/main.js',
      hash = '3c3308933e3332c2baa96e2e766f69cb334e9f91',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-outline-view/lib/main.js',
    statementMap: {
      '0': {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 36,
          column: 6
        }
      },
      '1': {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 45,
          column: 6
        }
      },
      '2': {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 51
        }
      },
      '3': {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 41,
          column: 43
        }
      },
      '4': {
        start: {
          line: 49,
          column: 4
        },
        end: {
          line: 49,
          column: 32
        }
      },
      '5': {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 53,
          column: 57
        }
      },
      '6': {
        start: {
          line: 57,
          column: 4
        },
        end: {
          line: 57,
          column: 41
        }
      },
      '7': {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 74
        }
      },
      '8': {
        start: {
          line: 62,
          column: 30
        },
        end: {
          line: 68,
          column: 5
        }
      },
      '9': {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 66,
          column: 50
        }
      },
      '10': {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 79,
          column: 6
        }
      },
      '11': {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 73,
          column: 9
        }
      },
      '12': {
        start: {
          line: 72,
          column: 10
        },
        end: {
          line: 72,
          column: 53
        }
      },
      '13': {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 76,
          column: 72
        }
      },
      '14': {
        start: {
          line: 76,
          column: 33
        },
        end: {
          line: 76,
          column: 70
        }
      },
      '15': {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 47
        }
      },
      '16': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 89,
          column: 6
        }
      },
      '17': {
        start: {
          line: 88,
          column: 30
        },
        end: {
          line: 88,
          column: 68
        }
      },
      '18': {
        start: {
          line: 93,
          column: 0
        },
        end: {
          line: 93,
          column: 42
        }
      },
      '19': {
        start: {
          line: 98,
          column: 2
        },
        end: {
          line: 112,
          column: 4
        }
      },
      '20': {
        start: {
          line: 101,
          column: 8
        },
        end: {
          line: 108,
          column: 9
        }
      },
      '21': {
        start: {
          line: 104,
          column: 10
        },
        end: {
          line: 104,
          column: 63
        }
      },
      '22': {
        start: {
          line: 105,
          column: 15
        },
        end: {
          line: 108,
          column: 9
        }
      },
      '23': {
        start: {
          line: 107,
          column: 10
        },
        end: {
          line: 107,
          column: 36
        }
      },
      '24': {
        start: {
          line: 109,
          column: 8
        },
        end: {
          line: 109,
          column: 35
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 33,
            column: 2
          },
          end: {
            line: 33,
            column: 3
          }
        },
        loc: {
          start: {
            line: 33,
            column: 16
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 33
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 39,
            column: 6
          },
          end: {
            line: 39,
            column: 7
          }
        },
        loc: {
          start: {
            line: 39,
            column: 28
          },
          end: {
            line: 42,
            column: 7
          }
        },
        line: 39
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 48,
            column: 2
          },
          end: {
            line: 48,
            column: 3
          }
        },
        loc: {
          start: {
            line: 48,
            column: 12
          },
          end: {
            line: 50,
            column: 3
          }
        },
        line: 48
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 52,
            column: 2
          },
          end: {
            line: 52,
            column: 3
          }
        },
        loc: {
          start: {
            line: 52,
            column: 65
          },
          end: {
            line: 54,
            column: 3
          }
        },
        line: 52
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 56,
            column: 3
          }
        },
        loc: {
          start: {
            line: 56,
            column: 56
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 56
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 61,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        loc: {
          start: {
            line: 61,
            column: 42
          },
          end: {
            line: 80,
            column: 3
          }
        },
        line: 61
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 65,
            column: 6
          },
          end: {
            line: 65,
            column: 7
          }
        },
        loc: {
          start: {
            line: 65,
            column: 12
          },
          end: {
            line: 67,
            column: 7
          }
        },
        line: 65
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 70,
            column: 31
          },
          end: {
            line: 70,
            column: 32
          }
        },
        loc: {
          start: {
            line: 70,
            column: 38
          },
          end: {
            line: 74,
            column: 7
          }
        },
        line: 70
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 75,
            column: 6
          },
          end: {
            line: 75,
            column: 7
          }
        },
        loc: {
          start: {
            line: 75,
            column: 12
          },
          end: {
            line: 77,
            column: 7
          }
        },
        line: 75
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 76,
            column: 25
          },
          end: {
            line: 76,
            column: 26
          }
        },
        loc: {
          start: {
            line: 76,
            column: 33
          },
          end: {
            line: 76,
            column: 70
          }
        },
        line: 76
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        loc: {
          start: {
            line: 82,
            column: 60
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 82
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 86,
            column: 2
          },
          end: {
            line: 86,
            column: 3
          }
        },
        loc: {
          start: {
            line: 86,
            column: 55
          },
          end: {
            line: 90,
            column: 3
          }
        },
        line: 86
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 88,
            column: 24
          },
          end: {
            line: 88,
            column: 25
          }
        },
        loc: {
          start: {
            line: 88,
            column: 30
          },
          end: {
            line: 88,
            column: 68
          }
        },
        line: 88
      },
      '13': {
        name: 'getActiveEditorRegistryEventSources',
        decl: {
          start: {
            line: 97,
            column: 9
          },
          end: {
            line: 97,
            column: 44
          }
        },
        loc: {
          start: {
            line: 97,
            column: 47
          },
          end: {
            line: 113,
            column: 1
          }
        },
        line: 97
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 100,
            column: 17
          },
          end: {
            line: 100,
            column: 18
          }
        },
        loc: {
          start: {
            line: 100,
            column: 25
          },
          end: {
            line: 110,
            column: 7
          }
        },
        line: 100
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        }, {
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 73,
            column: 9
          }
        }],
        line: 71
      },
      '1': {
        loc: {
          start: {
            line: 101,
            column: 8
          },
          end: {
            line: 108,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 101,
            column: 8
          },
          end: {
            line: 108,
            column: 9
          }
        }, {
          start: {
            line: 101,
            column: 8
          },
          end: {
            line: 108,
            column: 9
          }
        }],
        line: 101
      },
      '2': {
        loc: {
          start: {
            line: 105,
            column: 15
          },
          end: {
            line: 108,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 105,
            column: 15
          },
          end: {
            line: 108,
            column: 9
          }
        }, {
          start: {
            line: 105,
            column: 15
          },
          end: {
            line: 108,
            column: 9
          }
        }],
        line: 105
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _ActiveEditorRegistry;

function _load_ActiveEditorRegistry() {
  return _ActiveEditorRegistry = _interopRequireDefault(require('nuclide-commons-atom/ActiveEditorRegistry'));
}

var _debounced;

function _load_debounced() {
  return _debounced = require('nuclide-commons-atom/debounced');
}

var _textEditor;

function _load_textEditor() {
  return _textEditor = require('nuclide-commons-atom/text-editor');
}

var _createPackage;

function _load_createPackage() {
  return _createPackage = _interopRequireDefault(require('nuclide-commons-atom/createPackage'));
}

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _analytics;

function _load_analytics() {
  return _analytics = _interopRequireDefault(require('nuclide-commons-atom/analytics'));
}

var _destroyItemWhere;

function _load_destroyItemWhere() {
  return _destroyItemWhere = require('nuclide-commons-atom/destroyItemWhere');
}

var _OutlineViewPanel;

function _load_OutlineViewPanel() {
  return _OutlineViewPanel = require('./OutlineViewPanel');
}

var _createOutlines;

function _load_createOutlines() {
  return _createOutlines = require('./createOutlines');
}

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class Activation {

  constructor() {
    cov_t0khi2efn.f[0]++;
    cov_t0khi2efn.s[0]++;

    this._disposables = new (_UniversalDisposable || _load_UniversalDisposable()).default(this.registerOpenerAndCommand());

    cov_t0khi2efn.s[1]++;
    this._editorService = new (_ActiveEditorRegistry || _load_ActiveEditorRegistry()).default((provider, editor) => {
      cov_t0khi2efn.f[1]++;
      cov_t0khi2efn.s[2]++;

      (_analytics || _load_analytics()).default.track('outline-view-getoutline');
      cov_t0khi2efn.s[3]++;
      return provider.getOutline(editor);
    }, {}, getActiveEditorRegistryEventSources());
  }

  dispose() {
    cov_t0khi2efn.f[2]++;
    cov_t0khi2efn.s[4]++;

    this._disposables.dispose();
  }

  consumeOutlineProvider(provider) {
    cov_t0khi2efn.f[3]++;
    cov_t0khi2efn.s[5]++;

    return this._editorService.consumeProvider(provider);
  }

  _createOutlineViewPanelState() {
    cov_t0khi2efn.f[4]++;
    cov_t0khi2efn.s[6]++;

    (_analytics || _load_analytics()).default.track('outline-view-show');
    cov_t0khi2efn.s[7]++;
    return new (_OutlineViewPanel || _load_OutlineViewPanel()).OutlineViewPanelState((0, (_createOutlines || _load_createOutlines()).createOutlines)(this._editorService));
  }

  registerOpenerAndCommand() {
    cov_t0khi2efn.f[5]++;

    const commandDisposable = (cov_t0khi2efn.s[8]++, atom.commands.add('atom-workspace', 'outline-view:toggle', () => {
      cov_t0khi2efn.f[6]++;
      cov_t0khi2efn.s[9]++;

      atom.workspace.toggle((_OutlineViewPanel || _load_OutlineViewPanel()).WORKSPACE_VIEW_URI);
    }));
    cov_t0khi2efn.s[10]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default(atom.workspace.addOpener(uri => {
      cov_t0khi2efn.f[7]++;
      cov_t0khi2efn.s[11]++;

      if (uri === (_OutlineViewPanel || _load_OutlineViewPanel()).WORKSPACE_VIEW_URI) {
        cov_t0khi2efn.b[0][0]++;
        cov_t0khi2efn.s[12]++;

        return this._createOutlineViewPanelState();
      } else {
        cov_t0khi2efn.b[0][1]++;
      }
    }), () => {
      cov_t0khi2efn.f[8]++;
      cov_t0khi2efn.s[13]++;

      (0, (_destroyItemWhere || _load_destroyItemWhere()).destroyItemWhere)(item => {
        cov_t0khi2efn.f[9]++;
        cov_t0khi2efn.s[14]++;
        return item instanceof (_OutlineViewPanel || _load_OutlineViewPanel()).OutlineViewPanelState;
      });
    }, commandDisposable);
  }

  deserializeOutlineViewPanelState() {
    cov_t0khi2efn.f[10]++;
    cov_t0khi2efn.s[15]++;

    return this._createOutlineViewPanelState();
  }

  getOutlineViewResultsStream() {
    cov_t0khi2efn.f[11]++;
    cov_t0khi2efn.s[16]++;

    return {
      getResultsStream: () => {
        cov_t0khi2efn.f[12]++;
        cov_t0khi2efn.s[17]++;
        return this._editorService.getResultsStream();
      }
    };
  }
}

cov_t0khi2efn.s[18]++;
(0, (_createPackage || _load_createPackage()).default)(module.exports, Activation);

// TODO this can be removed once we no longer want to support versions of Atom less than 1.17.0
// (D4973408)
function getActiveEditorRegistryEventSources() {
  cov_t0khi2efn.f[13]++;
  cov_t0khi2efn.s[19]++;

  return {
    activeEditors: (0, (_debounced || _load_debounced()).observeActivePaneItemDebounced)().switchMap(item => {
      cov_t0khi2efn.f[14]++;
      cov_t0khi2efn.s[20]++;

      if ((0, (_textEditor || _load_textEditor()).isValidTextEditor)(item)) {
        cov_t0khi2efn.b[1][0]++;
        cov_t0khi2efn.s[21]++;

        // Flow cannot understand the type refinement provided by the isValidTextEditor function,
        // so we have to cast.
        return _rxjsBundlesRxMinJs.Observable.of(item);
      } else {
          cov_t0khi2efn.b[1][1]++;
          cov_t0khi2efn.s[22]++;
          if (item instanceof (_OutlineViewPanel || _load_OutlineViewPanel()).OutlineViewPanelState) {
            cov_t0khi2efn.b[2][0]++;
            cov_t0khi2efn.s[23]++;

            // Ignore switching to the outline view.
            return _rxjsBundlesRxMinJs.Observable.empty();
          } else {
            cov_t0khi2efn.b[2][1]++;
          }
        }cov_t0khi2efn.s[24]++;
      return _rxjsBundlesRxMinJs.Observable.of(null);
    }).distinctUntilChanged()
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQWN0aXZhdGlvbiIsImNvbnN0cnVjdG9yIiwiX2Rpc3Bvc2FibGVzIiwicmVnaXN0ZXJPcGVuZXJBbmRDb21tYW5kIiwiX2VkaXRvclNlcnZpY2UiLCJwcm92aWRlciIsImVkaXRvciIsInRyYWNrIiwiZ2V0T3V0bGluZSIsImdldEFjdGl2ZUVkaXRvclJlZ2lzdHJ5RXZlbnRTb3VyY2VzIiwiZGlzcG9zZSIsImNvbnN1bWVPdXRsaW5lUHJvdmlkZXIiLCJjb25zdW1lUHJvdmlkZXIiLCJfY3JlYXRlT3V0bGluZVZpZXdQYW5lbFN0YXRlIiwiY29tbWFuZERpc3Bvc2FibGUiLCJhdG9tIiwiY29tbWFuZHMiLCJhZGQiLCJ3b3Jrc3BhY2UiLCJ0b2dnbGUiLCJhZGRPcGVuZXIiLCJ1cmkiLCJpdGVtIiwiZGVzZXJpYWxpemVPdXRsaW5lVmlld1BhbmVsU3RhdGUiLCJnZXRPdXRsaW5lVmlld1Jlc3VsdHNTdHJlYW0iLCJnZXRSZXN1bHRzU3RyZWFtIiwibW9kdWxlIiwiZXhwb3J0cyIsImFjdGl2ZUVkaXRvcnMiLCJzd2l0Y2hNYXAiLCJvZiIsImVtcHR5IiwiZGlzdGluY3RVbnRpbENoYW5nZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUdEO0FBOURjOzs7QUFpRWpCLHVEQUFjQyxPQUFPQyxPQUFyQixFQUE4QjNCLFVBQTlCOztBQUVBO0FBQ0E7QUFDQSxTQUFTUyxtQ0FBVCxHQUErQztBQUFBO0FBQUE7O0FBQzdDLFNBQU87QUFDTG1CLG1CQUFlLHdFQUNaQyxTQURZLENBQ0ZQLFFBQVE7QUFBQTtBQUFBOztBQUNqQixVQUFJLDJEQUFrQkEsSUFBbEIsQ0FBSixFQUE2QjtBQUFBO0FBQUE7O0FBQzNCO0FBQ0E7QUFDQSxlQUFPLCtCQUFXUSxFQUFYLENBQWdCUixJQUFoQixDQUFQO0FBQ0QsT0FKRCxNQUlPO0FBQUE7QUFBQTtBQUFBLGNBQUlBLHFGQUFKLEVBQTJDO0FBQUE7QUFBQTs7QUFDaEQ7QUFDQSxtQkFBTywrQkFBV1MsS0FBWCxFQUFQO0FBQ0QsV0FITTtBQUFBO0FBQUE7QUFHTixTQVJnQjtBQVNqQixhQUFPLCtCQUFXRCxFQUFYLENBQWMsSUFBZCxDQUFQO0FBQ0QsS0FYWSxFQVlaRSxvQkFaWTtBQURWLEdBQVA7QUFlRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IEFjdGl2ZUVkaXRvclJlZ2lzdHJ5IGZyb20gJ251Y2xpZGUtY29tbW9ucy1hdG9tL0FjdGl2ZUVkaXRvclJlZ2lzdHJ5JztcbmltcG9ydCB7b2JzZXJ2ZUFjdGl2ZVBhbmVJdGVtRGVib3VuY2VkfSBmcm9tICdudWNsaWRlLWNvbW1vbnMtYXRvbS9kZWJvdW5jZWQnO1xuaW1wb3J0IHtpc1ZhbGlkVGV4dEVkaXRvcn0gZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vdGV4dC1lZGl0b3InO1xuaW1wb3J0IGNyZWF0ZVBhY2thZ2UgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vY3JlYXRlUGFja2FnZSc7XG5pbXBvcnQgVW5pdmVyc2FsRGlzcG9zYWJsZSBmcm9tICdudWNsaWRlLWNvbW1vbnMvVW5pdmVyc2FsRGlzcG9zYWJsZSc7XG5pbXBvcnQgYW5hbHl0aWNzIGZyb20gJ251Y2xpZGUtY29tbW9ucy1hdG9tL2FuYWx5dGljcyc7XG5cbmltcG9ydCB7ZGVzdHJveUl0ZW1XaGVyZX0gZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vZGVzdHJveUl0ZW1XaGVyZSc7XG5cbmltcG9ydCB7T3V0bGluZVZpZXdQYW5lbFN0YXRlLCBXT1JLU1BBQ0VfVklFV19VUkl9IGZyb20gJy4vT3V0bGluZVZpZXdQYW5lbCc7XG5pbXBvcnQge2NyZWF0ZU91dGxpbmVzfSBmcm9tICcuL2NyZWF0ZU91dGxpbmVzJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB0eXBlIHtPdXRsaW5lLCBPdXRsaW5lUHJvdmlkZXIsIFJlc3VsdHNTdHJlYW1Qcm92aWRlcn0gZnJvbSAnLi90eXBlcyc7XG5cbmNsYXNzIEFjdGl2YXRpb24ge1xuICBfZGlzcG9zYWJsZXM6IFVuaXZlcnNhbERpc3Bvc2FibGU7XG5cbiAgX2VkaXRvclNlcnZpY2U6IEFjdGl2ZUVkaXRvclJlZ2lzdHJ5PE91dGxpbmVQcm92aWRlciwgP091dGxpbmU+O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gbmV3IFVuaXZlcnNhbERpc3Bvc2FibGUoXG4gICAgICB0aGlzLnJlZ2lzdGVyT3BlbmVyQW5kQ29tbWFuZCgpLFxuICAgICk7XG5cbiAgICB0aGlzLl9lZGl0b3JTZXJ2aWNlID0gbmV3IEFjdGl2ZUVkaXRvclJlZ2lzdHJ5KFxuICAgICAgKHByb3ZpZGVyLCBlZGl0b3IpID0+IHtcbiAgICAgICAgYW5hbHl0aWNzLnRyYWNrKCdvdXRsaW5lLXZpZXctZ2V0b3V0bGluZScpO1xuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0T3V0bGluZShlZGl0b3IpO1xuICAgICAgfSxcbiAgICAgIHt9LFxuICAgICAgZ2V0QWN0aXZlRWRpdG9yUmVnaXN0cnlFdmVudFNvdXJjZXMoKSxcbiAgICApO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5kaXNwb3NlKCk7XG4gIH1cblxuICBjb25zdW1lT3V0bGluZVByb3ZpZGVyKHByb3ZpZGVyOiBPdXRsaW5lUHJvdmlkZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2VkaXRvclNlcnZpY2UuY29uc3VtZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIF9jcmVhdGVPdXRsaW5lVmlld1BhbmVsU3RhdGUoKTogT3V0bGluZVZpZXdQYW5lbFN0YXRlIHtcbiAgICBhbmFseXRpY3MudHJhY2soJ291dGxpbmUtdmlldy1zaG93Jyk7XG4gICAgcmV0dXJuIG5ldyBPdXRsaW5lVmlld1BhbmVsU3RhdGUoY3JlYXRlT3V0bGluZXModGhpcy5fZWRpdG9yU2VydmljZSkpO1xuICB9XG5cbiAgcmVnaXN0ZXJPcGVuZXJBbmRDb21tYW5kKCk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBjb21tYW5kRGlzcG9zYWJsZSA9IGF0b20uY29tbWFuZHMuYWRkKFxuICAgICAgJ2F0b20td29ya3NwYWNlJyxcbiAgICAgICdvdXRsaW5lLXZpZXc6dG9nZ2xlJyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgYXRvbS53b3Jrc3BhY2UudG9nZ2xlKFdPUktTUEFDRV9WSUVXX1VSSSk7XG4gICAgICB9LFxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKFxuICAgICAgYXRvbS53b3Jrc3BhY2UuYWRkT3BlbmVyKHVyaSA9PiB7XG4gICAgICAgIGlmICh1cmkgPT09IFdPUktTUEFDRV9WSUVXX1VSSSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVPdXRsaW5lVmlld1BhbmVsU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGRlc3Ryb3lJdGVtV2hlcmUoaXRlbSA9PiBpdGVtIGluc3RhbmNlb2YgT3V0bGluZVZpZXdQYW5lbFN0YXRlKTtcbiAgICAgIH0sXG4gICAgICBjb21tYW5kRGlzcG9zYWJsZSxcbiAgICApO1xuICB9XG5cbiAgZGVzZXJpYWxpemVPdXRsaW5lVmlld1BhbmVsU3RhdGUoKTogT3V0bGluZVZpZXdQYW5lbFN0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlT3V0bGluZVZpZXdQYW5lbFN0YXRlKCk7XG4gIH1cblxuICBnZXRPdXRsaW5lVmlld1Jlc3VsdHNTdHJlYW0oKTogUmVzdWx0c1N0cmVhbVByb3ZpZGVyIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0UmVzdWx0c1N0cmVhbTogKCkgPT4gdGhpcy5fZWRpdG9yU2VydmljZS5nZXRSZXN1bHRzU3RyZWFtKCksXG4gICAgfTtcbiAgfVxufVxuXG5jcmVhdGVQYWNrYWdlKG1vZHVsZS5leHBvcnRzLCBBY3RpdmF0aW9uKTtcblxuLy8gVE9ETyB0aGlzIGNhbiBiZSByZW1vdmVkIG9uY2Ugd2Ugbm8gbG9uZ2VyIHdhbnQgdG8gc3VwcG9ydCB2ZXJzaW9ucyBvZiBBdG9tIGxlc3MgdGhhbiAxLjE3LjBcbi8vIChENDk3MzQwOClcbmZ1bmN0aW9uIGdldEFjdGl2ZUVkaXRvclJlZ2lzdHJ5RXZlbnRTb3VyY2VzKCkge1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZUVkaXRvcnM6IG9ic2VydmVBY3RpdmVQYW5lSXRlbURlYm91bmNlZCgpXG4gICAgICAuc3dpdGNoTWFwKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXNWYWxpZFRleHRFZGl0b3IoaXRlbSkpIHtcbiAgICAgICAgICAvLyBGbG93IGNhbm5vdCB1bmRlcnN0YW5kIHRoZSB0eXBlIHJlZmluZW1lbnQgcHJvdmlkZWQgYnkgdGhlIGlzVmFsaWRUZXh0RWRpdG9yIGZ1bmN0aW9uLFxuICAgICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FzdC5cbiAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5vZigoKGl0ZW06IGFueSk6IGF0b20kVGV4dEVkaXRvcikpO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBPdXRsaW5lVmlld1BhbmVsU3RhdGUpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgc3dpdGNoaW5nIHRvIHRoZSBvdXRsaW5lIHZpZXcuXG4gICAgICAgICAgcmV0dXJuIE9ic2VydmFibGUuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS5vZihudWxsKTtcbiAgICAgIH0pXG4gICAgICAuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgfTtcbn1cbiJdfQ==