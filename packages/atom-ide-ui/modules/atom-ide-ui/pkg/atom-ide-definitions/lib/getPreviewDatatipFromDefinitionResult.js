'use strict';

var cov_15ki7h4iqf = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-definitions/lib/getPreviewDatatipFromDefinitionResult.js',
      hash = '9a271f36ee3e35ae567059b4442a7b23fa2a911a',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-definitions/lib/getPreviewDatatipFromDefinitionResult.js',
    statementMap: {
      '0': {
        start: {
          line: 27,
          column: 2
        },
        end: {
          line: 65,
          column: 3
        }
      },
      '1': {
        start: {
          line: 28,
          column: 23
        },
        end: {
          line: 28,
          column: 37
        }
      },
      '2': {
        start: {
          line: 30,
          column: 4
        },
        end: {
          line: 32,
          column: 5
        }
      },
      '3': {
        start: {
          line: 31,
          column: 6
        },
        end: {
          line: 31,
          column: 18
        }
      },
      '4': {
        start: {
          line: 34,
          column: 30
        },
        end: {
          line: 37,
          column: 5
        }
      },
      '5': {
        start: {
          line: 39,
          column: 4
        },
        end: {
          line: 41,
          column: 5
        }
      },
      '6': {
        start: {
          line: 40,
          column: 6
        },
        end: {
          line: 40,
          column: 18
        }
      },
      '7': {
        start: {
          line: 45,
          column: 4
        },
        end: {
          line: 54,
          column: 5
        }
      },
      '8': {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 53,
          column: 8
        }
      },
      '9': {
        start: {
          line: 48,
          column: 10
        },
        end: {
          line: 50,
          column: 12
        }
      },
      '10': {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 64,
          column: 6
        }
      },
      '11': {
        start: {
          line: 67,
          column: 2
        },
        end: {
          line: 76,
          column: 4
        }
      },
      '12': {
        start: {
          line: 84,
          column: 2
        },
        end: {
          line: 90,
          column: 3
        }
      },
      '13': {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 85,
          column: 59
        }
      },
      '14': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 89,
          column: 6
        }
      },
      '15': {
        start: {
          line: 92,
          column: 2
        },
        end: {
          line: 94,
          column: 4
        }
      },
      '16': {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 93,
          column: 38
        }
      }
    },
    fnMap: {
      '0': {
        name: 'getPreviewDatatipFromDefinition',
        decl: {
          start: {
            line: 21,
            column: 31
          },
          end: {
            line: 21,
            column: 62
          }
        },
        loc: {
          start: {
            line: 26,
            column: 21
          },
          end: {
            line: 77,
            column: 1
          }
        },
        line: 26
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 47,
            column: 19
          },
          end: {
            line: 47,
            column: 20
          }
        },
        loc: {
          start: {
            line: 48,
            column: 10
          },
          end: {
            line: 50,
            column: 12
          }
        },
        line: 48
      },
      '2': {
        name: 'getPreview',
        decl: {
          start: {
            line: 79,
            column: 15
          },
          end: {
            line: 79,
            column: 25
          }
        },
        loc: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 95,
            column: 1
          }
        },
        line: 82
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 92,
            column: 73
          },
          end: {
            line: 92,
            column: 74
          }
        },
        loc: {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 93,
            column: 38
          }
        },
        line: 93
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        }, {
          start: {
            line: 27,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        }],
        line: 27
      },
      '1': {
        loc: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        }, {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 32,
            column: 5
          }
        }],
        line: 30
      },
      '2': {
        loc: {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        }, {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        }],
        line: 39
      },
      '3': {
        loc: {
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 54,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 54,
            column: 5
          }
        }, {
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 54,
            column: 5
          }
        }],
        line: 45
      },
      '4': {
        loc: {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        }, {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        }],
        line: 84
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _asyncToGenerator = _interopRequireDefault(require('async-to-generator'));

let getPreview = (() => {
  var _ref2 = (0, _asyncToGenerator.default)(function* (definition, definitionPreviewProvider) {
    cov_15ki7h4iqf.f[2]++;

    let getDefinitionPreviewFn;
    cov_15ki7h4iqf.s[12]++;
    if (definitionPreviewProvider == null) {
      cov_15ki7h4iqf.b[4][0]++;
      cov_15ki7h4iqf.s[13]++;

      getDefinitionPreviewFn = (_symbolDefinitionPreview || _load_symbolDefinitionPreview()).getDefinitionPreview;
    } else {
      cov_15ki7h4iqf.b[4][1]++;
      cov_15ki7h4iqf.s[14]++;

      getDefinitionPreviewFn = definitionPreviewProvider.getDefinitionPreview.bind(definitionPreviewProvider);
    }

    cov_15ki7h4iqf.s[15]++;
    return (_analytics || _load_analytics()).default.trackTiming('hyperclickPreview.getDefinitionPreview', function () {
      cov_15ki7h4iqf.f[3]++;
      cov_15ki7h4iqf.s[16]++;
      return getDefinitionPreviewFn(definition);
    });
  });

  return function getPreview(_x5, _x6) {
    return _ref2.apply(this, arguments);
  };
})();

var _analytics;

function _load_analytics() {
  return _analytics = _interopRequireDefault(require('nuclide-commons-atom/analytics'));
}

var _symbolDefinitionPreview;

function _load_symbolDefinitionPreview() {
  return _symbolDefinitionPreview = require('nuclide-commons/symbol-definition-preview');
}

var _react = _interopRequireDefault(require('react'));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (() => {
  var _ref = (0, _asyncToGenerator.default)(function* (range, definitions, definitionPreviewProvider, grammar) {
    cov_15ki7h4iqf.f[0]++;
    cov_15ki7h4iqf.s[0]++;

    if (definitions.length === 1) {
      cov_15ki7h4iqf.b[0][0]++;

      const definition = (cov_15ki7h4iqf.s[1]++, definitions[0]);
      // Some providers (e.g. Flow) return negative positions.
      cov_15ki7h4iqf.s[2]++;
      if (definition.position.row < 0) {
        cov_15ki7h4iqf.b[1][0]++;
        cov_15ki7h4iqf.s[3]++;

        return null;
      } else {
        cov_15ki7h4iqf.b[1][1]++;
      }

      const definitionPreview = (cov_15ki7h4iqf.s[4]++, yield getPreview(definition, definitionPreviewProvider));

      cov_15ki7h4iqf.s[5]++;
      if (definitionPreview == null) {
        cov_15ki7h4iqf.b[2][0]++;
        cov_15ki7h4iqf.s[6]++;

        return null;
      } else {
        cov_15ki7h4iqf.b[2][1]++;
      }

      // if mimetype is image return image component with base-64 encoded
      //  image contents, otherwise use markedStrings
      cov_15ki7h4iqf.s[7]++;
      if (definitionPreview.mime.startsWith('image/')) {
        cov_15ki7h4iqf.b[3][0]++;
        cov_15ki7h4iqf.s[8]++;

        return {
          component: function () {
            cov_15ki7h4iqf.f[1]++;
            cov_15ki7h4iqf.s[9]++;
            return _react.default.createElement('img', {
              src: `data:${definitionPreview.mime};${definitionPreview.encoding},${definitionPreview.contents}`
            });
          },
          range
        };
      } else {
        cov_15ki7h4iqf.b[3][1]++;
      }
      cov_15ki7h4iqf.s[10]++;
      return {
        markedStrings: [{
          type: 'snippet',
          value: definitionPreview.contents,
          grammar
        }],
        range
      };
    } else {
      cov_15ki7h4iqf.b[0][1]++;
    }

    cov_15ki7h4iqf.s[11]++;
    return {
      markedStrings: [{
        type: 'markdown',
        value: `${definitions.length} definitions found. Click to jump.`,
        grammar
      }],
      range
    };
  });

  function getPreviewDatatipFromDefinition(_x, _x2, _x3, _x4) {
    return _ref.apply(this, arguments);
  }

  return getPreviewDatatipFromDefinition;
})(); /**
       * Copyright (c) 2017-present, Facebook, Inc.
       * All rights reserved.
       *
       * This source code is licensed under the BSD-style license found in the
       * LICENSE file in the root directory of this source tree. An additional grant
       * of patent rights can be found in the PATENTS file in the same directory.
       *
       * 
       * @format
       */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFByZXZpZXdEYXRhdGlwRnJvbURlZmluaXRpb25SZXN1bHQuanMiXSwibmFtZXMiOlsiZGVmaW5pdGlvbiIsImRlZmluaXRpb25QcmV2aWV3UHJvdmlkZXIiLCJnZXREZWZpbml0aW9uUHJldmlld0ZuIiwiZ2V0RGVmaW5pdGlvblByZXZpZXciLCJiaW5kIiwidHJhY2tUaW1pbmciLCJnZXRQcmV2aWV3IiwicmFuZ2UiLCJkZWZpbml0aW9ucyIsImdyYW1tYXIiLCJsZW5ndGgiLCJwb3NpdGlvbiIsInJvdyIsImRlZmluaXRpb25QcmV2aWV3IiwibWltZSIsInN0YXJ0c1dpdGgiLCJjb21wb25lbnQiLCJlbmNvZGluZyIsImNvbnRlbnRzIiwibWFya2VkU3RyaW5ncyIsInR5cGUiLCJ2YWx1ZSIsImdldFByZXZpZXdEYXRhdGlwRnJvbURlZmluaXRpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZDQThFQSxXQUNFQSxVQURGLEVBRUVDLHlCQUZGLEVBR0U7QUFBQTs7QUFDQSxRQUFJQyxzQkFBSjtBQURBO0FBRUEsUUFBSUQsNkJBQTZCLElBQWpDLEVBQXVDO0FBQUE7QUFBQTs7QUFDckNDO0FBQ0QsS0FGRCxNQUVPO0FBQUE7QUFBQTs7QUFDTEEsK0JBQXlCRCwwQkFBMEJFLG9CQUExQixDQUErQ0MsSUFBL0MsQ0FDdkJILHlCQUR1QixDQUF6QjtBQUdEOztBQVJEO0FBVUEsV0FBTywwQ0FBVUksV0FBVixDQUFzQix3Q0FBdEIsRUFBZ0UsWUFDckU7QUFBQTtBQUFBO0FBQUEsb0NBQXVCTCxVQUF2QjtBQUFrQyxLQUQ3QixDQUFQO0FBR0QsRzs7a0JBaEJjTSxVOzs7Ozs7O0FBbEVmO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7QUFFQTs7Ozs7NENBS2dCLFdBQ2RDLEtBRGMsRUFFZEMsV0FGYyxFQUdkUCx5QkFIYyxFQUlkUSxPQUpjLEVBS0s7QUFBQTtBQUFBOztBQUNuQixRQUFJRCxZQUFZRSxNQUFaLEtBQXVCLENBQTNCLEVBQThCO0FBQUE7O0FBQzVCLFlBQU1WLHFDQUFhUSxZQUFZLENBQVosQ0FBYixDQUFOO0FBQ0E7QUFGNEI7QUFHNUIsVUFBSVIsV0FBV1csUUFBWCxDQUFvQkMsR0FBcEIsR0FBMEIsQ0FBOUIsRUFBaUM7QUFBQTtBQUFBOztBQUMvQixlQUFPLElBQVA7QUFDRCxPQUZEO0FBQUE7QUFBQTs7QUFJQSxZQUFNQyw0Q0FBb0IsTUFBTVAsV0FDOUJOLFVBRDhCLEVBRTlCQyx5QkFGOEIsQ0FBMUIsQ0FBTjs7QUFQNEI7QUFZNUIsVUFBSVkscUJBQXFCLElBQXpCLEVBQStCO0FBQUE7QUFBQTs7QUFDN0IsZUFBTyxJQUFQO0FBQ0QsT0FGRDtBQUFBO0FBQUE7O0FBSUE7QUFDQTtBQWpCNEI7QUFrQjVCLFVBQUlBLGtCQUFrQkMsSUFBbEIsQ0FBdUJDLFVBQXZCLENBQWtDLFFBQWxDLENBQUosRUFBaUQ7QUFBQTtBQUFBOztBQUMvQyxlQUFPO0FBQ0xDLHFCQUFXLFlBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFDRSxtQkFBTSxRQUFPSCxrQkFBa0JDLElBQUssSUFBR0Qsa0JBQWtCSSxRQUFTLElBQUdKLGtCQUFrQkssUUFBUztBQURsRztBQUVFLFdBSkM7QUFNTFg7QUFOSyxTQUFQO0FBUUQsT0FURDtBQUFBO0FBQUE7QUFsQjRCO0FBNEI1QixhQUFPO0FBQ0xZLHVCQUFlLENBQ2I7QUFDRUMsZ0JBQU0sU0FEUjtBQUVFQyxpQkFBT1Isa0JBQWtCSyxRQUYzQjtBQUdFVDtBQUhGLFNBRGEsQ0FEVjtBQVFMRjtBQVJLLE9BQVA7QUFVRCxLQXRDRDtBQUFBO0FBQUE7O0FBRG1CO0FBeUNuQixXQUFPO0FBQ0xZLHFCQUFlLENBQ2I7QUFDRUMsY0FBTSxVQURSO0FBRUVDLGVBQVEsR0FBRWIsWUFBWUUsTUFBTyxvQ0FGL0I7QUFHRUQ7QUFIRixPQURhLENBRFY7QUFRTEY7QUFSSyxLQUFQO0FBVUQsRzs7V0F4RDhCZSwrQjs7OztTQUFBQSwrQjtNQXBCL0IiLCJmaWxlIjoiZ2V0UHJldmlld0RhdGF0aXBGcm9tRGVmaW5pdGlvblJlc3VsdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCBhbmFseXRpY3MgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vYW5hbHl0aWNzJztcbmltcG9ydCB7Z2V0RGVmaW5pdGlvblByZXZpZXcgYXMgZ2V0TG9jYWxGaWxlRGVmaW5pdGlvblByZXZpZXd9IGZyb20gJ251Y2xpZGUtY29tbW9ucy9zeW1ib2wtZGVmaW5pdGlvbi1wcmV2aWV3JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0eXBlIHtEYXRhdGlwfSBmcm9tICcuLi8uLi9hdG9tLWlkZS1kYXRhdGlwL2xpYi90eXBlcyc7XG5cbmltcG9ydCB0eXBlIHtEZWZpbml0aW9uLCBEZWZpbml0aW9uUHJldmlld1Byb3ZpZGVyfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgKGFzeW5jIGZ1bmN0aW9uIGdldFByZXZpZXdEYXRhdGlwRnJvbURlZmluaXRpb24oXG4gIHJhbmdlOiBhdG9tJFJhbmdlLFxuICBkZWZpbml0aW9uczogQXJyYXk8RGVmaW5pdGlvbj4sXG4gIGRlZmluaXRpb25QcmV2aWV3UHJvdmlkZXI6ID9EZWZpbml0aW9uUHJldmlld1Byb3ZpZGVyLFxuICBncmFtbWFyOiBhdG9tJEdyYW1tYXIsXG4pOiBQcm9taXNlPD9EYXRhdGlwPiB7XG4gIGlmIChkZWZpbml0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gZGVmaW5pdGlvbnNbMF07XG4gICAgLy8gU29tZSBwcm92aWRlcnMgKGUuZy4gRmxvdykgcmV0dXJuIG5lZ2F0aXZlIHBvc2l0aW9ucy5cbiAgICBpZiAoZGVmaW5pdGlvbi5wb3NpdGlvbi5yb3cgPCAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkZWZpbml0aW9uUHJldmlldyA9IGF3YWl0IGdldFByZXZpZXcoXG4gICAgICBkZWZpbml0aW9uLFxuICAgICAgZGVmaW5pdGlvblByZXZpZXdQcm92aWRlcixcbiAgICApO1xuXG4gICAgaWYgKGRlZmluaXRpb25QcmV2aWV3ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIGlmIG1pbWV0eXBlIGlzIGltYWdlIHJldHVybiBpbWFnZSBjb21wb25lbnQgd2l0aCBiYXNlLTY0IGVuY29kZWRcbiAgICAvLyAgaW1hZ2UgY29udGVudHMsIG90aGVyd2lzZSB1c2UgbWFya2VkU3RyaW5nc1xuICAgIGlmIChkZWZpbml0aW9uUHJldmlldy5taW1lLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb21wb25lbnQ6ICgpID0+IChcbiAgICAgICAgICA8aW1nXG4gICAgICAgICAgICBzcmM9e2BkYXRhOiR7ZGVmaW5pdGlvblByZXZpZXcubWltZX07JHtkZWZpbml0aW9uUHJldmlldy5lbmNvZGluZ30sJHtkZWZpbml0aW9uUHJldmlldy5jb250ZW50c31gfVxuICAgICAgICAgIC8+XG4gICAgICAgICksXG4gICAgICAgIHJhbmdlLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hcmtlZFN0cmluZ3M6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICdzbmlwcGV0JyxcbiAgICAgICAgICB2YWx1ZTogZGVmaW5pdGlvblByZXZpZXcuY29udGVudHMsXG4gICAgICAgICAgZ3JhbW1hcixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICByYW5nZSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBtYXJrZWRTdHJpbmdzOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6ICdtYXJrZG93bicsXG4gICAgICAgIHZhbHVlOiBgJHtkZWZpbml0aW9ucy5sZW5ndGh9IGRlZmluaXRpb25zIGZvdW5kLiBDbGljayB0byBqdW1wLmAsXG4gICAgICAgIGdyYW1tYXIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcmFuZ2UsXG4gIH07XG59KTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0UHJldmlldyhcbiAgZGVmaW5pdGlvbjogRGVmaW5pdGlvbixcbiAgZGVmaW5pdGlvblByZXZpZXdQcm92aWRlcjogP0RlZmluaXRpb25QcmV2aWV3UHJvdmlkZXIsXG4pIHtcbiAgbGV0IGdldERlZmluaXRpb25QcmV2aWV3Rm47XG4gIGlmIChkZWZpbml0aW9uUHJldmlld1Byb3ZpZGVyID09IG51bGwpIHtcbiAgICBnZXREZWZpbml0aW9uUHJldmlld0ZuID0gZ2V0TG9jYWxGaWxlRGVmaW5pdGlvblByZXZpZXc7XG4gIH0gZWxzZSB7XG4gICAgZ2V0RGVmaW5pdGlvblByZXZpZXdGbiA9IGRlZmluaXRpb25QcmV2aWV3UHJvdmlkZXIuZ2V0RGVmaW5pdGlvblByZXZpZXcuYmluZChcbiAgICAgIGRlZmluaXRpb25QcmV2aWV3UHJvdmlkZXIsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBhbmFseXRpY3MudHJhY2tUaW1pbmcoJ2h5cGVyY2xpY2tQcmV2aWV3LmdldERlZmluaXRpb25QcmV2aWV3JywgKCkgPT5cbiAgICBnZXREZWZpbml0aW9uUHJldmlld0ZuKGRlZmluaXRpb24pLFxuICApO1xufVxuIl19