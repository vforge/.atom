'use strict';

var cov_1202ow54rs = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/hyperclick/lib/SuggestionListElement.js',
      hash = '056062270266c478ba115ce2fd8e7fabe88a3a6e',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/hyperclick/lib/SuggestionListElement.js',
    statementMap: {
      '0': {
        start: {
          line: 31,
          column: 4
        },
        end: {
          line: 31,
          column: 24
        }
      },
      '1': {
        start: {
          line: 32,
          column: 4
        },
        end: {
          line: 32,
          column: 16
        }
      },
      '2': {
        start: {
          line: 36,
          column: 4
        },
        end: {
          line: 36,
          column: 75
        }
      },
      '3': {
        start: {
          line: 40,
          column: 4
        },
        end: {
          line: 40,
          column: 42
        }
      },
      '4': {
        start: {
          line: 44,
          column: 4
        },
        end: {
          line: 46,
          column: 5
        }
      },
      '5': {
        start: {
          line: 45,
          column: 6
        },
        end: {
          line: 45,
          column: 40
        }
      },
      '6': {
        start: {
          line: 65,
          column: 4
        },
        end: {
          line: 65,
          column: 17
        }
      },
      '7': {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 68,
          column: 6
        }
      },
      '8': {
        start: {
          line: 69,
          column: 4
        },
        end: {
          line: 69,
          column: 52
        }
      },
      '9': {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 50
        }
      },
      '10': {
        start: {
          line: 74,
          column: 29
        },
        end: {
          line: 74,
          column: 39
        }
      },
      '11': {
        start: {
          line: 75,
          column: 23
        },
        end: {
          line: 75,
          column: 53
        }
      },
      '12': {
        start: {
          line: 78,
          column: 4
        },
        end: {
          line: 78,
          column: 72
        }
      },
      '13': {
        start: {
          line: 79,
          column: 4
        },
        end: {
          line: 79,
          column: 38
        }
      },
      '14': {
        start: {
          line: 80,
          column: 4
        },
        end: {
          line: 80,
          column: 54
        }
      },
      '15': {
        start: {
          line: 84,
          column: 23
        },
        end: {
          line: 84,
          column: 39
        }
      },
      '16': {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 85,
          column: 26
        }
      },
      '17': {
        start: {
          line: 86,
          column: 27
        },
        end: {
          line: 86,
          column: 57
        }
      },
      '18': {
        start: {
          line: 87,
          column: 23
        },
        end: {
          line: 87,
          column: 45
        }
      },
      '19': {
        start: {
          line: 88,
          column: 4
        },
        end: {
          line: 97,
          column: 6
        }
      },
      '20': {
        start: {
          line: 99,
          column: 4
        },
        end: {
          line: 99,
          column: 64
        }
      },
      '21': {
        start: {
          line: 100,
          column: 4
        },
        end: {
          line: 100,
          column: 78
        }
      },
      '22': {
        start: {
          line: 103,
          column: 28
        },
        end: {
          line: 103,
          column: 60
        }
      },
      '23': {
        start: {
          line: 103,
          column: 37
        },
        end: {
          line: 103,
          column: 60
        }
      },
      '24': {
        start: {
          line: 104,
          column: 4
        },
        end: {
          line: 104,
          column: 71
        }
      },
      '25': {
        start: {
          line: 105,
          column: 4
        },
        end: {
          line: 109,
          column: 6
        }
      },
      '26': {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 107,
          column: 78
        }
      },
      '27': {
        start: {
          line: 111,
          column: 20
        },
        end: {
          line: 117,
          column: 5
        }
      },
      '28': {
        start: {
          line: 113,
          column: 6
        },
        end: {
          line: 116,
          column: 7
        }
      },
      '29': {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 114,
          column: 41
        }
      },
      '30': {
        start: {
          line: 115,
          column: 8
        },
        end: {
          line: 115,
          column: 24
        }
      },
      '31': {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 118,
          column: 56
        }
      },
      '32': {
        start: {
          line: 119,
          column: 4
        },
        end: {
          line: 123,
          column: 6
        }
      },
      '33': {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 121,
          column: 63
        }
      },
      '34': {
        start: {
          line: 127,
          column: 27
        },
        end: {
          line: 142,
          column: 6
        }
      },
      '35': {
        start: {
          line: 128,
          column: 22
        },
        end: {
          line: 128,
          column: 46
        }
      },
      '36': {
        start: {
          line: 129,
          column: 6
        },
        end: {
          line: 131,
          column: 7
        }
      },
      '37': {
        start: {
          line: 130,
          column: 8
        },
        end: {
          line: 130,
          column: 33
        }
      },
      '38': {
        start: {
          line: 132,
          column: 6
        },
        end: {
          line: 141,
          column: 8
        }
      },
      '39': {
        start: {
          line: 144,
          column: 4
        },
        end: {
          line: 152,
          column: 6
        }
      },
      '40': {
        start: {
          line: 156,
          column: 4
        },
        end: {
          line: 158,
          column: 5
        }
      },
      '41': {
        start: {
          line: 157,
          column: 6
        },
        end: {
          line: 157,
          column: 35
        }
      },
      '42': {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 162,
          column: 34
        }
      },
      '43': {
        start: {
          line: 166,
          column: 4
        },
        end: {
          line: 166,
          column: 53
        }
      },
      '44': {
        start: {
          line: 167,
          column: 4
        },
        end: {
          line: 167,
          column: 18
        }
      },
      '45': {
        start: {
          line: 171,
          column: 4
        },
        end: {
          line: 171,
          column: 37
        }
      },
      '46': {
        start: {
          line: 175,
          column: 4
        },
        end: {
          line: 177,
          column: 7
        }
      },
      '47': {
        start: {
          line: 181,
          column: 4
        },
        end: {
          line: 185,
          column: 5
        }
      },
      '48': {
        start: {
          line: 182,
          column: 6
        },
        end: {
          line: 182,
          column: 67
        }
      },
      '49': {
        start: {
          line: 184,
          column: 6
        },
        end: {
          line: 184,
          column: 33
        }
      },
      '50': {
        start: {
          line: 186,
          column: 4
        },
        end: {
          line: 188,
          column: 5
        }
      },
      '51': {
        start: {
          line: 187,
          column: 6
        },
        end: {
          line: 187,
          column: 39
        }
      },
      '52': {
        start: {
          line: 192,
          column: 4
        },
        end: {
          line: 196,
          column: 5
        }
      },
      '53': {
        start: {
          line: 193,
          column: 6
        },
        end: {
          line: 193,
          column: 67
        }
      },
      '54': {
        start: {
          line: 195,
          column: 6
        },
        end: {
          line: 195,
          column: 36
        }
      },
      '55': {
        start: {
          line: 197,
          column: 4
        },
        end: {
          line: 199,
          column: 5
        }
      },
      '56': {
        start: {
          line: 198,
          column: 6
        },
        end: {
          line: 198,
          column: 39
        }
      },
      '57': {
        start: {
          line: 203,
          column: 4
        },
        end: {
          line: 203,
          column: 72
        }
      },
      '58': {
        start: {
          line: 204,
          column: 4
        },
        end: {
          line: 206,
          column: 5
        }
      },
      '59': {
        start: {
          line: 205,
          column: 6
        },
        end: {
          line: 205,
          column: 39
        }
      },
      '60': {
        start: {
          line: 210,
          column: 4
        },
        end: {
          line: 210,
          column: 38
        }
      },
      '61': {
        start: {
          line: 211,
          column: 4
        },
        end: {
          line: 213,
          column: 5
        }
      },
      '62': {
        start: {
          line: 212,
          column: 6
        },
        end: {
          line: 212,
          column: 39
        }
      },
      '63': {
        start: {
          line: 217,
          column: 21
        },
        end: {
          line: 217,
          column: 44
        }
      },
      '64': {
        start: {
          line: 218,
          column: 25
        },
        end: {
          line: 218,
          column: 71
        }
      },
      '65': {
        start: {
          line: 219,
          column: 4
        },
        end: {
          line: 219,
          column: 48
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 30,
            column: 2
          },
          end: {
            line: 30,
            column: 3
          }
        },
        loc: {
          start: {
            line: 30,
            column: 40
          },
          end: {
            line: 33,
            column: 3
          }
        },
        line: 30
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 35,
            column: 2
          },
          end: {
            line: 35,
            column: 3
          }
        },
        loc: {
          start: {
            line: 35,
            column: 28
          },
          end: {
            line: 37,
            column: 3
          }
        },
        line: 35
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 39,
            column: 2
          },
          end: {
            line: 39,
            column: 3
          }
        },
        loc: {
          start: {
            line: 39,
            column: 28
          },
          end: {
            line: 41,
            column: 3
          }
        },
        line: 39
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 43,
            column: 2
          },
          end: {
            line: 43,
            column: 3
          }
        },
        loc: {
          start: {
            line: 43,
            column: 12
          },
          end: {
            line: 47,
            column: 3
          }
        },
        line: 43
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 3
          }
        },
        loc: {
          start: {
            line: 64,
            column: 28
          },
          end: {
            line: 71,
            column: 3
          }
        },
        line: 64
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 73,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        loc: {
          start: {
            line: 73,
            column: 23
          },
          end: {
            line: 81,
            column: 3
          }
        },
        line: 73
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 83,
            column: 2
          },
          end: {
            line: 83,
            column: 3
          }
        },
        loc: {
          start: {
            line: 83,
            column: 22
          },
          end: {
            line: 124,
            column: 3
          }
        },
        line: 83
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 103,
            column: 28
          },
          end: {
            line: 103,
            column: 29
          }
        },
        loc: {
          start: {
            line: 103,
            column: 37
          },
          end: {
            line: 103,
            column: 60
          }
        },
        line: 103
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 106,
            column: 21
          },
          end: {
            line: 106,
            column: 22
          }
        },
        loc: {
          start: {
            line: 106,
            column: 27
          },
          end: {
            line: 108,
            column: 7
          }
        },
        line: 106
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 111,
            column: 20
          },
          end: {
            line: 111,
            column: 21
          }
        },
        loc: {
          start: {
            line: 111,
            column: 46
          },
          end: {
            line: 117,
            column: 5
          }
        },
        line: 111
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 120,
            column: 21
          },
          end: {
            line: 120,
            column: 22
          }
        },
        loc: {
          start: {
            line: 120,
            column: 27
          },
          end: {
            line: 122,
            column: 7
          }
        },
        line: 120
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 126,
            column: 2
          },
          end: {
            line: 126,
            column: 3
          }
        },
        loc: {
          start: {
            line: 126,
            column: 11
          },
          end: {
            line: 153,
            column: 3
          }
        },
        line: 126
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 127,
            column: 43
          },
          end: {
            line: 127,
            column: 44
          }
        },
        loc: {
          start: {
            line: 127,
            column: 60
          },
          end: {
            line: 142,
            column: 5
          }
        },
        line: 127
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 155,
            column: 2
          },
          end: {
            line: 155,
            column: 3
          }
        },
        loc: {
          start: {
            line: 155,
            column: 59
          },
          end: {
            line: 159,
            column: 3
          }
        },
        line: 155
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 161,
            column: 2
          },
          end: {
            line: 161,
            column: 3
          }
        },
        loc: {
          start: {
            line: 161,
            column: 25
          },
          end: {
            line: 163,
            column: 3
          }
        },
        line: 161
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 165,
            column: 2
          },
          end: {
            line: 165,
            column: 3
          }
        },
        loc: {
          start: {
            line: 165,
            column: 13
          },
          end: {
            line: 168,
            column: 3
          }
        },
        line: 165
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 170,
            column: 2
          },
          end: {
            line: 170,
            column: 3
          }
        },
        loc: {
          start: {
            line: 170,
            column: 11
          },
          end: {
            line: 172,
            column: 3
          }
        },
        line: 170
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 174,
            column: 2
          },
          end: {
            line: 174,
            column: 3
          }
        },
        loc: {
          start: {
            line: 174,
            column: 35
          },
          end: {
            line: 178,
            column: 3
          }
        },
        line: 174
      },
      '18': {
        name: '(anonymous_18)',
        decl: {
          start: {
            line: 180,
            column: 2
          },
          end: {
            line: 180,
            column: 3
          }
        },
        loc: {
          start: {
            line: 180,
            column: 28
          },
          end: {
            line: 189,
            column: 3
          }
        },
        line: 180
      },
      '19': {
        name: '(anonymous_19)',
        decl: {
          start: {
            line: 191,
            column: 2
          },
          end: {
            line: 191,
            column: 3
          }
        },
        loc: {
          start: {
            line: 191,
            column: 26
          },
          end: {
            line: 200,
            column: 3
          }
        },
        line: 191
      },
      '20': {
        name: '(anonymous_20)',
        decl: {
          start: {
            line: 202,
            column: 2
          },
          end: {
            line: 202,
            column: 3
          }
        },
        loc: {
          start: {
            line: 202,
            column: 32
          },
          end: {
            line: 207,
            column: 3
          }
        },
        line: 202
      },
      '21': {
        name: '(anonymous_21)',
        decl: {
          start: {
            line: 209,
            column: 2
          },
          end: {
            line: 209,
            column: 3
          }
        },
        loc: {
          start: {
            line: 209,
            column: 29
          },
          end: {
            line: 214,
            column: 3
          }
        },
        line: 209
      },
      '22': {
        name: '(anonymous_22)',
        decl: {
          start: {
            line: 216,
            column: 2
          },
          end: {
            line: 216,
            column: 3
          }
        },
        loc: {
          start: {
            line: 216,
            column: 26
          },
          end: {
            line: 220,
            column: 3
          }
        },
        line: 216
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 44,
            column: 4
          },
          end: {
            line: 46,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 44,
            column: 4
          },
          end: {
            line: 46,
            column: 5
          }
        }, {
          start: {
            line: 44,
            column: 4
          },
          end: {
            line: 46,
            column: 5
          }
        }],
        line: 44
      },
      '1': {
        loc: {
          start: {
            line: 78,
            column: 14
          },
          end: {
            line: 78,
            column: 70
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 78,
            column: 14
          },
          end: {
            line: 78,
            column: 32
          }
        }, {
          start: {
            line: 78,
            column: 36
          },
          end: {
            line: 78,
            column: 70
          }
        }],
        line: 78
      },
      '2': {
        loc: {
          start: {
            line: 113,
            column: 6
          },
          end: {
            line: 116,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 113,
            column: 6
          },
          end: {
            line: 116,
            column: 7
          }
        }, {
          start: {
            line: 113,
            column: 6
          },
          end: {
            line: 116,
            column: 7
          }
        }],
        line: 113
      },
      '3': {
        loc: {
          start: {
            line: 129,
            column: 6
          },
          end: {
            line: 131,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 129,
            column: 6
          },
          end: {
            line: 131,
            column: 7
          }
        }, {
          start: {
            line: 129,
            column: 6
          },
          end: {
            line: 131,
            column: 7
          }
        }],
        line: 129
      },
      '4': {
        loc: {
          start: {
            line: 156,
            column: 4
          },
          end: {
            line: 158,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 156,
            column: 4
          },
          end: {
            line: 158,
            column: 5
          }
        }, {
          start: {
            line: 156,
            column: 4
          },
          end: {
            line: 158,
            column: 5
          }
        }],
        line: 156
      },
      '5': {
        loc: {
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 185,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 185,
            column: 5
          }
        }, {
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 185,
            column: 5
          }
        }],
        line: 181
      },
      '6': {
        loc: {
          start: {
            line: 186,
            column: 4
          },
          end: {
            line: 188,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 186,
            column: 4
          },
          end: {
            line: 188,
            column: 5
          }
        }, {
          start: {
            line: 186,
            column: 4
          },
          end: {
            line: 188,
            column: 5
          }
        }],
        line: 186
      },
      '7': {
        loc: {
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 196,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 196,
            column: 5
          }
        }, {
          start: {
            line: 192,
            column: 4
          },
          end: {
            line: 196,
            column: 5
          }
        }],
        line: 192
      },
      '8': {
        loc: {
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        }, {
          start: {
            line: 197,
            column: 4
          },
          end: {
            line: 199,
            column: 5
          }
        }],
        line: 197
      },
      '9': {
        loc: {
          start: {
            line: 204,
            column: 4
          },
          end: {
            line: 206,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 204,
            column: 4
          },
          end: {
            line: 206,
            column: 5
          }
        }, {
          start: {
            line: 204,
            column: 4
          },
          end: {
            line: 206,
            column: 5
          }
        }],
        line: 204
      },
      '10': {
        loc: {
          start: {
            line: 211,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 211,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        }, {
          start: {
            line: 211,
            column: 4
          },
          end: {
            line: 213,
            column: 5
          }
        }],
        line: 211
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _atom = require('atom');

var _react = _interopRequireWildcard(require('react'));

var _reactDom = _interopRequireDefault(require('react-dom'));

var _scrollIntoView;

function _load_scrollIntoView() {
  return _scrollIntoView = require('nuclide-commons-ui/scrollIntoView');
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * We need to create this custom HTML element so we can hook into the view
 * registry. The overlay decoration only works through the view registry.
 */
class SuggestionListElement extends HTMLElement {

  initialize(model) {
    cov_1202ow54rs.f[0]++;
    cov_1202ow54rs.s[0]++;

    this._model = model;
    cov_1202ow54rs.s[1]++;
    return this;
  }

  attachedCallback() {
    cov_1202ow54rs.f[1]++;
    cov_1202ow54rs.s[2]++;

    _reactDom.default.render(_react.createElement(SuggestionList, { suggestionList: this._model }), this);
  }

  detachedCallback() {
    cov_1202ow54rs.f[2]++;
    cov_1202ow54rs.s[3]++;

    _reactDom.default.unmountComponentAtNode(this);
  }

  dispose() {
    cov_1202ow54rs.f[3]++;
    cov_1202ow54rs.s[4]++;

    if (this.parentNode) {
      cov_1202ow54rs.b[0][0]++;
      cov_1202ow54rs.s[5]++;

      this.parentNode.removeChild(this);
    } else {
      cov_1202ow54rs.b[0][1]++;
    }
  }
} /**
   * Copyright (c) 2017-present, Facebook, Inc.
   * All rights reserved.
   *
   * This source code is licensed under the BSD-style license found in the
   * LICENSE file in the root directory of this source tree. An additional grant
   * of patent rights can be found in the PATENTS file in the same directory.
   *
   * 
   * @format
   */

/* global HTMLElement */

class SuggestionList extends _react.Component {

  constructor(props) {
    cov_1202ow54rs.f[4]++;
    cov_1202ow54rs.s[6]++;

    super(props);
    cov_1202ow54rs.s[7]++;
    this.state = {
      selectedIndex: 0
    };
    cov_1202ow54rs.s[8]++;
    this._subscriptions = new _atom.CompositeDisposable();
    cov_1202ow54rs.s[9]++;
    this._boundConfirm = this._confirm.bind(this);
  }

  componentWillMount() {
    cov_1202ow54rs.f[5]++;

    const { suggestionList } = (cov_1202ow54rs.s[10]++, this.props);
    const suggestion = (cov_1202ow54rs.s[11]++, suggestionList.getSuggestion());
    // TODO(nmote): This is assuming `suggestion.callback` is always an Array, which is not true
    //   according to hyperclick/lib/types. It can also be a function.
    cov_1202ow54rs.s[12]++;

    if (!((cov_1202ow54rs.b[1][0]++, suggestion != null) && (cov_1202ow54rs.b[1][1]++, Array.isArray(suggestion.callback)))) {
      throw new Error('Invariant violation: "suggestion != null && Array.isArray(suggestion.callback)"');
    }

    cov_1202ow54rs.s[13]++;

    this._items = suggestion.callback;
    cov_1202ow54rs.s[14]++;
    this._textEditor = suggestionList.getTextEditor();
  }

  componentDidMount() {
    cov_1202ow54rs.f[6]++;

    const textEditor = (cov_1202ow54rs.s[15]++, this._textEditor);
    cov_1202ow54rs.s[16]++;

    if (!textEditor) {
      throw new Error('Invariant violation: "textEditor"');
    }

    const textEditorView = (cov_1202ow54rs.s[17]++, atom.views.getView(textEditor));
    const boundClose = (cov_1202ow54rs.s[18]++, this._close.bind(this));
    cov_1202ow54rs.s[19]++;
    this._subscriptions.add(atom.commands.add(textEditorView, {
      'core:move-up': this._moveSelectionUp.bind(this),
      'core:move-down': this._moveSelectionDown.bind(this),
      'core:move-to-top': this._moveSelectionToTop.bind(this),
      'core:move-to-bottom': this._moveSelectionToBottom.bind(this),
      'core:cancel': boundClose,
      'editor:newline': this._boundConfirm
    }));

    cov_1202ow54rs.s[20]++;
    this._subscriptions.add(textEditor.onDidChange(boundClose));
    cov_1202ow54rs.s[21]++;
    this._subscriptions.add(textEditor.onDidChangeCursorPosition(boundClose));

    // Prevent scrolling the editor when scrolling the suggestion list.
    cov_1202ow54rs.s[22]++;
    const stopPropagation = event => {
      cov_1202ow54rs.f[7]++;
      cov_1202ow54rs.s[23]++;
      return event.stopPropagation();
    };
    cov_1202ow54rs.s[24]++;
    this.refs.scroller.addEventListener('mousewheel', stopPropagation);
    cov_1202ow54rs.s[25]++;
    this._subscriptions.add(new _atom.Disposable(() => {
      cov_1202ow54rs.f[8]++;
      cov_1202ow54rs.s[26]++;

      this.refs.scroller.removeEventListener('mousewheel', stopPropagation);
    }));

    cov_1202ow54rs.s[27]++;
    const keydown = event => {
      cov_1202ow54rs.f[9]++;
      cov_1202ow54rs.s[28]++;

      // If the user presses the enter key, confirm the selection.
      if (event.keyCode === 13) {
        cov_1202ow54rs.b[2][0]++;
        cov_1202ow54rs.s[29]++;

        event.stopImmediatePropagation();
        cov_1202ow54rs.s[30]++;
        this._confirm();
      } else {
        cov_1202ow54rs.b[2][1]++;
      }
    };
    cov_1202ow54rs.s[31]++;
    textEditorView.addEventListener('keydown', keydown);
    cov_1202ow54rs.s[32]++;
    this._subscriptions.add(new _atom.Disposable(() => {
      cov_1202ow54rs.f[10]++;
      cov_1202ow54rs.s[33]++;

      textEditorView.removeEventListener('keydown', keydown);
    }));
  }

  render() {
    cov_1202ow54rs.f[11]++;

    const itemComponents = (cov_1202ow54rs.s[34]++, this._items.map((item, index) => {
      cov_1202ow54rs.f[12]++;

      let className = (cov_1202ow54rs.s[35]++, 'hyperclick-result-item');
      cov_1202ow54rs.s[36]++;
      if (index === this.state.selectedIndex) {
        cov_1202ow54rs.b[3][0]++;
        cov_1202ow54rs.s[37]++;

        className += ' selected';
      } else {
        cov_1202ow54rs.b[3][1]++;
      }
      cov_1202ow54rs.s[38]++;
      return _react.createElement(
        'li',
        {
          className: className,
          key: index,
          onMouseDown: this._boundConfirm,
          onMouseEnter: this._setSelectedIndex.bind(this, index) },
        item.title,
        _react.createElement(
          'span',
          { className: 'right-label' },
          item.rightLabel
        )
      );
    }));

    cov_1202ow54rs.s[39]++;
    return _react.createElement(
      'div',
      {
        className: 'popover-list select-list hyperclick-suggestion-list-scroller',
        ref: 'scroller' },
      _react.createElement(
        'ol',
        { className: 'list-group', ref: 'selectionList' },
        itemComponents
      )
    );
  }

  componentDidUpdate(prevProps, prevState) {
    cov_1202ow54rs.f[13]++;
    cov_1202ow54rs.s[40]++;

    if (prevState.selectedIndex !== this.state.selectedIndex) {
      cov_1202ow54rs.b[4][0]++;
      cov_1202ow54rs.s[41]++;

      this._updateScrollPosition();
    } else {
      cov_1202ow54rs.b[4][1]++;
    }
  }

  componentWillUnmount() {
    cov_1202ow54rs.f[14]++;
    cov_1202ow54rs.s[42]++;

    this._subscriptions.dispose();
  }

  _confirm() {
    cov_1202ow54rs.f[15]++;
    cov_1202ow54rs.s[43]++;

    this._items[this.state.selectedIndex].callback();
    cov_1202ow54rs.s[44]++;
    this._close();
  }

  _close() {
    cov_1202ow54rs.f[16]++;
    cov_1202ow54rs.s[45]++;

    this.props.suggestionList.hide();
  }

  _setSelectedIndex(index) {
    cov_1202ow54rs.f[17]++;
    cov_1202ow54rs.s[46]++;

    this.setState({
      selectedIndex: index
    });
  }

  _moveSelectionDown(event) {
    cov_1202ow54rs.f[18]++;
    cov_1202ow54rs.s[47]++;

    if (this.state.selectedIndex < this._items.length - 1) {
      cov_1202ow54rs.b[5][0]++;
      cov_1202ow54rs.s[48]++;

      this.setState({ selectedIndex: this.state.selectedIndex + 1 });
    } else {
      cov_1202ow54rs.b[5][1]++;
      cov_1202ow54rs.s[49]++;

      this._moveSelectionToTop();
    }
    cov_1202ow54rs.s[50]++;
    if (event) {
      cov_1202ow54rs.b[6][0]++;
      cov_1202ow54rs.s[51]++;

      event.stopImmediatePropagation();
    } else {
      cov_1202ow54rs.b[6][1]++;
    }
  }

  _moveSelectionUp(event) {
    cov_1202ow54rs.f[19]++;
    cov_1202ow54rs.s[52]++;

    if (this.state.selectedIndex > 0) {
      cov_1202ow54rs.b[7][0]++;
      cov_1202ow54rs.s[53]++;

      this.setState({ selectedIndex: this.state.selectedIndex - 1 });
    } else {
      cov_1202ow54rs.b[7][1]++;
      cov_1202ow54rs.s[54]++;

      this._moveSelectionToBottom();
    }
    cov_1202ow54rs.s[55]++;
    if (event) {
      cov_1202ow54rs.b[8][0]++;
      cov_1202ow54rs.s[56]++;

      event.stopImmediatePropagation();
    } else {
      cov_1202ow54rs.b[8][1]++;
    }
  }

  _moveSelectionToBottom(event) {
    cov_1202ow54rs.f[20]++;
    cov_1202ow54rs.s[57]++;

    this.setState({ selectedIndex: Math.max(this._items.length - 1, 0) });
    cov_1202ow54rs.s[58]++;
    if (event) {
      cov_1202ow54rs.b[9][0]++;
      cov_1202ow54rs.s[59]++;

      event.stopImmediatePropagation();
    } else {
      cov_1202ow54rs.b[9][1]++;
    }
  }

  _moveSelectionToTop(event) {
    cov_1202ow54rs.f[21]++;
    cov_1202ow54rs.s[60]++;

    this.setState({ selectedIndex: 0 });
    cov_1202ow54rs.s[61]++;
    if (event) {
      cov_1202ow54rs.b[10][0]++;
      cov_1202ow54rs.s[62]++;

      event.stopImmediatePropagation();
    } else {
      cov_1202ow54rs.b[10][1]++;
    }
  }

  _updateScrollPosition() {
    cov_1202ow54rs.f[22]++;

    const listNode = (cov_1202ow54rs.s[63]++, this.refs.selectionList);
    const selectedNode = (cov_1202ow54rs.s[64]++, listNode.getElementsByClassName('selected')[0]);
    cov_1202ow54rs.s[65]++;
    (0, (_scrollIntoView || _load_scrollIntoView()).scrollIntoViewIfNeeded)(selectedNode, false);
  }
}

exports.default = document.registerElement('hyperclick-suggestion-list', {
  prototype: SuggestionListElement.prototype
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN1Z2dlc3Rpb25MaXN0RWxlbWVudC5qcyJdLCJuYW1lcyI6WyJTdWdnZXN0aW9uTGlzdEVsZW1lbnQiLCJIVE1MRWxlbWVudCIsImluaXRpYWxpemUiLCJtb2RlbCIsIl9tb2RlbCIsImF0dGFjaGVkQ2FsbGJhY2siLCJyZW5kZXIiLCJkZXRhY2hlZENhbGxiYWNrIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZSIsImRpc3Bvc2UiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJTdWdnZXN0aW9uTGlzdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJzdGF0ZSIsInNlbGVjdGVkSW5kZXgiLCJfc3Vic2NyaXB0aW9ucyIsIl9ib3VuZENvbmZpcm0iLCJfY29uZmlybSIsImJpbmQiLCJjb21wb25lbnRXaWxsTW91bnQiLCJzdWdnZXN0aW9uTGlzdCIsInN1Z2dlc3Rpb24iLCJnZXRTdWdnZXN0aW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbGJhY2siLCJfaXRlbXMiLCJfdGV4dEVkaXRvciIsImdldFRleHRFZGl0b3IiLCJjb21wb25lbnREaWRNb3VudCIsInRleHRFZGl0b3IiLCJ0ZXh0RWRpdG9yVmlldyIsImF0b20iLCJ2aWV3cyIsImdldFZpZXciLCJib3VuZENsb3NlIiwiX2Nsb3NlIiwiYWRkIiwiY29tbWFuZHMiLCJfbW92ZVNlbGVjdGlvblVwIiwiX21vdmVTZWxlY3Rpb25Eb3duIiwiX21vdmVTZWxlY3Rpb25Ub1RvcCIsIl9tb3ZlU2VsZWN0aW9uVG9Cb3R0b20iLCJvbkRpZENoYW5nZSIsIm9uRGlkQ2hhbmdlQ3Vyc29yUG9zaXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJldmVudCIsInJlZnMiLCJzY3JvbGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5ZG93biIsImtleUNvZGUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJpdGVtQ29tcG9uZW50cyIsIm1hcCIsIml0ZW0iLCJpbmRleCIsImNsYXNzTmFtZSIsIl9zZXRTZWxlY3RlZEluZGV4IiwidGl0bGUiLCJyaWdodExhYmVsIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwiX3VwZGF0ZVNjcm9sbFBvc2l0aW9uIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJoaWRlIiwic2V0U3RhdGUiLCJsZW5ndGgiLCJNYXRoIiwibWF4IiwibGlzdE5vZGUiLCJzZWxlY3Rpb25MaXN0Iiwic2VsZWN0ZWROb2RlIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImRvY3VtZW50IiwicmVnaXN0ZXJFbGVtZW50IiwicHJvdG90eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Q0FBYyxFQUFDdEQsZUFBZXdELEtBQUtDLEdBQUwsQ0FBUyxLQUFLN0MsTUFBTCxDQUFZMkMsTUFBWixHQUFxQixDQUE5QixFQUFpQyxDQUFqQyxDQUFoQixFQUFkO0FBRDRCO0FBRTVCLFFBQUl2QixLQUFKLEVBQVc7QUFBQTtBQUFBOztBQUNUQSxZQUFNTyx3QkFBTjtBQUNELEtBRkQ7QUFBQTtBQUFBO0FBR0Q7O0FBRURaLHNCQUFvQkssS0FBcEIsRUFBMkI7QUFBQTtBQUFBOztBQUN6QixTQUFLc0IsUUFBTCxDQUFjLEVBQUN0RCxlQUFlLENBQWhCLEVBQWQ7QUFEeUI7QUFFekIsUUFBSWdDLEtBQUosRUFBVztBQUFBO0FBQUE7O0FBQ1RBLFlBQU1PLHdCQUFOO0FBQ0QsS0FGRDtBQUFBO0FBQUE7QUFHRDs7QUFFRFksMEJBQXdCO0FBQUE7O0FBQ3RCLFVBQU1PLG9DQUFXLEtBQUt6QixJQUFMLENBQVUwQixhQUFyQixDQUFOO0FBQ0EsVUFBTUMsd0NBQWVGLFNBQVNHLHNCQUFULENBQWdDLFVBQWhDLEVBQTRDLENBQTVDLENBQWYsQ0FBTjtBQUZzQjtBQUd0Qiw0RUFBdUJELFlBQXZCLEVBQXFDLEtBQXJDO0FBQ0Q7QUFsS3dEOztrQkFxSzVDRSxTQUFTQyxlQUFULENBQXlCLDRCQUF6QixFQUF1RDtBQUNwRUMsYUFBV2pGLHNCQUFzQmlGO0FBRG1DLENBQXZELEMiLCJmaWxlIjoiU3VnZ2VzdGlvbkxpc3RFbGVtZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuLyogZ2xvYmFsIEhUTUxFbGVtZW50ICovXG5cbmltcG9ydCB0eXBlIFN1Z2dlc3Rpb25MaXN0VHlwZSBmcm9tICcuL1N1Z2dlc3Rpb25MaXN0JztcblxuaW1wb3J0IHtDb21wb3NpdGVEaXNwb3NhYmxlLCBEaXNwb3NhYmxlfSBmcm9tICdhdG9tJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHtzY3JvbGxJbnRvVmlld0lmTmVlZGVkfSBmcm9tICdudWNsaWRlLWNvbW1vbnMtdWkvc2Nyb2xsSW50b1ZpZXcnO1xuXG4vKipcbiAqIFdlIG5lZWQgdG8gY3JlYXRlIHRoaXMgY3VzdG9tIEhUTUwgZWxlbWVudCBzbyB3ZSBjYW4gaG9vayBpbnRvIHRoZSB2aWV3XG4gKiByZWdpc3RyeS4gVGhlIG92ZXJsYXkgZGVjb3JhdGlvbiBvbmx5IHdvcmtzIHRocm91Z2ggdGhlIHZpZXcgcmVnaXN0cnkuXG4gKi9cbmNsYXNzIFN1Z2dlc3Rpb25MaXN0RWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgX21vZGVsOiBTdWdnZXN0aW9uTGlzdFR5cGU7XG5cbiAgaW5pdGlhbGl6ZShtb2RlbDogU3VnZ2VzdGlvbkxpc3RUeXBlKSB7XG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGF0dGFjaGVkQ2FsbGJhY2soKTogbWl4ZWQge1xuICAgIFJlYWN0RE9NLnJlbmRlcig8U3VnZ2VzdGlvbkxpc3Qgc3VnZ2VzdGlvbkxpc3Q9e3RoaXMuX21vZGVsfSAvPiwgdGhpcyk7XG4gIH1cblxuICBkZXRhY2hlZENhbGxiYWNrKCk6IG1peGVkIHtcbiAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMpO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICB0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHN1Z2dlc3Rpb25MaXN0OiBTdWdnZXN0aW9uTGlzdFR5cGUsXG59O1xuXG50eXBlIFN0YXRlID0ge1xuICBzZWxlY3RlZEluZGV4OiBudW1iZXIsXG59O1xuXG5jbGFzcyBTdWdnZXN0aW9uTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgX2l0ZW1zOiBBcnJheTx7cmlnaHRMYWJlbD86IHN0cmluZywgdGl0bGU6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IG1peGVkfT47XG4gIF90ZXh0RWRpdG9yOiA/YXRvbSRUZXh0RWRpdG9yO1xuICBfc3Vic2NyaXB0aW9uczogYXRvbSRDb21wb3NpdGVEaXNwb3NhYmxlO1xuICBfYm91bmRDb25maXJtOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2VsZWN0ZWRJbmRleDogMCxcbiAgICB9O1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgIHRoaXMuX2JvdW5kQ29uZmlybSA9IHRoaXMuX2NvbmZpcm0uYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBjb25zdCB7c3VnZ2VzdGlvbkxpc3R9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBzdWdnZXN0aW9uID0gc3VnZ2VzdGlvbkxpc3QuZ2V0U3VnZ2VzdGlvbigpO1xuICAgIC8vIFRPRE8obm1vdGUpOiBUaGlzIGlzIGFzc3VtaW5nIGBzdWdnZXN0aW9uLmNhbGxiYWNrYCBpcyBhbHdheXMgYW4gQXJyYXksIHdoaWNoIGlzIG5vdCB0cnVlXG4gICAgLy8gICBhY2NvcmRpbmcgdG8gaHlwZXJjbGljay9saWIvdHlwZXMuIEl0IGNhbiBhbHNvIGJlIGEgZnVuY3Rpb24uXG4gICAgaW52YXJpYW50KHN1Z2dlc3Rpb24gIT0gbnVsbCAmJiBBcnJheS5pc0FycmF5KHN1Z2dlc3Rpb24uY2FsbGJhY2spKTtcbiAgICB0aGlzLl9pdGVtcyA9IHN1Z2dlc3Rpb24uY2FsbGJhY2s7XG4gICAgdGhpcy5fdGV4dEVkaXRvciA9IHN1Z2dlc3Rpb25MaXN0LmdldFRleHRFZGl0b3IoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHRleHRFZGl0b3IgPSB0aGlzLl90ZXh0RWRpdG9yO1xuICAgIGludmFyaWFudCh0ZXh0RWRpdG9yKTtcbiAgICBjb25zdCB0ZXh0RWRpdG9yVmlldyA9IGF0b20udmlld3MuZ2V0Vmlldyh0ZXh0RWRpdG9yKTtcbiAgICBjb25zdCBib3VuZENsb3NlID0gdGhpcy5fY2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLmFkZChcbiAgICAgIGF0b20uY29tbWFuZHMuYWRkKHRleHRFZGl0b3JWaWV3LCB7XG4gICAgICAgICdjb3JlOm1vdmUtdXAnOiB0aGlzLl9tb3ZlU2VsZWN0aW9uVXAuYmluZCh0aGlzKSxcbiAgICAgICAgJ2NvcmU6bW92ZS1kb3duJzogdGhpcy5fbW92ZVNlbGVjdGlvbkRvd24uYmluZCh0aGlzKSxcbiAgICAgICAgJ2NvcmU6bW92ZS10by10b3AnOiB0aGlzLl9tb3ZlU2VsZWN0aW9uVG9Ub3AuYmluZCh0aGlzKSxcbiAgICAgICAgJ2NvcmU6bW92ZS10by1ib3R0b20nOiB0aGlzLl9tb3ZlU2VsZWN0aW9uVG9Cb3R0b20uYmluZCh0aGlzKSxcbiAgICAgICAgJ2NvcmU6Y2FuY2VsJzogYm91bmRDbG9zZSxcbiAgICAgICAgJ2VkaXRvcjpuZXdsaW5lJzogdGhpcy5fYm91bmRDb25maXJtLFxuICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuYWRkKHRleHRFZGl0b3Iub25EaWRDaGFuZ2UoYm91bmRDbG9zZSkpO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuYWRkKHRleHRFZGl0b3Iub25EaWRDaGFuZ2VDdXJzb3JQb3NpdGlvbihib3VuZENsb3NlKSk7XG5cbiAgICAvLyBQcmV2ZW50IHNjcm9sbGluZyB0aGUgZWRpdG9yIHdoZW4gc2Nyb2xsaW5nIHRoZSBzdWdnZXN0aW9uIGxpc3QuXG4gICAgY29uc3Qgc3RvcFByb3BhZ2F0aW9uID0gZXZlbnQgPT4gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5yZWZzLnNjcm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBzdG9wUHJvcGFnYXRpb24pO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgbmV3IERpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgICB0aGlzLnJlZnMuc2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V3aGVlbCcsIHN0b3BQcm9wYWdhdGlvbik7XG4gICAgICB9KSxcbiAgICApO1xuXG4gICAgY29uc3Qga2V5ZG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgcHJlc3NlcyB0aGUgZW50ZXIga2V5LCBjb25maXJtIHRoZSBzZWxlY3Rpb24uXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuX2NvbmZpcm0oKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRleHRFZGl0b3JWaWV3LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlkb3duKTtcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLmFkZChcbiAgICAgIG5ldyBEaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgICAgdGV4dEVkaXRvclZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd24pO1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBpdGVtQ29tcG9uZW50cyA9IHRoaXMuX2l0ZW1zLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGxldCBjbGFzc05hbWUgPSAnaHlwZXJjbGljay1yZXN1bHQtaXRlbSc7XG4gICAgICBpZiAoaW5kZXggPT09IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCkge1xuICAgICAgICBjbGFzc05hbWUgKz0gJyBzZWxlY3RlZCc7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8bGlcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgIG9uTW91c2VEb3duPXt0aGlzLl9ib3VuZENvbmZpcm19XG4gICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLl9zZXRTZWxlY3RlZEluZGV4LmJpbmQodGhpcywgaW5kZXgpfT5cbiAgICAgICAgICB7aXRlbS50aXRsZX1cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJyaWdodC1sYWJlbFwiPntpdGVtLnJpZ2h0TGFiZWx9PC9zcGFuPlxuICAgICAgICA8L2xpPlxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT1cInBvcG92ZXItbGlzdCBzZWxlY3QtbGlzdCBoeXBlcmNsaWNrLXN1Z2dlc3Rpb24tbGlzdC1zY3JvbGxlclwiXG4gICAgICAgIHJlZj1cInNjcm9sbGVyXCI+XG4gICAgICAgIDxvbCBjbGFzc05hbWU9XCJsaXN0LWdyb3VwXCIgcmVmPVwic2VsZWN0aW9uTGlzdFwiPlxuICAgICAgICAgIHtpdGVtQ29tcG9uZW50c31cbiAgICAgICAgPC9vbD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBPYmplY3QsIHByZXZTdGF0ZTogT2JqZWN0KSB7XG4gICAgaWYgKHByZXZTdGF0ZS5zZWxlY3RlZEluZGV4ICE9PSB0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXgpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZVNjcm9sbFBvc2l0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5kaXNwb3NlKCk7XG4gIH1cblxuICBfY29uZmlybSgpIHtcbiAgICB0aGlzLl9pdGVtc1t0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXhdLmNhbGxiYWNrKCk7XG4gICAgdGhpcy5fY2xvc2UoKTtcbiAgfVxuXG4gIF9jbG9zZSgpIHtcbiAgICB0aGlzLnByb3BzLnN1Z2dlc3Rpb25MaXN0LmhpZGUoKTtcbiAgfVxuXG4gIF9zZXRTZWxlY3RlZEluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkSW5kZXg6IGluZGV4LFxuICAgIH0pO1xuICB9XG5cbiAgX21vdmVTZWxlY3Rpb25Eb3duKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCA8IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkSW5kZXg6IHRoaXMuc3RhdGUuc2VsZWN0ZWRJbmRleCArIDF9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbW92ZVNlbGVjdGlvblRvVG9wKCk7XG4gICAgfVxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgX21vdmVTZWxlY3Rpb25VcChldmVudCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXggPiAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEluZGV4OiB0aGlzLnN0YXRlLnNlbGVjdGVkSW5kZXggLSAxfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21vdmVTZWxlY3Rpb25Ub0JvdHRvbSgpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9tb3ZlU2VsZWN0aW9uVG9Cb3R0b20oZXZlbnQpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtzZWxlY3RlZEluZGV4OiBNYXRoLm1heCh0aGlzLl9pdGVtcy5sZW5ndGggLSAxLCAwKX0pO1xuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgX21vdmVTZWxlY3Rpb25Ub1RvcChldmVudCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NlbGVjdGVkSW5kZXg6IDB9KTtcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIF91cGRhdGVTY3JvbGxQb3NpdGlvbigpIHtcbiAgICBjb25zdCBsaXN0Tm9kZSA9IHRoaXMucmVmcy5zZWxlY3Rpb25MaXN0O1xuICAgIGNvbnN0IHNlbGVjdGVkTm9kZSA9IGxpc3ROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NlbGVjdGVkJylbMF07XG4gICAgc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZChzZWxlY3RlZE5vZGUsIGZhbHNlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQoJ2h5cGVyY2xpY2stc3VnZ2VzdGlvbi1saXN0Jywge1xuICBwcm90b3R5cGU6IFN1Z2dlc3Rpb25MaXN0RWxlbWVudC5wcm90b3R5cGUsXG59KTtcbiJdfQ==