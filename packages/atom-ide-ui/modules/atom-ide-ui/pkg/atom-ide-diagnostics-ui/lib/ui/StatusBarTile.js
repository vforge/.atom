'use strict';

var cov_1mhcp99wkc = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics-ui/lib/ui/StatusBarTile.js',
      hash = '46633235f95d9501614a4d045957dd51e5a02a69',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics-ui/lib/ui/StatusBarTile.js',
    statementMap: {
      '0': {
        start: {
          line: 34,
          column: 28
        },
        end: {
          line: 34,
          column: 33
        }
      },
      '1': {
        start: {
          line: 36,
          column: 29
        },
        end: {
          line: 36,
          column: 32
        }
      },
      '2': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 46,
          column: 41
        }
      },
      '3': {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 50,
          column: 6
        }
      },
      '4': {
        start: {
          line: 51,
          column: 4
        },
        end: {
          line: 51,
          column: 52
        }
      },
      '5': {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 57,
          column: 5
        }
      },
      '6': {
        start: {
          line: 56,
          column: 6
        },
        end: {
          line: 56,
          column: 13
        }
      },
      '7': {
        start: {
          line: 59,
          column: 28
        },
        end: {
          line: 62,
          column: 5
        }
      },
      '8': {
        start: {
          line: 63,
          column: 4
        },
        end: {
          line: 63,
          column: 69
        }
      },
      '9': {
        start: {
          line: 64,
          column: 4
        },
        end: {
          line: 72,
          column: 6
        }
      },
      '10': {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 80,
          column: 5
        }
      },
      '11': {
        start: {
          line: 79,
          column: 6
        },
        end: {
          line: 79,
          column: 13
        }
      },
      '12': {
        start: {
          line: 82,
          column: 18
        },
        end: {
          line: 82,
          column: 60
        }
      },
      '13': {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 36
        }
      },
      '14': {
        start: {
          line: 84,
          column: 4
        },
        end: {
          line: 84,
          column: 19
        }
      },
      '15': {
        start: {
          line: 85,
          column: 4
        },
        end: {
          line: 88,
          column: 7
        }
      },
      '16': {
        start: {
          line: 96,
          column: 21
        },
        end: {
          line: 96,
          column: 22
        }
      },
      '17': {
        start: {
          line: 97,
          column: 23
        },
        end: {
          line: 97,
          column: 24
        }
      },
      '18': {
        start: {
          line: 98,
          column: 4
        },
        end: {
          line: 105,
          column: 5
        }
      },
      '19': {
        start: {
          line: 99,
          column: 6
        },
        end: {
          line: 104,
          column: 7
        }
      },
      '20': {
        start: {
          line: 100,
          column: 8
        },
        end: {
          line: 100,
          column: 21
        }
      },
      '21': {
        start: {
          line: 101,
          column: 13
        },
        end: {
          line: 104,
          column: 7
        }
      },
      '22': {
        start: {
          line: 103,
          column: 8
        },
        end: {
          line: 103,
          column: 23
        }
      },
      '23': {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 109,
          column: 7
        }
      },
      '24': {
        start: {
          line: 112,
          column: 26
        },
        end: {
          line: 112,
          column: 27
        }
      },
      '25': {
        start: {
          line: 113,
          column: 28
        },
        end: {
          line: 113,
          column: 29
        }
      },
      '26': {
        start: {
          line: 114,
          column: 4
        },
        end: {
          line: 117,
          column: 5
        }
      },
      '27': {
        start: {
          line: 115,
          column: 6
        },
        end: {
          line: 115,
          column: 52
        }
      },
      '28': {
        start: {
          line: 116,
          column: 6
        },
        end: {
          line: 116,
          column: 56
        }
      },
      '29': {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 121,
          column: 6
        }
      },
      '30': {
        start: {
          line: 123,
          column: 4
        },
        end: {
          line: 123,
          column: 19
        }
      },
      '31': {
        start: {
          line: 127,
          column: 4
        },
        end: {
          line: 132,
          column: 5
        }
      },
      '32': {
        start: {
          line: 128,
          column: 6
        },
        end: {
          line: 131,
          column: 8
        }
      },
      '33': {
        start: {
          line: 136,
          column: 4
        },
        end: {
          line: 136,
          column: 34
        }
      },
      '34': {
        start: {
          line: 137,
          column: 4
        },
        end: {
          line: 140,
          column: 5
        }
      },
      '35': {
        start: {
          line: 138,
          column: 6
        },
        end: {
          line: 138,
          column: 50
        }
      },
      '36': {
        start: {
          line: 139,
          column: 6
        },
        end: {
          line: 139,
          column: 24
        }
      },
      '37': {
        start: {
          line: 142,
          column: 4
        },
        end: {
          line: 145,
          column: 5
        }
      },
      '38': {
        start: {
          line: 143,
          column: 6
        },
        end: {
          line: 143,
          column: 27
        }
      },
      '39': {
        start: {
          line: 144,
          column: 6
        },
        end: {
          line: 144,
          column: 24
        }
      },
      '40': {
        start: {
          line: 156,
          column: 4
        },
        end: {
          line: 156,
          column: 17
        }
      },
      '41': {
        start: {
          line: 157,
          column: 4
        },
        end: {
          line: 157,
          column: 52
        }
      },
      '42': {
        start: {
          line: 161,
          column: 23
        },
        end: {
          line: 161,
          column: 44
        }
      },
      '43': {
        start: {
          line: 162,
          column: 25
        },
        end: {
          line: 162,
          column: 48
        }
      },
      '44': {
        start: {
          line: 163,
          column: 22
        },
        end: {
          line: 163,
          column: 36
        }
      },
      '45': {
        start: {
          line: 164,
          column: 24
        },
        end: {
          line: 164,
          column: 40
        }
      },
      '46': {
        start: {
          line: 165,
          column: 27
        },
        end: {
          line: 167,
          column: 6
        }
      },
      '47': {
        start: {
          line: 168,
          column: 29
        },
        end: {
          line: 170,
          column: 6
        }
      },
      '48': {
        start: {
          line: 171,
          column: 23
        },
        end: {
          line: 171,
          column: 52
        }
      },
      '49': {
        start: {
          line: 172,
          column: 24
        },
        end: {
          line: 172,
          column: 51
        }
      },
      '50': {
        start: {
          line: 173,
          column: 25
        },
        end: {
          line: 173,
          column: 58
        }
      },
      '51': {
        start: {
          line: 174,
          column: 26
        },
        end: {
          line: 174,
          column: 55
        }
      },
      '52': {
        start: {
          line: 176,
          column: 4
        },
        end: {
          line: 199,
          column: 6
        }
      },
      '53': {
        start: {
          line: 203,
          column: 19
        },
        end: {
          line: 203,
          column: 53
        }
      },
      '54': {
        start: {
          line: 204,
          column: 4
        },
        end: {
          line: 204,
          column: 63
        }
      },
      '55': {
        start: {
          line: 205,
          column: 4
        },
        end: {
          line: 205,
          column: 62
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 45,
            column: 2
          },
          end: {
            line: 45,
            column: 3
          }
        },
        loc: {
          start: {
            line: 45,
            column: 16
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 45
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 54,
            column: 2
          },
          end: {
            line: 54,
            column: 3
          }
        },
        loc: {
          start: {
            line: 54,
            column: 71
          },
          end: {
            line: 73,
            column: 3
          }
        },
        line: 54
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 75,
            column: 3
          }
        },
        loc: {
          start: {
            line: 75,
            column: 52
          },
          end: {
            line: 89,
            column: 3
          }
        },
        line: 75
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 91,
            column: 2
          },
          end: {
            line: 91,
            column: 3
          }
        },
        loc: {
          start: {
            line: 94,
            column: 10
          },
          end: {
            line: 124,
            column: 3
          }
        },
        line: 94
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 126,
            column: 2
          },
          end: {
            line: 126,
            column: 3
          }
        },
        loc: {
          start: {
            line: 126,
            column: 18
          },
          end: {
            line: 133,
            column: 3
          }
        },
        line: 126
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 135,
            column: 2
          },
          end: {
            line: 135,
            column: 3
          }
        },
        loc: {
          start: {
            line: 135,
            column: 12
          },
          end: {
            line: 146,
            column: 3
          }
        },
        line: 135
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 155,
            column: 2
          },
          end: {
            line: 155,
            column: 3
          }
        },
        loc: {
          start: {
            line: 155,
            column: 28
          },
          end: {
            line: 158,
            column: 3
          }
        },
        line: 155
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 160,
            column: 2
          },
          end: {
            line: 160,
            column: 3
          }
        },
        loc: {
          start: {
            line: 160,
            column: 11
          },
          end: {
            line: 200,
            column: 3
          }
        },
        line: 160
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 202,
            column: 2
          },
          end: {
            line: 202,
            column: 3
          }
        },
        loc: {
          start: {
            line: 202,
            column: 19
          },
          end: {
            line: 206,
            column: 3
          }
        },
        line: 202
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 55,
            column: 4
          },
          end: {
            line: 57,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 55,
            column: 4
          },
          end: {
            line: 57,
            column: 5
          }
        }, {
          start: {
            line: 55,
            column: 4
          },
          end: {
            line: 57,
            column: 5
          }
        }],
        line: 55
      },
      '1': {
        loc: {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        }, {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        }],
        line: 76
      },
      '2': {
        loc: {
          start: {
            line: 99,
            column: 6
          },
          end: {
            line: 104,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 99,
            column: 6
          },
          end: {
            line: 104,
            column: 7
          }
        }, {
          start: {
            line: 99,
            column: 6
          },
          end: {
            line: 104,
            column: 7
          }
        }],
        line: 99
      },
      '3': {
        loc: {
          start: {
            line: 101,
            column: 13
          },
          end: {
            line: 104,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 101,
            column: 13
          },
          end: {
            line: 104,
            column: 7
          }
        }, {
          start: {
            line: 101,
            column: 13
          },
          end: {
            line: 104,
            column: 7
          }
        }],
        line: 101
      },
      '4': {
        loc: {
          start: {
            line: 101,
            column: 17
          },
          end: {
            line: 101,
            column: 70
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 101,
            column: 17
          },
          end: {
            line: 101,
            column: 43
          }
        }, {
          start: {
            line: 101,
            column: 47
          },
          end: {
            line: 101,
            column: 70
          }
        }],
        line: 101
      },
      '5': {
        loc: {
          start: {
            line: 127,
            column: 4
          },
          end: {
            line: 132,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 127,
            column: 4
          },
          end: {
            line: 132,
            column: 5
          }
        }, {
          start: {
            line: 127,
            column: 4
          },
          end: {
            line: 132,
            column: 5
          }
        }],
        line: 127
      },
      '6': {
        loc: {
          start: {
            line: 137,
            column: 4
          },
          end: {
            line: 140,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 137,
            column: 4
          },
          end: {
            line: 140,
            column: 5
          }
        }, {
          start: {
            line: 137,
            column: 4
          },
          end: {
            line: 140,
            column: 5
          }
        }],
        line: 137
      },
      '7': {
        loc: {
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 145,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 145,
            column: 5
          }
        }, {
          start: {
            line: 142,
            column: 4
          },
          end: {
            line: 145,
            column: 5
          }
        }],
        line: 142
      },
      '8': {
        loc: {
          start: {
            line: 171,
            column: 23
          },
          end: {
            line: 171,
            column: 52
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 171,
            column: 35
          },
          end: {
            line: 171,
            column: 45
          }
        }, {
          start: {
            line: 171,
            column: 48
          },
          end: {
            line: 171,
            column: 52
          }
        }],
        line: 171
      },
      '9': {
        loc: {
          start: {
            line: 172,
            column: 24
          },
          end: {
            line: 172,
            column: 51
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 172,
            column: 43
          },
          end: {
            line: 172,
            column: 46
          }
        }, {
          start: {
            line: 172,
            column: 49
          },
          end: {
            line: 172,
            column: 51
          }
        }],
        line: 172
      },
      '10': {
        loc: {
          start: {
            line: 173,
            column: 25
          },
          end: {
            line: 173,
            column: 58
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 173,
            column: 39
          },
          end: {
            line: 173,
            column: 51
          }
        }, {
          start: {
            line: 173,
            column: 54
          },
          end: {
            line: 173,
            column: 58
          }
        }],
        line: 173
      },
      '11': {
        loc: {
          start: {
            line: 174,
            column: 26
          },
          end: {
            line: 174,
            column: 55
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 174,
            column: 47
          },
          end: {
            line: 174,
            column: 50
          }
        }, {
          start: {
            line: 174,
            column: 53
          },
          end: {
            line: 174,
            column: 55
          }
        }],
        line: 174
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _addTooltip;

function _load_addTooltip() {
  return _addTooltip = _interopRequireDefault(require('nuclide-commons-ui/addTooltip'));
}

var _Icon;

function _load_Icon() {
  return _Icon = require('nuclide-commons-ui/Icon');
}

var _classnames;

function _load_classnames() {
  return _classnames = _interopRequireDefault(require('classnames'));
}

var _react = _interopRequireWildcard(require('react'));

var _reactDom = _interopRequireDefault(require('react-dom'));

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _analytics;

function _load_analytics() {
  return _analytics = _interopRequireDefault(require('nuclide-commons-atom/analytics'));
}

var _event;

function _load_event() {
  return _event = require('nuclide-commons/event');
}

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Stick this to the left of remote-projects (-99)
const STATUS_BAR_PRIORITY = (cov_1mhcp99wkc.s[0]++, -99.5); /**
                                                             * Copyright (c) 2017-present, Facebook, Inc.
                                                             * All rights reserved.
                                                             *
                                                             * This source code is licensed under the BSD-style license found in the
                                                             * LICENSE file in the root directory of this source tree. An additional grant
                                                             * of patent rights can be found in the PATENTS file in the same directory.
                                                             *
                                                             * 
                                                             * @format
                                                             */

const RENDER_DEBOUNCE_TIME = (cov_1mhcp99wkc.s[1]++, 100);

class StatusBarTile {

  constructor() {
    cov_1mhcp99wkc.f[0]++;
    cov_1mhcp99wkc.s[2]++;

    this._diagnosticUpdaters = new Map();
    cov_1mhcp99wkc.s[3]++;
    this._totalDiagnosticCount = {
      errorCount: 0,
      warningCount: 0
    };
    cov_1mhcp99wkc.s[4]++;
    this._subscriptions = new (_UniversalDisposable || _load_UniversalDisposable()).default();
  }

  consumeDiagnosticUpdates(diagnosticUpdater) {
    cov_1mhcp99wkc.f[1]++;
    cov_1mhcp99wkc.s[5]++;

    if (this._diagnosticUpdaters.has(diagnosticUpdater)) {
      cov_1mhcp99wkc.b[0][0]++;
      cov_1mhcp99wkc.s[6]++;

      return;
    } else {
      cov_1mhcp99wkc.b[0][1]++;
    }

    const diagnosticCount = (cov_1mhcp99wkc.s[7]++, {
      errorCount: 0,
      warningCount: 0
    });
    cov_1mhcp99wkc.s[8]++;
    this._diagnosticUpdaters.set(diagnosticUpdater, diagnosticCount);
    cov_1mhcp99wkc.s[9]++;
    this._subscriptions.add((0, (_event || _load_event()).observableFromSubscribeFunction)(diagnosticUpdater.observeMessages).debounceTime(RENDER_DEBOUNCE_TIME).subscribe(this._onAllMessagesDidUpdate.bind(this, diagnosticUpdater), null, this._onAllMessagesDidUpdate.bind(this, diagnosticUpdater, [])));
  }

  consumeStatusBar(statusBar) {
    cov_1mhcp99wkc.f[2]++;
    cov_1mhcp99wkc.s[10]++;

    if (this._item) {
      cov_1mhcp99wkc.b[1][0]++;
      cov_1mhcp99wkc.s[11]++;

      // Assuming our invariants hold, if this case fires, that means that there is more than one
      // status bar provider, which is weird. For now, we just ignore this case for simplicity.
      return;
    } else {
      cov_1mhcp99wkc.b[1][1]++;
    }

    const item = (cov_1mhcp99wkc.s[12]++, this._item = document.createElement('div'));
    cov_1mhcp99wkc.s[13]++;
    item.className = 'inline-block';
    cov_1mhcp99wkc.s[14]++;
    this._render();
    cov_1mhcp99wkc.s[15]++;
    this._tile = statusBar.addLeftTile({
      item,
      priority: STATUS_BAR_PRIORITY
    });
  }

  _onAllMessagesDidUpdate(diagnosticUpdater, messages) {
    cov_1mhcp99wkc.f[3]++;

    // Update the DiagnosticCount for the updater.
    let errorCount = (cov_1mhcp99wkc.s[16]++, 0);
    let warningCount = (cov_1mhcp99wkc.s[17]++, 0);
    cov_1mhcp99wkc.s[18]++;
    for (const message of messages) {
      cov_1mhcp99wkc.s[19]++;

      if (message.type === 'Error') {
        cov_1mhcp99wkc.b[2][0]++;
        cov_1mhcp99wkc.s[20]++;

        ++errorCount;
      } else {
          cov_1mhcp99wkc.b[2][1]++;
          cov_1mhcp99wkc.s[21]++;
          if ((cov_1mhcp99wkc.b[4][0]++, message.type === 'Warning') || (cov_1mhcp99wkc.b[4][1]++, message.type === 'Info')) {
            cov_1mhcp99wkc.b[3][0]++;
            cov_1mhcp99wkc.s[22]++;

            // TODO: should "Info" messages have their own category?
            ++warningCount;
          } else {
            cov_1mhcp99wkc.b[3][1]++;
          }
        }
    }
    cov_1mhcp99wkc.s[23]++;
    this._diagnosticUpdaters.set(diagnosticUpdater, {
      errorCount,
      warningCount
    });

    // Recalculate the total diagnostic count.
    let totalErrorCount = (cov_1mhcp99wkc.s[24]++, 0);
    let totalWarningCount = (cov_1mhcp99wkc.s[25]++, 0);
    cov_1mhcp99wkc.s[26]++;
    for (const diagnosticCount of this._diagnosticUpdaters.values()) {
      cov_1mhcp99wkc.s[27]++;

      totalErrorCount += diagnosticCount.errorCount;
      cov_1mhcp99wkc.s[28]++;
      totalWarningCount += diagnosticCount.warningCount;
    }
    cov_1mhcp99wkc.s[29]++;
    this._totalDiagnosticCount = {
      errorCount: totalErrorCount,
      warningCount: totalWarningCount
    };

    cov_1mhcp99wkc.s[30]++;
    this._render();
  }

  _render() {
    cov_1mhcp99wkc.f[4]++;
    cov_1mhcp99wkc.s[31]++;

    if (this._item) {
      cov_1mhcp99wkc.b[5][0]++;
      cov_1mhcp99wkc.s[32]++;

      _reactDom.default.render(_react.createElement(StatusBarTileComponent, this._totalDiagnosticCount), this._item);
    } else {
      cov_1mhcp99wkc.b[5][1]++;
    }
  }

  dispose() {
    cov_1mhcp99wkc.f[5]++;
    cov_1mhcp99wkc.s[33]++;

    this._subscriptions.dispose();
    cov_1mhcp99wkc.s[34]++;
    if (this._item) {
      cov_1mhcp99wkc.b[6][0]++;
      cov_1mhcp99wkc.s[35]++;

      _reactDom.default.unmountComponentAtNode(this._item);
      cov_1mhcp99wkc.s[36]++;
      this._item = null;
    } else {
      cov_1mhcp99wkc.b[6][1]++;
    }

    cov_1mhcp99wkc.s[37]++;
    if (this._tile) {
      cov_1mhcp99wkc.b[7][0]++;
      cov_1mhcp99wkc.s[38]++;

      this._tile.destroy();
      cov_1mhcp99wkc.s[39]++;
      this._tile = null;
    } else {
      cov_1mhcp99wkc.b[7][1]++;
    }
  }
}

exports.default = StatusBarTile;


class StatusBarTileComponent extends _react.Component {
  constructor(props) {
    cov_1mhcp99wkc.f[6]++;
    cov_1mhcp99wkc.s[40]++;

    super(props);
    cov_1mhcp99wkc.s[41]++;
    this._onClick = this._onClick.bind(this);
  }

  render() {
    cov_1mhcp99wkc.f[7]++;

    const errorCount = (cov_1mhcp99wkc.s[42]++, this.props.errorCount);
    const warningCount = (cov_1mhcp99wkc.s[43]++, this.props.warningCount);
    const hasErrors = (cov_1mhcp99wkc.s[44]++, errorCount > 0);
    const hasWarnings = (cov_1mhcp99wkc.s[45]++, warningCount > 0);
    const errorClassName = (cov_1mhcp99wkc.s[46]++, (0, (_classnames || _load_classnames()).default)('diagnostics-status-bar-highlight', {
      'text-error': hasErrors
    }));
    const warningClassName = (cov_1mhcp99wkc.s[47]++, (0, (_classnames || _load_classnames()).default)('diagnostics-status-bar-highlight', {
      'text-warning': hasWarnings
    }));
    const errorLabel = (cov_1mhcp99wkc.s[48]++, hasErrors ? (cov_1mhcp99wkc.b[8][0]++, errorCount) : (cov_1mhcp99wkc.b[8][1]++, 'No'));
    const errorSuffix = (cov_1mhcp99wkc.s[49]++, errorCount !== 1 ? (cov_1mhcp99wkc.b[9][0]++, 's') : (cov_1mhcp99wkc.b[9][1]++, ''));
    const warningLabel = (cov_1mhcp99wkc.s[50]++, hasWarnings ? (cov_1mhcp99wkc.b[10][0]++, warningCount) : (cov_1mhcp99wkc.b[10][1]++, 'No'));
    const warningSuffix = (cov_1mhcp99wkc.s[51]++, warningCount !== 1 ? (cov_1mhcp99wkc.b[11][0]++, 's') : (cov_1mhcp99wkc.b[11][1]++, ''));

    cov_1mhcp99wkc.s[52]++;
    return _react.createElement(
      'span',
      null,
      _react.createElement(
        'a',
        {
          className: errorClassName,
          onClick: this._onClick,
          ref: (0, (_addTooltip || _load_addTooltip()).default)({
            title: `${errorLabel} error${errorSuffix}`,
            placement: 'top'
          }) },
        _react.createElement((_Icon || _load_Icon()).Icon, { icon: 'nuclicon-error' }),
        errorCount
      ),
      _react.createElement(
        'a',
        {
          className: warningClassName,
          onClick: this._onClick,
          ref: (0, (_addTooltip || _load_addTooltip()).default)({
            title: `${warningLabel} warning${warningSuffix}`,
            placement: 'top'
          }) },
        _react.createElement((_Icon || _load_Icon()).Icon, { icon: 'nuclicon-warning' }),
        warningCount
      )
    );
  }

  _onClick() {
    cov_1mhcp99wkc.f[8]++;

    const target = (cov_1mhcp99wkc.s[53]++, atom.views.getView(atom.workspace));
    cov_1mhcp99wkc.s[54]++;
    atom.commands.dispatch(target, 'diagnostics:toggle-table');
    cov_1mhcp99wkc.s[55]++;
    (_analytics || _load_analytics()).default.track('diagnostics-show-table-from-status-bar');
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0YXR1c0JhclRpbGUuanMiXSwibmFtZXMiOlsiU1RBVFVTX0JBUl9QUklPUklUWSIsIlJFTkRFUl9ERUJPVU5DRV9USU1FIiwiU3RhdHVzQmFyVGlsZSIsImNvbnN0cnVjdG9yIiwiX2RpYWdub3N0aWNVcGRhdGVycyIsIk1hcCIsIl90b3RhbERpYWdub3N0aWNDb3VudCIsImVycm9yQ291bnQiLCJ3YXJuaW5nQ291bnQiLCJfc3Vic2NyaXB0aW9ucyIsImNvbnN1bWVEaWFnbm9zdGljVXBkYXRlcyIsImRpYWdub3N0aWNVcGRhdGVyIiwiaGFzIiwiZGlhZ25vc3RpY0NvdW50Iiwic2V0IiwiYWRkIiwib2JzZXJ2ZU1lc3NhZ2VzIiwiZGVib3VuY2VUaW1lIiwic3Vic2NyaWJlIiwiX29uQWxsTWVzc2FnZXNEaWRVcGRhdGUiLCJiaW5kIiwiY29uc3VtZVN0YXR1c0JhciIsInN0YXR1c0JhciIsIl9pdGVtIiwiaXRlbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIl9yZW5kZXIiLCJfdGlsZSIsImFkZExlZnRUaWxlIiwicHJpb3JpdHkiLCJtZXNzYWdlcyIsIm1lc3NhZ2UiLCJ0eXBlIiwidG90YWxFcnJvckNvdW50IiwidG90YWxXYXJuaW5nQ291bnQiLCJ2YWx1ZXMiLCJyZW5kZXIiLCJkaXNwb3NlIiwidW5tb3VudENvbXBvbmVudEF0Tm9kZSIsImRlc3Ryb3kiLCJTdGF0dXNCYXJUaWxlQ29tcG9uZW50IiwiQ29tcG9uZW50IiwicHJvcHMiLCJfb25DbGljayIsImhhc0Vycm9ycyIsImhhc1dhcm5pbmdzIiwiZXJyb3JDbGFzc05hbWUiLCJ3YXJuaW5nQ2xhc3NOYW1lIiwiZXJyb3JMYWJlbCIsImVycm9yU3VmZml4Iiwid2FybmluZ0xhYmVsIiwid2FybmluZ1N1ZmZpeCIsInRpdGxlIiwicGxhY2VtZW50IiwidGFyZ2V0IiwiYXRvbSIsInZpZXdzIiwiZ2V0VmlldyIsIndvcmtzcGFjZSIsImNvbW1hbmRzIiwiZGlzcGF0Y2giLCJ0cmFjayJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QixDQUFkLENBQU47QUFDQSxVQUFNNkMsd0NBQWVMLDBDQUFjdkMsWUFBZCxnQ0FBNkIsSUFBN0IsQ0FBZixDQUFOO0FBQ0EsVUFBTTZDLHlDQUFnQjdDLGlCQUFpQixDQUFqQiwrQkFBcUIsR0FBckIsZ0NBQTJCLEVBQTNCLENBQWhCLENBQU47O0FBZE87QUFnQlAsV0FDRTtBQUFBO0FBQUE7QUFDRTtBQUFBO0FBQUE7QUFDRSxxQkFBV3dDLGNBRGI7QUFFRSxtQkFBUyxLQUFLSCxRQUZoQjtBQUdFLGVBQUssaURBQVc7QUFDZFMsbUJBQVEsR0FBRUosVUFBVyxTQUFRQyxXQUFZLEVBRDNCO0FBRWRJLHVCQUFXO0FBRkcsV0FBWCxDQUhQO0FBT0UsNkRBQU0sTUFBSyxnQkFBWCxHQVBGO0FBUUdoRDtBQVJILE9BREY7QUFXRTtBQUFBO0FBQUE7QUFDRSxxQkFBVzBDLGdCQURiO0FBRUUsbUJBQVMsS0FBS0osUUFGaEI7QUFHRSxlQUFLLGlEQUFXO0FBQ2RTLG1CQUFRLEdBQUVGLFlBQWEsV0FBVUMsYUFBYyxFQURqQztBQUVkRSx1QkFBVztBQUZHLFdBQVgsQ0FIUDtBQU9FLDZEQUFNLE1BQUssa0JBQVgsR0FQRjtBQVFHL0M7QUFSSDtBQVhGLEtBREY7QUF3QkQ7O0FBRURxQyxhQUFpQjtBQUFBOztBQUNmLFVBQU1XLGtDQUFTQyxLQUFLQyxLQUFMLENBQVdDLE9BQVgsQ0FBbUJGLEtBQUtHLFNBQXhCLENBQVQsQ0FBTjtBQURlO0FBRWZILFNBQUtJLFFBQUwsQ0FBY0MsUUFBZCxDQUF1Qk4sTUFBdkIsRUFBK0IsMEJBQS9CO0FBRmU7QUFHZiw4Q0FBVU8sS0FBVixDQUFnQix3Q0FBaEI7QUFDRDtBQXBEeUQiLCJmaWxlIjoiU3RhdHVzQmFyVGlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtcbiAgRGlhZ25vc3RpY1VwZGF0ZXIsXG4gIERpYWdub3N0aWNNZXNzYWdlLFxufSBmcm9tICcuLi8uLi8uLi9hdG9tLWlkZS1kaWFnbm9zdGljcy9saWIvdHlwZXMnO1xuXG5pbXBvcnQgYWRkVG9vbHRpcCBmcm9tICdudWNsaWRlLWNvbW1vbnMtdWkvYWRkVG9vbHRpcCc7XG5pbXBvcnQge0ljb259IGZyb20gJ251Y2xpZGUtY29tbW9ucy11aS9JY29uJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5cbmltcG9ydCBVbml2ZXJzYWxEaXNwb3NhYmxlIGZyb20gJ251Y2xpZGUtY29tbW9ucy9Vbml2ZXJzYWxEaXNwb3NhYmxlJztcbmltcG9ydCBhbmFseXRpY3MgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vYW5hbHl0aWNzJztcbmltcG9ydCB7b2JzZXJ2YWJsZUZyb21TdWJzY3JpYmVGdW5jdGlvbn0gZnJvbSAnbnVjbGlkZS1jb21tb25zL2V2ZW50JztcblxudHlwZSBEaWFnbm9zdGljQ291bnQgPSB7XG4gIGVycm9yQ291bnQ6IG51bWJlcixcbiAgd2FybmluZ0NvdW50OiBudW1iZXIsXG59O1xuXG4vLyBTdGljayB0aGlzIHRvIHRoZSBsZWZ0IG9mIHJlbW90ZS1wcm9qZWN0cyAoLTk5KVxuY29uc3QgU1RBVFVTX0JBUl9QUklPUklUWSA9IC05OS41O1xuXG5jb25zdCBSRU5ERVJfREVCT1VOQ0VfVElNRSA9IDEwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdHVzQmFyVGlsZSB7XG4gIF9kaWFnbm9zdGljVXBkYXRlcnM6IE1hcDxEaWFnbm9zdGljVXBkYXRlciwgRGlhZ25vc3RpY0NvdW50PjtcbiAgX3RvdGFsRGlhZ25vc3RpY0NvdW50OiBEaWFnbm9zdGljQ291bnQ7XG4gIF9zdWJzY3JpcHRpb25zOiBVbml2ZXJzYWxEaXNwb3NhYmxlO1xuICBfdGlsZTogP2F0b20kU3RhdHVzQmFyVGlsZTtcbiAgX2l0ZW06ID9IVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9kaWFnbm9zdGljVXBkYXRlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fdG90YWxEaWFnbm9zdGljQ291bnQgPSB7XG4gICAgICBlcnJvckNvdW50OiAwLFxuICAgICAgd2FybmluZ0NvdW50OiAwLFxuICAgIH07XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKCk7XG4gIH1cblxuICBjb25zdW1lRGlhZ25vc3RpY1VwZGF0ZXMoZGlhZ25vc3RpY1VwZGF0ZXI6IERpYWdub3N0aWNVcGRhdGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2RpYWdub3N0aWNVcGRhdGVycy5oYXMoZGlhZ25vc3RpY1VwZGF0ZXIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGlhZ25vc3RpY0NvdW50ID0ge1xuICAgICAgZXJyb3JDb3VudDogMCxcbiAgICAgIHdhcm5pbmdDb3VudDogMCxcbiAgICB9O1xuICAgIHRoaXMuX2RpYWdub3N0aWNVcGRhdGVycy5zZXQoZGlhZ25vc3RpY1VwZGF0ZXIsIGRpYWdub3N0aWNDb3VudCk7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5hZGQoXG4gICAgICBvYnNlcnZhYmxlRnJvbVN1YnNjcmliZUZ1bmN0aW9uKGRpYWdub3N0aWNVcGRhdGVyLm9ic2VydmVNZXNzYWdlcylcbiAgICAgICAgLmRlYm91bmNlVGltZShSRU5ERVJfREVCT1VOQ0VfVElNRSlcbiAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICB0aGlzLl9vbkFsbE1lc3NhZ2VzRGlkVXBkYXRlLmJpbmQodGhpcywgZGlhZ25vc3RpY1VwZGF0ZXIpLFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgdGhpcy5fb25BbGxNZXNzYWdlc0RpZFVwZGF0ZS5iaW5kKHRoaXMsIGRpYWdub3N0aWNVcGRhdGVyLCBbXSksXG4gICAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN1bWVTdGF0dXNCYXIoc3RhdHVzQmFyOiBhdG9tJFN0YXR1c0Jhcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pdGVtKSB7XG4gICAgICAvLyBBc3N1bWluZyBvdXIgaW52YXJpYW50cyBob2xkLCBpZiB0aGlzIGNhc2UgZmlyZXMsIHRoYXQgbWVhbnMgdGhhdCB0aGVyZSBpcyBtb3JlIHRoYW4gb25lXG4gICAgICAvLyBzdGF0dXMgYmFyIHByb3ZpZGVyLCB3aGljaCBpcyB3ZWlyZC4gRm9yIG5vdywgd2UganVzdCBpZ25vcmUgdGhpcyBjYXNlIGZvciBzaW1wbGljaXR5LlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW0gPSAodGhpcy5faXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICBpdGVtLmNsYXNzTmFtZSA9ICdpbmxpbmUtYmxvY2snO1xuICAgIHRoaXMuX3JlbmRlcigpO1xuICAgIHRoaXMuX3RpbGUgPSBzdGF0dXNCYXIuYWRkTGVmdFRpbGUoe1xuICAgICAgaXRlbSxcbiAgICAgIHByaW9yaXR5OiBTVEFUVVNfQkFSX1BSSU9SSVRZLFxuICAgIH0pO1xuICB9XG5cbiAgX29uQWxsTWVzc2FnZXNEaWRVcGRhdGUoXG4gICAgZGlhZ25vc3RpY1VwZGF0ZXI6IERpYWdub3N0aWNVcGRhdGVyLFxuICAgIG1lc3NhZ2VzOiBBcnJheTxEaWFnbm9zdGljTWVzc2FnZT4sXG4gICk6IHZvaWQge1xuICAgIC8vIFVwZGF0ZSB0aGUgRGlhZ25vc3RpY0NvdW50IGZvciB0aGUgdXBkYXRlci5cbiAgICBsZXQgZXJyb3JDb3VudCA9IDA7XG4gICAgbGV0IHdhcm5pbmdDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnRXJyb3InKSB7XG4gICAgICAgICsrZXJyb3JDb3VudDtcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnV2FybmluZycgfHwgbWVzc2FnZS50eXBlID09PSAnSW5mbycpIHtcbiAgICAgICAgLy8gVE9ETzogc2hvdWxkIFwiSW5mb1wiIG1lc3NhZ2VzIGhhdmUgdGhlaXIgb3duIGNhdGVnb3J5P1xuICAgICAgICArK3dhcm5pbmdDb3VudDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fZGlhZ25vc3RpY1VwZGF0ZXJzLnNldChkaWFnbm9zdGljVXBkYXRlciwge1xuICAgICAgZXJyb3JDb3VudCxcbiAgICAgIHdhcm5pbmdDb3VudCxcbiAgICB9KTtcblxuICAgIC8vIFJlY2FsY3VsYXRlIHRoZSB0b3RhbCBkaWFnbm9zdGljIGNvdW50LlxuICAgIGxldCB0b3RhbEVycm9yQ291bnQgPSAwO1xuICAgIGxldCB0b3RhbFdhcm5pbmdDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBkaWFnbm9zdGljQ291bnQgb2YgdGhpcy5fZGlhZ25vc3RpY1VwZGF0ZXJzLnZhbHVlcygpKSB7XG4gICAgICB0b3RhbEVycm9yQ291bnQgKz0gZGlhZ25vc3RpY0NvdW50LmVycm9yQ291bnQ7XG4gICAgICB0b3RhbFdhcm5pbmdDb3VudCArPSBkaWFnbm9zdGljQ291bnQud2FybmluZ0NvdW50O1xuICAgIH1cbiAgICB0aGlzLl90b3RhbERpYWdub3N0aWNDb3VudCA9IHtcbiAgICAgIGVycm9yQ291bnQ6IHRvdGFsRXJyb3JDb3VudCxcbiAgICAgIHdhcm5pbmdDb3VudDogdG90YWxXYXJuaW5nQ291bnQsXG4gICAgfTtcblxuICAgIHRoaXMuX3JlbmRlcigpO1xuICB9XG5cbiAgX3JlbmRlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXRlbSkge1xuICAgICAgUmVhY3RET00ucmVuZGVyKFxuICAgICAgICA8U3RhdHVzQmFyVGlsZUNvbXBvbmVudCB7Li4udGhpcy5fdG90YWxEaWFnbm9zdGljQ291bnR9IC8+LFxuICAgICAgICB0aGlzLl9pdGVtLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMuZGlzcG9zZSgpO1xuICAgIGlmICh0aGlzLl9pdGVtKSB7XG4gICAgICBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMuX2l0ZW0pO1xuICAgICAgdGhpcy5faXRlbSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RpbGUpIHtcbiAgICAgIHRoaXMuX3RpbGUuZGVzdHJveSgpO1xuICAgICAgdGhpcy5fdGlsZSA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGVycm9yQ291bnQ6IG51bWJlcixcbiAgd2FybmluZ0NvdW50OiBudW1iZXIsXG59O1xuXG5jbGFzcyBTdGF0dXNCYXJUaWxlQ29tcG9uZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICAodGhpczogYW55KS5fb25DbGljayA9IHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBlcnJvckNvdW50ID0gdGhpcy5wcm9wcy5lcnJvckNvdW50O1xuICAgIGNvbnN0IHdhcm5pbmdDb3VudCA9IHRoaXMucHJvcHMud2FybmluZ0NvdW50O1xuICAgIGNvbnN0IGhhc0Vycm9ycyA9IGVycm9yQ291bnQgPiAwO1xuICAgIGNvbnN0IGhhc1dhcm5pbmdzID0gd2FybmluZ0NvdW50ID4gMDtcbiAgICBjb25zdCBlcnJvckNsYXNzTmFtZSA9IGNsYXNzbmFtZXMoJ2RpYWdub3N0aWNzLXN0YXR1cy1iYXItaGlnaGxpZ2h0Jywge1xuICAgICAgJ3RleHQtZXJyb3InOiBoYXNFcnJvcnMsXG4gICAgfSk7XG4gICAgY29uc3Qgd2FybmluZ0NsYXNzTmFtZSA9IGNsYXNzbmFtZXMoJ2RpYWdub3N0aWNzLXN0YXR1cy1iYXItaGlnaGxpZ2h0Jywge1xuICAgICAgJ3RleHQtd2FybmluZyc6IGhhc1dhcm5pbmdzLFxuICAgIH0pO1xuICAgIGNvbnN0IGVycm9yTGFiZWwgPSBoYXNFcnJvcnMgPyBlcnJvckNvdW50IDogJ05vJztcbiAgICBjb25zdCBlcnJvclN1ZmZpeCA9IGVycm9yQ291bnQgIT09IDEgPyAncycgOiAnJztcbiAgICBjb25zdCB3YXJuaW5nTGFiZWwgPSBoYXNXYXJuaW5ncyA/IHdhcm5pbmdDb3VudCA6ICdObyc7XG4gICAgY29uc3Qgd2FybmluZ1N1ZmZpeCA9IHdhcm5pbmdDb3VudCAhPT0gMSA/ICdzJyA6ICcnO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuPlxuICAgICAgICA8YVxuICAgICAgICAgIGNsYXNzTmFtZT17ZXJyb3JDbGFzc05hbWV9XG4gICAgICAgICAgb25DbGljaz17dGhpcy5fb25DbGlja31cbiAgICAgICAgICByZWY9e2FkZFRvb2x0aXAoe1xuICAgICAgICAgICAgdGl0bGU6IGAke2Vycm9yTGFiZWx9IGVycm9yJHtlcnJvclN1ZmZpeH1gLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAndG9wJyxcbiAgICAgICAgICB9KX0+XG4gICAgICAgICAgPEljb24gaWNvbj1cIm51Y2xpY29uLWVycm9yXCIgLz5cbiAgICAgICAgICB7ZXJyb3JDb3VudH1cbiAgICAgICAgPC9hPlxuICAgICAgICA8YVxuICAgICAgICAgIGNsYXNzTmFtZT17d2FybmluZ0NsYXNzTmFtZX1cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkNsaWNrfVxuICAgICAgICAgIHJlZj17YWRkVG9vbHRpcCh7XG4gICAgICAgICAgICB0aXRsZTogYCR7d2FybmluZ0xhYmVsfSB3YXJuaW5nJHt3YXJuaW5nU3VmZml4fWAsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgICAgICAgIH0pfT5cbiAgICAgICAgICA8SWNvbiBpY29uPVwibnVjbGljb24td2FybmluZ1wiIC8+XG4gICAgICAgICAge3dhcm5pbmdDb3VudH1cbiAgICAgICAgPC9hPlxuICAgICAgPC9zcGFuPlxuICAgICk7XG4gIH1cblxuICBfb25DbGljaygpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBhdG9tLnZpZXdzLmdldFZpZXcoYXRvbS53b3Jrc3BhY2UpO1xuICAgIGF0b20uY29tbWFuZHMuZGlzcGF0Y2godGFyZ2V0LCAnZGlhZ25vc3RpY3M6dG9nZ2xlLXRhYmxlJyk7XG4gICAgYW5hbHl0aWNzLnRyYWNrKCdkaWFnbm9zdGljcy1zaG93LXRhYmxlLWZyb20tc3RhdHVzLWJhcicpO1xuICB9XG59XG4iXX0=