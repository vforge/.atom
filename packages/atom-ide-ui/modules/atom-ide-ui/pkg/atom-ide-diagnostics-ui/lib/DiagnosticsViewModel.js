'use strict';

var cov_1uz0b9m24c = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics-ui/lib/DiagnosticsViewModel.js',
      hash = '338df0ab7615fdf0e42d6deefa5cc776c7b8d582',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-diagnostics-ui/lib/DiagnosticsViewModel.js',
    statementMap: {
      '0': {
        start: {
          line: 51,
          column: 34
        },
        end: {
          line: 51,
          column: 62
        }
      },
      '1': {
        start: {
          line: 60,
          column: 31
        },
        end: {
          line: 60,
          column: 58
        }
      },
      '2': {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 66,
          column: 7
        }
      },
      '3': {
        start: {
          line: 67,
          column: 23
        },
        end: {
          line: 67,
          column: 77
        }
      },
      '4': {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 76,
          column: 6
        }
      },
      '5': {
        start: {
          line: 74,
          column: 10
        },
        end: {
          line: 74,
          column: 52
        }
      },
      '6': {
        start: {
          line: 80,
          column: 18
        },
        end: {
          line: 97,
          column: 5
        }
      },
      '7': {
        start: {
          line: 83,
          column: 39
        },
        end: {
          line: 96,
          column: 7
        }
      },
      '8': {
        start: {
          line: 100,
          column: 4
        },
        end: {
          line: 100,
          column: 44
        }
      },
      '9': {
        start: {
          line: 104,
          column: 4
        },
        end: {
          line: 104,
          column: 32
        }
      },
      '10': {
        start: {
          line: 108,
          column: 4
        },
        end: {
          line: 108,
          column: 25
        }
      },
      '11': {
        start: {
          line: 112,
          column: 4
        },
        end: {
          line: 112,
          column: 17
        }
      },
      '12': {
        start: {
          line: 116,
          column: 4
        },
        end: {
          line: 116,
          column: 30
        }
      },
      '13': {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 120,
          column: 20
        }
      },
      '14': {
        start: {
          line: 124,
          column: 27
        },
        end: {
          line: 124,
          column: 44
        }
      },
      '15': {
        start: {
          line: 125,
          column: 4
        },
        end: {
          line: 130,
          column: 6
        }
      },
      '16': {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 139,
          column: 5
        }
      },
      '17': {
        start: {
          line: 135,
          column: 24
        },
        end: {
          line: 135,
          column: 75
        }
      },
      '18': {
        start: {
          line: 136,
          column: 22
        },
        end: {
          line: 136,
          column: 52
        }
      },
      '19': {
        start: {
          line: 137,
          column: 6
        },
        end: {
          line: 137,
          column: 46
        }
      },
      '20': {
        start: {
          line: 138,
          column: 6
        },
        end: {
          line: 138,
          column: 30
        }
      },
      '21': {
        start: {
          line: 140,
          column: 4
        },
        end: {
          line: 140,
          column: 25
        }
      },
      '22': {
        start: {
          line: 147,
          column: 27
        },
        end: {
          line: 147,
          column: 44
        }
      },
      '23': {
        start: {
          line: 148,
          column: 19
        },
        end: {
          line: 148,
          column: 41
        }
      },
      '24': {
        start: {
          line: 149,
          column: 28
        },
        end: {
          line: 149,
          column: 49
        }
      },
      '25': {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 154,
          column: 5
        }
      },
      '26': {
        start: {
          line: 151,
          column: 6
        },
        end: {
          line: 151,
          column: 35
        }
      },
      '27': {
        start: {
          line: 153,
          column: 6
        },
        end: {
          line: 153,
          column: 32
        }
      },
      '28': {
        start: {
          line: 155,
          column: 4
        },
        end: {
          line: 155,
          column: 58
        }
      },
      '29': {
        start: {
          line: 159,
          column: 29
        },
        end: {
          line: 159,
          column: 34
        }
      },
      '30': {
        start: {
          line: 161,
          column: 31
        },
        end: {
          line: 161,
          column: 63
        }
      },
      '31': {
        start: {
          line: 162,
          column: 4
        },
        end: {
          line: 164,
          column: 7
        }
      },
      '32': {
        start: {
          line: 173,
          column: 4
        },
        end: {
          line: 186,
          column: 7
        }
      },
      '33': {
        start: {
          line: 174,
          column: 6
        },
        end: {
          line: 176,
          column: 7
        }
      },
      '34': {
        start: {
          line: 175,
          column: 8
        },
        end: {
          line: 175,
          column: 21
        }
      },
      '35': {
        start: {
          line: 177,
          column: 6
        },
        end: {
          line: 179,
          column: 7
        }
      },
      '36': {
        start: {
          line: 178,
          column: 8
        },
        end: {
          line: 178,
          column: 20
        }
      },
      '37': {
        start: {
          line: 180,
          column: 6
        },
        end: {
          line: 185,
          column: 8
        }
      },
      '38': {
        start: {
          line: 190,
          column: 4
        },
        end: {
          line: 190,
          column: 53
        }
      },
      '39': {
        start: {
          line: 198,
          column: 2
        },
        end: {
          line: 200,
          column: 3
        }
      },
      '40': {
        start: {
          line: 199,
          column: 4
        },
        end: {
          line: 199,
          column: 11
        }
      },
      '41': {
        start: {
          line: 202,
          column: 2
        },
        end: {
          line: 202,
          column: 53
        }
      },
      '42': {
        start: {
          line: 204,
          column: 14
        },
        end: {
          line: 204,
          column: 30
        }
      },
      '43': {
        start: {
          line: 207,
          column: 15
        },
        end: {
          line: 207,
          column: 71
        }
      },
      '44': {
        start: {
          line: 208,
          column: 17
        },
        end: {
          line: 208,
          column: 18
        }
      },
      '45': {
        start: {
          line: 209,
          column: 2
        },
        end: {
          line: 214,
          column: 5
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 59,
            column: 3
          }
        },
        loc: {
          start: {
            line: 59,
            column: 57
          },
          end: {
            line: 101,
            column: 3
          }
        },
        line: 59
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 73,
            column: 19
          },
          end: {
            line: 73,
            column: 20
          }
        },
        loc: {
          start: {
            line: 73,
            column: 25
          },
          end: {
            line: 75,
            column: 9
          }
        },
        line: 73
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 83,
            column: 6
          },
          end: {
            line: 83,
            column: 7
          }
        },
        loc: {
          start: {
            line: 83,
            column: 39
          },
          end: {
            line: 96,
            column: 7
          }
        },
        line: 83
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 103,
            column: 2
          },
          end: {
            line: 103,
            column: 3
          }
        },
        loc: {
          start: {
            line: 103,
            column: 18
          },
          end: {
            line: 105,
            column: 3
          }
        },
        line: 103
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 107,
            column: 2
          },
          end: {
            line: 107,
            column: 3
          }
        },
        loc: {
          start: {
            line: 107,
            column: 21
          },
          end: {
            line: 109,
            column: 3
          }
        },
        line: 107
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 111,
            column: 2
          },
          end: {
            line: 111,
            column: 3
          }
        },
        loc: {
          start: {
            line: 111,
            column: 26
          },
          end: {
            line: 113,
            column: 3
          }
        },
        line: 111
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 115,
            column: 2
          },
          end: {
            line: 115,
            column: 3
          }
        },
        loc: {
          start: {
            line: 115,
            column: 19
          },
          end: {
            line: 117,
            column: 3
          }
        },
        line: 115
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 119,
            column: 2
          },
          end: {
            line: 119,
            column: 3
          }
        },
        loc: {
          start: {
            line: 119,
            column: 31
          },
          end: {
            line: 121,
            column: 3
          }
        },
        line: 119
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 123,
            column: 2
          },
          end: {
            line: 123,
            column: 3
          }
        },
        loc: {
          start: {
            line: 123,
            column: 46
          },
          end: {
            line: 131,
            column: 3
          }
        },
        line: 123
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 133,
            column: 2
          },
          end: {
            line: 133,
            column: 3
          }
        },
        loc: {
          start: {
            line: 133,
            column: 28
          },
          end: {
            line: 141,
            column: 3
          }
        },
        line: 133
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 146,
            column: 28
          },
          end: {
            line: 146,
            column: 29
          }
        },
        loc: {
          start: {
            line: 146,
            column: 61
          },
          end: {
            line: 156,
            column: 3
          }
        },
        line: 146
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 158,
            column: 28
          },
          end: {
            line: 158,
            column: 29
          }
        },
        loc: {
          start: {
            line: 158,
            column: 65
          },
          end: {
            line: 165,
            column: 3
          }
        },
        line: 158
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 168,
            column: 2
          },
          end: {
            line: 168,
            column: 3
          }
        },
        loc: {
          start: {
            line: 172,
            column: 30
          },
          end: {
            line: 187,
            column: 3
          }
        },
        line: 172
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 173,
            column: 30
          },
          end: {
            line: 173,
            column: 31
          }
        },
        loc: {
          start: {
            line: 173,
            column: 41
          },
          end: {
            line: 186,
            column: 5
          }
        },
        line: 173
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 189,
            column: 19
          },
          end: {
            line: 189,
            column: 20
          }
        },
        loc: {
          start: {
            line: 189,
            column: 57
          },
          end: {
            line: 191,
            column: 3
          }
        },
        line: 189
      },
      '15': {
        name: 'goToDiagnosticLocation',
        decl: {
          start: {
            line: 194,
            column: 9
          },
          end: {
            line: 194,
            column: 31
          }
        },
        loc: {
          start: {
            line: 197,
            column: 8
          },
          end: {
            line: 215,
            column: 1
          }
        },
        line: 197
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 139,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 139,
            column: 5
          }
        }, {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 139,
            column: 5
          }
        }],
        line: 134
      },
      '1': {
        loc: {
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 154,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 154,
            column: 5
          }
        }, {
          start: {
            line: 150,
            column: 4
          },
          end: {
            line: 154,
            column: 5
          }
        }],
        line: 150
      },
      '2': {
        loc: {
          start: {
            line: 174,
            column: 6
          },
          end: {
            line: 176,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 174,
            column: 6
          },
          end: {
            line: 176,
            column: 7
          }
        }, {
          start: {
            line: 174,
            column: 6
          },
          end: {
            line: 176,
            column: 7
          }
        }],
        line: 174
      },
      '3': {
        loc: {
          start: {
            line: 177,
            column: 6
          },
          end: {
            line: 179,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 177,
            column: 6
          },
          end: {
            line: 179,
            column: 7
          }
        }, {
          start: {
            line: 177,
            column: 6
          },
          end: {
            line: 179,
            column: 7
          }
        }],
        line: 177
      },
      '4': {
        loc: {
          start: {
            line: 181,
            column: 8
          },
          end: {
            line: 184,
            column: 68
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 181,
            column: 9
          },
          end: {
            line: 181,
            column: 29
          }
        }, {
          start: {
            line: 181,
            column: 33
          },
          end: {
            line: 181,
            column: 59
          }
        }, {
          start: {
            line: 182,
            column: 9
          },
          end: {
            line: 182,
            column: 29
          }
        }, {
          start: {
            line: 182,
            column: 33
          },
          end: {
            line: 182,
            column: 59
          }
        }, {
          start: {
            line: 183,
            column: 8
          },
          end: {
            line: 183,
            column: 42
          }
        }, {
          start: {
            line: 184,
            column: 9
          },
          end: {
            line: 184,
            column: 33
          }
        }, {
          start: {
            line: 184,
            column: 37
          },
          end: {
            line: 184,
            column: 67
          }
        }],
        line: 181
      },
      '5': {
        loc: {
          start: {
            line: 198,
            column: 2
          },
          end: {
            line: 200,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 198,
            column: 2
          },
          end: {
            line: 200,
            column: 3
          }
        }, {
          start: {
            line: 198,
            column: 2
          },
          end: {
            line: 200,
            column: 3
          }
        }],
        line: 198
      },
      '6': {
        loc: {
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 198,
            column: 58
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 198,
            column: 6
          },
          end: {
            line: 198,
            column: 30
          }
        }, {
          start: {
            line: 198,
            column: 34
          },
          end: {
            line: 198,
            column: 58
          }
        }],
        line: 198
      },
      '7': {
        loc: {
          start: {
            line: 207,
            column: 24
          },
          end: {
            line: 207,
            column: 67
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 207,
            column: 40
          },
          end: {
            line: 207,
            column: 63
          }
        }, {
          start: {
            line: 207,
            column: 66
          },
          end: {
            line: 207,
            column: 67
          }
        }],
        line: 207
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0, 0, 0, 0, 0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DiagnosticsViewModel = exports.WORKSPACE_VIEW_URI = undefined;

var _goToLocation;

function _load_goToLocation() {
  return _goToLocation = require('nuclide-commons-atom/go-to-location');
}

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _react = _interopRequireDefault(require('react'));

var _analytics;

function _load_analytics() {
  return _analytics = _interopRequireDefault(require('nuclide-commons-atom/analytics'));
}

var _Model;

function _load_Model() {
  return _Model = _interopRequireDefault(require('nuclide-commons/Model'));
}

var _observePaneItemVisibility;

function _load_observePaneItemVisibility() {
  return _observePaneItemVisibility = _interopRequireDefault(require('nuclide-commons-atom/observePaneItemVisibility'));
}

var _renderReactRoot;

function _load_renderReactRoot() {
  return _renderReactRoot = require('nuclide-commons-ui/renderReactRoot');
}

var _observable;

function _load_observable() {
  return _observable = require('nuclide-commons/observable');
}

var _bindObservableAsProps;

function _load_bindObservableAsProps() {
  return _bindObservableAsProps = require('nuclide-commons-ui/bindObservableAsProps');
}

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

var _RegExpFilter;

function _load_RegExpFilter() {
  return _RegExpFilter = require('nuclide-commons-ui/RegExpFilter');
}

var _GroupUtils;

function _load_GroupUtils() {
  return _GroupUtils = _interopRequireWildcard(require('./GroupUtils'));
}

var _DiagnosticsView;

function _load_DiagnosticsView() {
  return _DiagnosticsView = _interopRequireDefault(require('./ui/DiagnosticsView'));
}

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

const WORKSPACE_VIEW_URI = exports.WORKSPACE_VIEW_URI = (cov_1uz0b9m24c.s[0]++, 'atom://nuclide/diagnostics');

class DiagnosticsViewModel {

  constructor(globalStates) {
    _initialiseProps.call(this);

    cov_1uz0b9m24c.f[0]++;

    const { pattern, invalid } = (cov_1uz0b9m24c.s[1]++, (0, (_RegExpFilter || _load_RegExpFilter()).getFilterPattern)('', false));
    cov_1uz0b9m24c.s[2]++;
    this._model = new (_Model || _load_Model()).default({
      // TODO: Get this from constructor/serialization.
      hiddenGroups: new Set(),
      textFilter: { text: '', isRegExp: false, pattern, invalid },
      selectedMessage: null
    });
    const visibility = (cov_1uz0b9m24c.s[3]++, (0, (_observePaneItemVisibility || _load_observePaneItemVisibility()).default)(this).distinctUntilChanged());
    cov_1uz0b9m24c.s[4]++;
    this._disposables = new (_UniversalDisposable || _load_UniversalDisposable()).default(visibility.debounceTime(1000).distinctUntilChanged().filter(Boolean).subscribe(() => {
      cov_1uz0b9m24c.f[1]++;
      cov_1uz0b9m24c.s[5]++;

      (_analytics || _load_analytics()).default.track('diagnostics-show-table');
    }));

    // Combine the state that's shared between instances, the state that's unique to this instance,
    // and unchanging callbacks, to get the props for our component.
    const props = (cov_1uz0b9m24c.s[6]++, _rxjsBundlesRxMinJs.Observable.combineLatest(globalStates, this._model.toObservable(), (globalState, instanceState) => {
      cov_1uz0b9m24c.f[2]++;
      cov_1uz0b9m24c.s[7]++;
      return Object.assign({}, globalState, instanceState, {
        diagnostics: this._filterDiagnostics(globalState.diagnostics, instanceState.textFilter.pattern, instanceState.hiddenGroups),
        onTypeFilterChange: this._handleTypeFilterChange,
        onTextFilterChange: this._handleTextFilterChange,
        selectMessage: this._selectMessage,
        gotoMessageLocation: goToDiagnosticLocation,
        supportedMessageKinds: globalState.supportedMessageKinds
      });
    }));

    // "Mute" the props stream when the view is hidden so we don't do unnecessary updates.
    cov_1uz0b9m24c.s[8]++;
    this._props = (0, (_observable || _load_observable()).toggle)(props, visibility);
  }

  destroy() {
    cov_1uz0b9m24c.f[3]++;
    cov_1uz0b9m24c.s[9]++;

    this._disposables.dispose();
  }

  getTitle() {
    cov_1uz0b9m24c.f[4]++;
    cov_1uz0b9m24c.s[10]++;

    return 'Diagnostics';
  }

  getIconName() {
    cov_1uz0b9m24c.f[5]++;
    cov_1uz0b9m24c.s[11]++;

    return 'law';
  }

  getURI() {
    cov_1uz0b9m24c.f[6]++;
    cov_1uz0b9m24c.s[12]++;

    return WORKSPACE_VIEW_URI;
  }

  getDefaultLocation() {
    cov_1uz0b9m24c.f[7]++;
    cov_1uz0b9m24c.s[13]++;

    return 'bottom';
  }

  serialize() {
    cov_1uz0b9m24c.f[8]++;

    const { hiddenGroups } = (cov_1uz0b9m24c.s[14]++, this._model.state);
    cov_1uz0b9m24c.s[15]++;
    return {
      deserializer: 'atom-ide-ui.DiagnosticsViewModel',
      state: {
        hiddenGroups: [...hiddenGroups]
      }
    };
  }

  getElement() {
    cov_1uz0b9m24c.f[9]++;
    cov_1uz0b9m24c.s[16]++;

    if (this._element == null) {
      cov_1uz0b9m24c.b[0][0]++;

      const Component = (cov_1uz0b9m24c.s[17]++, (0, (_bindObservableAsProps || _load_bindObservableAsProps()).bindObservableAsProps)(this._props, (_DiagnosticsView || _load_DiagnosticsView()).default));
      const element = (cov_1uz0b9m24c.s[18]++, (0, (_renderReactRoot || _load_renderReactRoot()).renderReactRoot)(_react.default.createElement(Component, null)));
      cov_1uz0b9m24c.s[19]++;
      element.classList.add('diagnostics-ui');
      cov_1uz0b9m24c.s[20]++;
      this._element = element;
    } else {
      cov_1uz0b9m24c.b[0][1]++;
    }
    cov_1uz0b9m24c.s[21]++;
    return this._element;
  }

  /**
   * Toggle the filter.
   */


  // TODO: Memoize this.
  _filterDiagnostics(diagnostics, pattern, hiddenGroups) {
    cov_1uz0b9m24c.f[12]++;
    cov_1uz0b9m24c.s[32]++;

    return diagnostics.filter(message => {
      cov_1uz0b9m24c.f[13]++;
      cov_1uz0b9m24c.s[33]++;

      if (hiddenGroups.has((_GroupUtils || _load_GroupUtils()).getGroup(message))) {
        cov_1uz0b9m24c.b[2][0]++;
        cov_1uz0b9m24c.s[34]++;

        return false;
      } else {
        cov_1uz0b9m24c.b[2][1]++;
      }
      cov_1uz0b9m24c.s[35]++;
      if (pattern == null) {
        cov_1uz0b9m24c.b[3][0]++;
        cov_1uz0b9m24c.s[36]++;

        return true;
      } else {
        cov_1uz0b9m24c.b[3][1]++;
      }
      cov_1uz0b9m24c.s[37]++;
      return (cov_1uz0b9m24c.b[4][0]++, message.text != null) && (cov_1uz0b9m24c.b[4][1]++, pattern.test(message.text)) || (cov_1uz0b9m24c.b[4][2]++, message.html != null) && (cov_1uz0b9m24c.b[4][3]++, pattern.test(message.html)) || (cov_1uz0b9m24c.b[4][4]++, pattern.test(message.providerName)) || (cov_1uz0b9m24c.b[4][5]++, message.scope === 'file') && (cov_1uz0b9m24c.b[4][6]++, pattern.test(message.filePath));
    });
  }

}

exports.DiagnosticsViewModel = DiagnosticsViewModel;

var _initialiseProps = function () {
  this._handleTypeFilterChange = type => {
    cov_1uz0b9m24c.f[10]++;

    const { hiddenGroups } = (cov_1uz0b9m24c.s[22]++, this._model.state);
    const hidden = (cov_1uz0b9m24c.s[23]++, hiddenGroups.has(type));
    const nextHiddenTypes = (cov_1uz0b9m24c.s[24]++, new Set(hiddenGroups));
    cov_1uz0b9m24c.s[25]++;
    if (hidden) {
      cov_1uz0b9m24c.b[1][0]++;
      cov_1uz0b9m24c.s[26]++;

      nextHiddenTypes.delete(type);
    } else {
      cov_1uz0b9m24c.b[1][1]++;
      cov_1uz0b9m24c.s[27]++;

      nextHiddenTypes.add(type);
    }
    cov_1uz0b9m24c.s[28]++;
    this._model.setState({ hiddenGroups: nextHiddenTypes });
  };

  this._handleTextFilterChange = value => {
    cov_1uz0b9m24c.f[11]++;

    const { text, isRegExp } = (cov_1uz0b9m24c.s[29]++, value);
    // TODO: Fuzzy if !isRegExp?
    const { invalid, pattern } = (cov_1uz0b9m24c.s[30]++, (0, (_RegExpFilter || _load_RegExpFilter()).getFilterPattern)(text, isRegExp));
    cov_1uz0b9m24c.s[31]++;
    this._model.setState({
      textFilter: { text, isRegExp, invalid, pattern }
    });
  };

  this._selectMessage = message => {
    cov_1uz0b9m24c.f[14]++;
    cov_1uz0b9m24c.s[38]++;

    this._model.setState({ selectedMessage: message });
  };
};

function goToDiagnosticLocation(message, options) {
  cov_1uz0b9m24c.f[15]++;
  cov_1uz0b9m24c.s[39]++;

  if ((cov_1uz0b9m24c.b[6][0]++, message.scope !== 'file') || (cov_1uz0b9m24c.b[6][1]++, message.filePath == null)) {
    cov_1uz0b9m24c.b[5][0]++;
    cov_1uz0b9m24c.s[40]++;

    return;
  } else {
    cov_1uz0b9m24c.b[5][1]++;
  }

  cov_1uz0b9m24c.s[41]++;
  (_analytics || _load_analytics()).default.track('diagnostics-panel-goto-location');

  const uri = (cov_1uz0b9m24c.s[42]++, message.filePath);
  // If initialLine is N, Atom will navigate to line N+1.
  // Flow sometimes reports a row of -1, so this ensures the line is at least one.
  const line = (cov_1uz0b9m24c.s[43]++, Math.max(message.range ? (cov_1uz0b9m24c.b[7][0]++, message.range.start.row) : (cov_1uz0b9m24c.b[7][1]++, 0), 0));
  const column = (cov_1uz0b9m24c.s[44]++, 0);
  cov_1uz0b9m24c.s[45]++;
  (0, (_goToLocation || _load_goToLocation()).goToLocation)(uri, {
    line,
    column,
    activatePane: options.focusEditor,
    pending: true
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRpYWdub3N0aWNzVmlld01vZGVsLmpzIl0sIm5hbWVzIjpbIldPUktTUEFDRV9WSUVXX1VSSSIsIkRpYWdub3N0aWNzVmlld01vZGVsIiwiY29uc3RydWN0b3IiLCJnbG9iYWxTdGF0ZXMiLCJwYXR0ZXJuIiwiaW52YWxpZCIsIl9tb2RlbCIsImhpZGRlbkdyb3VwcyIsIlNldCIsInRleHRGaWx0ZXIiLCJ0ZXh0IiwiaXNSZWdFeHAiLCJzZWxlY3RlZE1lc3NhZ2UiLCJ2aXNpYmlsaXR5IiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJfZGlzcG9zYWJsZXMiLCJkZWJvdW5jZVRpbWUiLCJmaWx0ZXIiLCJCb29sZWFuIiwic3Vic2NyaWJlIiwidHJhY2siLCJwcm9wcyIsImNvbWJpbmVMYXRlc3QiLCJ0b09ic2VydmFibGUiLCJnbG9iYWxTdGF0ZSIsImluc3RhbmNlU3RhdGUiLCJkaWFnbm9zdGljcyIsIl9maWx0ZXJEaWFnbm9zdGljcyIsIm9uVHlwZUZpbHRlckNoYW5nZSIsIl9oYW5kbGVUeXBlRmlsdGVyQ2hhbmdlIiwib25UZXh0RmlsdGVyQ2hhbmdlIiwiX2hhbmRsZVRleHRGaWx0ZXJDaGFuZ2UiLCJzZWxlY3RNZXNzYWdlIiwiX3NlbGVjdE1lc3NhZ2UiLCJnb3RvTWVzc2FnZUxvY2F0aW9uIiwiZ29Ub0RpYWdub3N0aWNMb2NhdGlvbiIsInN1cHBvcnRlZE1lc3NhZ2VLaW5kcyIsIl9wcm9wcyIsImRlc3Ryb3kiLCJkaXNwb3NlIiwiZ2V0VGl0bGUiLCJnZXRJY29uTmFtZSIsImdldFVSSSIsImdldERlZmF1bHRMb2NhdGlvbiIsInNlcmlhbGl6ZSIsInN0YXRlIiwiZGVzZXJpYWxpemVyIiwiZ2V0RWxlbWVudCIsIl9lbGVtZW50IiwiQ29tcG9uZW50IiwiZWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsIm1lc3NhZ2UiLCJoYXMiLCJnZXRHcm91cCIsInRlc3QiLCJodG1sIiwicHJvdmlkZXJOYW1lIiwic2NvcGUiLCJmaWxlUGF0aCIsInR5cGUiLCJoaWRkZW4iLCJuZXh0SGlkZGVuVHlwZXMiLCJkZWxldGUiLCJzZXRTdGF0ZSIsInZhbHVlIiwib3B0aW9ucyIsInVyaSIsImxpbmUiLCJNYXRoIiwibWF4IiwicmFuZ2UiLCJzdGFydCIsInJvdyIsImNvbHVtbiIsImFjdGl2YXRlUGFuZSIsImZvY3VzRWRpdG9yIiwicGVuZGluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7QUFDQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7QUFDQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7Ozs7O0FBOUJBOzs7Ozs7Ozs7Ozs7QUFrRE8sTUFBTUEsMEVBQXFCLDRCQUFyQixDQUFOOztBQUVBLE1BQU1DLG9CQUFOLENBQTJCOztBQU1oQ0MsY0FBWUMsWUFBWixFQUF1RDtBQUFBOztBQUFBOztBQUNyRCxVQUFNLEVBQUNDLE9BQUQsRUFBVUMsT0FBViw2QkFB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RmdCO0FBR2hCQyxrQkFBY1QsUUFBUVUsV0FITjtBQUloQkMsYUFBUztBQUpPLEdBQWxCO0FBTUQiLCJmaWxlIjoiRGlhZ25vc3RpY3NWaWV3TW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7SWNvbk5hbWV9IGZyb20gJ251Y2xpZGUtY29tbW9ucy11aS9JY29uJztcbmltcG9ydCB0eXBlIHtQcm9wc30gZnJvbSAnLi91aS9EaWFnbm9zdGljc1ZpZXcnO1xuaW1wb3J0IHR5cGUge0RpYWdub3N0aWNHcm91cCwgR2xvYmFsVmlld1N0YXRlfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIHtEaWFnbm9zdGljTWVzc2FnZX0gZnJvbSAnLi4vLi4vYXRvbS1pZGUtZGlhZ25vc3RpY3MvbGliL3R5cGVzJztcbmltcG9ydCB0eXBlIHtSZWdFeHBGaWx0ZXJDaGFuZ2V9IGZyb20gJ251Y2xpZGUtY29tbW9ucy11aS9SZWdFeHBGaWx0ZXInO1xuXG5pbXBvcnQge2dvVG9Mb2NhdGlvbn0gZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vZ28tdG8tbG9jYXRpb24nO1xuaW1wb3J0IFVuaXZlcnNhbERpc3Bvc2FibGUgZnJvbSAnbnVjbGlkZS1jb21tb25zL1VuaXZlcnNhbERpc3Bvc2FibGUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBhbmFseXRpY3MgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vYW5hbHl0aWNzJztcbmltcG9ydCBNb2RlbCBmcm9tICdudWNsaWRlLWNvbW1vbnMvTW9kZWwnO1xuaW1wb3J0IG9ic2VydmVQYW5lSXRlbVZpc2liaWxpdHkgZnJvbSAnbnVjbGlkZS1jb21tb25zLWF0b20vb2JzZXJ2ZVBhbmVJdGVtVmlzaWJpbGl0eSc7XG5pbXBvcnQge3JlbmRlclJlYWN0Um9vdH0gZnJvbSAnbnVjbGlkZS1jb21tb25zLXVpL3JlbmRlclJlYWN0Um9vdCc7XG5pbXBvcnQge3RvZ2dsZX0gZnJvbSAnbnVjbGlkZS1jb21tb25zL29ic2VydmFibGUnO1xuaW1wb3J0IHtiaW5kT2JzZXJ2YWJsZUFzUHJvcHN9IGZyb20gJ251Y2xpZGUtY29tbW9ucy11aS9iaW5kT2JzZXJ2YWJsZUFzUHJvcHMnO1xuaW1wb3J0IHtPYnNlcnZhYmxlfSBmcm9tICdyeGpzJztcbmltcG9ydCB7Z2V0RmlsdGVyUGF0dGVybn0gZnJvbSAnbnVjbGlkZS1jb21tb25zLXVpL1JlZ0V4cEZpbHRlcic7XG5pbXBvcnQgKiBhcyBHcm91cFV0aWxzIGZyb20gJy4vR3JvdXBVdGlscyc7XG5pbXBvcnQgRGlhZ25vc3RpY3NWaWV3IGZyb20gJy4vdWkvRGlhZ25vc3RpY3NWaWV3JztcblxudHlwZSBTZXJpYWxpemVkRGlhZ25vc3RpY3NWaWV3TW9kZWwgPSB7XG4gIGRlc2VyaWFsaXplcjogJ2F0b20taWRlLXVpLkRpYWdub3N0aWNzVmlld01vZGVsJyxcbiAgc3RhdGU6IHtcbiAgICBoaWRkZW5Hcm91cHM6IEFycmF5PERpYWdub3N0aWNHcm91cD4sXG4gIH0sXG59O1xuXG50eXBlIFN0YXRlID0ge3xcbiAgaGlkZGVuR3JvdXBzOiBTZXQ8RGlhZ25vc3RpY0dyb3VwPixcbiAgc2VsZWN0ZWRNZXNzYWdlOiA/RGlhZ25vc3RpY01lc3NhZ2UsXG4gIHRleHRGaWx0ZXI6IHt8XG4gICAgdGV4dDogc3RyaW5nLFxuICAgIGlzUmVnRXhwOiBib29sZWFuLFxuICAgIGludmFsaWQ6IGJvb2xlYW4sXG4gICAgcGF0dGVybjogP1JlZ0V4cCxcbiAgfH0sXG58fTtcblxuZXhwb3J0IGNvbnN0IFdPUktTUEFDRV9WSUVXX1VSSSA9ICdhdG9tOi8vbnVjbGlkZS9kaWFnbm9zdGljcyc7XG5cbmV4cG9ydCBjbGFzcyBEaWFnbm9zdGljc1ZpZXdNb2RlbCB7XG4gIF9lbGVtZW50OiA/SFRNTEVsZW1lbnQ7XG4gIF9tb2RlbDogTW9kZWw8U3RhdGU+O1xuICBfcHJvcHM6IE9ic2VydmFibGU8UHJvcHM+O1xuICBfZGlzcG9zYWJsZXM6IElEaXNwb3NhYmxlO1xuXG4gIGNvbnN0cnVjdG9yKGdsb2JhbFN0YXRlczogT2JzZXJ2YWJsZTxHbG9iYWxWaWV3U3RhdGU+KSB7XG4gICAgY29uc3Qge3BhdHRlcm4sIGludmFsaWR9ID0gZ2V0RmlsdGVyUGF0dGVybignJywgZmFsc2UpO1xuICAgIHRoaXMuX21vZGVsID0gbmV3IE1vZGVsKHtcbiAgICAgIC8vIFRPRE86IEdldCB0aGlzIGZyb20gY29uc3RydWN0b3Ivc2VyaWFsaXphdGlvbi5cbiAgICAgIGhpZGRlbkdyb3VwczogbmV3IFNldCgpLFxuICAgICAgdGV4dEZpbHRlcjoge3RleHQ6ICcnLCBpc1JlZ0V4cDogZmFsc2UsIHBhdHRlcm4sIGludmFsaWR9LFxuICAgICAgc2VsZWN0ZWRNZXNzYWdlOiBudWxsLFxuICAgIH0pO1xuICAgIGNvbnN0IHZpc2liaWxpdHkgPSBvYnNlcnZlUGFuZUl0ZW1WaXNpYmlsaXR5KHRoaXMpLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCk7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMgPSBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZShcbiAgICAgIHZpc2liaWxpdHlcbiAgICAgICAgLmRlYm91bmNlVGltZSgxMDAwKVxuICAgICAgICAuZGlzdGluY3RVbnRpbENoYW5nZWQoKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgIGFuYWx5dGljcy50cmFjaygnZGlhZ25vc3RpY3Mtc2hvdy10YWJsZScpO1xuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgLy8gQ29tYmluZSB0aGUgc3RhdGUgdGhhdCdzIHNoYXJlZCBiZXR3ZWVuIGluc3RhbmNlcywgdGhlIHN0YXRlIHRoYXQncyB1bmlxdWUgdG8gdGhpcyBpbnN0YW5jZSxcbiAgICAvLyBhbmQgdW5jaGFuZ2luZyBjYWxsYmFja3MsIHRvIGdldCB0aGUgcHJvcHMgZm9yIG91ciBjb21wb25lbnQuXG4gICAgY29uc3QgcHJvcHMgPSBPYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QoXG4gICAgICBnbG9iYWxTdGF0ZXMsXG4gICAgICB0aGlzLl9tb2RlbC50b09ic2VydmFibGUoKSxcbiAgICAgIChnbG9iYWxTdGF0ZSwgaW5zdGFuY2VTdGF0ZSkgPT4gKHtcbiAgICAgICAgLi4uZ2xvYmFsU3RhdGUsXG4gICAgICAgIC4uLmluc3RhbmNlU3RhdGUsXG4gICAgICAgIGRpYWdub3N0aWNzOiB0aGlzLl9maWx0ZXJEaWFnbm9zdGljcyhcbiAgICAgICAgICBnbG9iYWxTdGF0ZS5kaWFnbm9zdGljcyxcbiAgICAgICAgICBpbnN0YW5jZVN0YXRlLnRleHRGaWx0ZXIucGF0dGVybixcbiAgICAgICAgICBpbnN0YW5jZVN0YXRlLmhpZGRlbkdyb3VwcyxcbiAgICAgICAgKSxcbiAgICAgICAgb25UeXBlRmlsdGVyQ2hhbmdlOiB0aGlzLl9oYW5kbGVUeXBlRmlsdGVyQ2hhbmdlLFxuICAgICAgICBvblRleHRGaWx0ZXJDaGFuZ2U6IHRoaXMuX2hhbmRsZVRleHRGaWx0ZXJDaGFuZ2UsXG4gICAgICAgIHNlbGVjdE1lc3NhZ2U6IHRoaXMuX3NlbGVjdE1lc3NhZ2UsXG4gICAgICAgIGdvdG9NZXNzYWdlTG9jYXRpb246IGdvVG9EaWFnbm9zdGljTG9jYXRpb24sXG4gICAgICAgIHN1cHBvcnRlZE1lc3NhZ2VLaW5kczogZ2xvYmFsU3RhdGUuc3VwcG9ydGVkTWVzc2FnZUtpbmRzLFxuICAgICAgfSksXG4gICAgKTtcblxuICAgIC8vIFwiTXV0ZVwiIHRoZSBwcm9wcyBzdHJlYW0gd2hlbiB0aGUgdmlldyBpcyBoaWRkZW4gc28gd2UgZG9uJ3QgZG8gdW5uZWNlc3NhcnkgdXBkYXRlcy5cbiAgICB0aGlzLl9wcm9wcyA9IHRvZ2dsZShwcm9wcywgdmlzaWJpbGl0eSk7XG4gIH1cblxuICBkZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIGdldFRpdGxlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdEaWFnbm9zdGljcyc7XG4gIH1cblxuICBnZXRJY29uTmFtZSgpOiBJY29uTmFtZSB7XG4gICAgcmV0dXJuICdsYXcnO1xuICB9XG5cbiAgZ2V0VVJJKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFdPUktTUEFDRV9WSUVXX1VSSTtcbiAgfVxuXG4gIGdldERlZmF1bHRMb2NhdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm90dG9tJztcbiAgfVxuXG4gIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemVkRGlhZ25vc3RpY3NWaWV3TW9kZWwge1xuICAgIGNvbnN0IHtoaWRkZW5Hcm91cHN9ID0gdGhpcy5fbW9kZWwuc3RhdGU7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlc2VyaWFsaXplcjogJ2F0b20taWRlLXVpLkRpYWdub3N0aWNzVmlld01vZGVsJyxcbiAgICAgIHN0YXRlOiB7XG4gICAgICAgIGhpZGRlbkdyb3VwczogWy4uLmhpZGRlbkdyb3Vwc10sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBnZXRFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICBpZiAodGhpcy5fZWxlbWVudCA9PSBudWxsKSB7XG4gICAgICBjb25zdCBDb21wb25lbnQgPSBiaW5kT2JzZXJ2YWJsZUFzUHJvcHModGhpcy5fcHJvcHMsIERpYWdub3N0aWNzVmlldyk7XG4gICAgICBjb25zdCBlbGVtZW50ID0gcmVuZGVyUmVhY3RSb290KDxDb21wb25lbnQgLz4pO1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkaWFnbm9zdGljcy11aScpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgZmlsdGVyLlxuICAgKi9cbiAgX2hhbmRsZVR5cGVGaWx0ZXJDaGFuZ2UgPSAodHlwZTogRGlhZ25vc3RpY0dyb3VwKTogdm9pZCA9PiB7XG4gICAgY29uc3Qge2hpZGRlbkdyb3Vwc30gPSB0aGlzLl9tb2RlbC5zdGF0ZTtcbiAgICBjb25zdCBoaWRkZW4gPSBoaWRkZW5Hcm91cHMuaGFzKHR5cGUpO1xuICAgIGNvbnN0IG5leHRIaWRkZW5UeXBlcyA9IG5ldyBTZXQoaGlkZGVuR3JvdXBzKTtcbiAgICBpZiAoaGlkZGVuKSB7XG4gICAgICBuZXh0SGlkZGVuVHlwZXMuZGVsZXRlKHR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0SGlkZGVuVHlwZXMuYWRkKHR5cGUpO1xuICAgIH1cbiAgICB0aGlzLl9tb2RlbC5zZXRTdGF0ZSh7aGlkZGVuR3JvdXBzOiBuZXh0SGlkZGVuVHlwZXN9KTtcbiAgfTtcblxuICBfaGFuZGxlVGV4dEZpbHRlckNoYW5nZSA9ICh2YWx1ZTogUmVnRXhwRmlsdGVyQ2hhbmdlKTogdm9pZCA9PiB7XG4gICAgY29uc3Qge3RleHQsIGlzUmVnRXhwfSA9IHZhbHVlO1xuICAgIC8vIFRPRE86IEZ1enp5IGlmICFpc1JlZ0V4cD9cbiAgICBjb25zdCB7aW52YWxpZCwgcGF0dGVybn0gPSBnZXRGaWx0ZXJQYXR0ZXJuKHRleHQsIGlzUmVnRXhwKTtcbiAgICB0aGlzLl9tb2RlbC5zZXRTdGF0ZSh7XG4gICAgICB0ZXh0RmlsdGVyOiB7dGV4dCwgaXNSZWdFeHAsIGludmFsaWQsIHBhdHRlcm59LFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFRPRE86IE1lbW9pemUgdGhpcy5cbiAgX2ZpbHRlckRpYWdub3N0aWNzKFxuICAgIGRpYWdub3N0aWNzOiBBcnJheTxEaWFnbm9zdGljTWVzc2FnZT4sXG4gICAgcGF0dGVybjogP1JlZ0V4cCxcbiAgICBoaWRkZW5Hcm91cHM6IFNldDxEaWFnbm9zdGljR3JvdXA+LFxuICApOiBBcnJheTxEaWFnbm9zdGljTWVzc2FnZT4ge1xuICAgIHJldHVybiBkaWFnbm9zdGljcy5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICBpZiAoaGlkZGVuR3JvdXBzLmhhcyhHcm91cFV0aWxzLmdldEdyb3VwKG1lc3NhZ2UpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAocGF0dGVybiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgKG1lc3NhZ2UudGV4dCAhPSBudWxsICYmIHBhdHRlcm4udGVzdChtZXNzYWdlLnRleHQpKSB8fFxuICAgICAgICAobWVzc2FnZS5odG1sICE9IG51bGwgJiYgcGF0dGVybi50ZXN0KG1lc3NhZ2UuaHRtbCkpIHx8XG4gICAgICAgIHBhdHRlcm4udGVzdChtZXNzYWdlLnByb3ZpZGVyTmFtZSkgfHxcbiAgICAgICAgKG1lc3NhZ2Uuc2NvcGUgPT09ICdmaWxlJyAmJiBwYXR0ZXJuLnRlc3QobWVzc2FnZS5maWxlUGF0aCkpXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgX3NlbGVjdE1lc3NhZ2UgPSAobWVzc2FnZTogRGlhZ25vc3RpY01lc3NhZ2UpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9tb2RlbC5zZXRTdGF0ZSh7c2VsZWN0ZWRNZXNzYWdlOiBtZXNzYWdlfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdvVG9EaWFnbm9zdGljTG9jYXRpb24oXG4gIG1lc3NhZ2U6IERpYWdub3N0aWNNZXNzYWdlLFxuICBvcHRpb25zOiB7fGZvY3VzRWRpdG9yOiBib29sZWFufH0sXG4pOiB2b2lkIHtcbiAgaWYgKG1lc3NhZ2Uuc2NvcGUgIT09ICdmaWxlJyB8fCBtZXNzYWdlLmZpbGVQYXRoID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBhbmFseXRpY3MudHJhY2soJ2RpYWdub3N0aWNzLXBhbmVsLWdvdG8tbG9jYXRpb24nKTtcblxuICBjb25zdCB1cmkgPSBtZXNzYWdlLmZpbGVQYXRoO1xuICAvLyBJZiBpbml0aWFsTGluZSBpcyBOLCBBdG9tIHdpbGwgbmF2aWdhdGUgdG8gbGluZSBOKzEuXG4gIC8vIEZsb3cgc29tZXRpbWVzIHJlcG9ydHMgYSByb3cgb2YgLTEsIHNvIHRoaXMgZW5zdXJlcyB0aGUgbGluZSBpcyBhdCBsZWFzdCBvbmUuXG4gIGNvbnN0IGxpbmUgPSBNYXRoLm1heChtZXNzYWdlLnJhbmdlID8gbWVzc2FnZS5yYW5nZS5zdGFydC5yb3cgOiAwLCAwKTtcbiAgY29uc3QgY29sdW1uID0gMDtcbiAgZ29Ub0xvY2F0aW9uKHVyaSwge1xuICAgIGxpbmUsXG4gICAgY29sdW1uLFxuICAgIGFjdGl2YXRlUGFuZTogb3B0aW9ucy5mb2N1c0VkaXRvcixcbiAgICBwZW5kaW5nOiB0cnVlLFxuICB9KTtcbn1cbiJdfQ==