'use strict';

var cov_1mxwjsa5j2 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-find-references/lib/view/FileReferencesView.js',
      hash = '1ec144036dee90d916f0d4c51582977e5cb9ade4',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-find-references/lib/view/FileReferencesView.js',
    statementMap: {
      '0': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 37,
          column: 17
        }
      },
      '1': {
        start: {
          line: 38,
          column: 4
        },
        end: {
          line: 40,
          column: 6
        }
      },
      '2': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 41,
          column: 60
        }
      },
      '3': {
        start: {
          line: 42,
          column: 4
        },
        end: {
          line: 42,
          column: 68
        }
      },
      '4': {
        start: {
          line: 46,
          column: 4
        },
        end: {
          line: 49,
          column: 7
        }
      },
      '5': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 26
        }
      },
      '6': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 31
        }
      },
      '7': {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 57,
          column: 7
        }
      },
      '8': {
        start: {
          line: 61,
          column: 4
        },
        end: {
          line: 61,
          column: 41
        }
      },
      '9': {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 26
        }
      },
      '10': {
        start: {
          line: 66,
          column: 19
        },
        end: {
          line: 106,
          column: 6
        }
      },
      '11': {
        start: {
          line: 67,
          column: 23
        },
        end: {
          line: 67,
          column: 42
        }
      },
      '12': {
        start: {
          line: 68,
          column: 22
        },
        end: {
          line: 68,
          column: 67
        }
      },
      '13': {
        start: {
          line: 72,
          column: 6
        },
        end: {
          line: 79,
          column: 7
        }
      },
      '14': {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 78,
          column: 10
        }
      },
      '15': {
        start: {
          line: 80,
          column: 25
        },
        end: {
          line: 80,
          column: 45
        }
      },
      '16': {
        start: {
          line: 81,
          column: 23
        },
        end: {
          line: 81,
          column: 40
        }
      },
      '17': {
        start: {
          line: 82,
          column: 6
        },
        end: {
          line: 105,
          column: 8
        }
      },
      '18': {
        start: {
          line: 86,
          column: 28
        },
        end: {
          line: 86,
          column: 59
        }
      },
      '19': {
        start: {
          line: 98,
          column: 52
        },
        end: {
          line: 98,
          column: 61
        }
      },
      '20': {
        start: {
          line: 101,
          column: 28
        },
        end: {
          line: 101,
          column: 59
        }
      },
      '21': {
        start: {
          line: 107,
          column: 27
        },
        end: {
          line: 111,
          column: 6
        }
      },
      '22': {
        start: {
          line: 113,
          column: 4
        },
        end: {
          line: 128,
          column: 6
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 36,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        },
        loc: {
          start: {
            line: 36,
            column: 28
          },
          end: {
            line: 43,
            column: 3
          }
        },
        line: 36
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 45,
            column: 2
          },
          end: {
            line: 45,
            column: 3
          }
        },
        loc: {
          start: {
            line: 45,
            column: 53
          },
          end: {
            line: 51,
            column: 3
          }
        },
        line: 45
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 17
          },
          end: {
            line: 58,
            column: 3
          }
        },
        line: 53
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 60,
            column: 2
          },
          end: {
            line: 60,
            column: 3
          }
        },
        loc: {
          start: {
            line: 60,
            column: 57
          },
          end: {
            line: 63,
            column: 3
          }
        },
        line: 60
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 65,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        loc: {
          start: {
            line: 65,
            column: 23
          },
          end: {
            line: 129,
            column: 3
          }
        },
        line: 65
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 66,
            column: 44
          },
          end: {
            line: 66,
            column: 45
          }
        },
        loc: {
          start: {
            line: 66,
            column: 74
          },
          end: {
            line: 106,
            column: 5
          }
        },
        line: 66
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 86,
            column: 21
          },
          end: {
            line: 86,
            column: 22
          }
        },
        loc: {
          start: {
            line: 86,
            column: 28
          },
          end: {
            line: 86,
            column: 59
          }
        },
        line: 86
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 98,
            column: 45
          },
          end: {
            line: 98,
            column: 46
          }
        },
        loc: {
          start: {
            line: 98,
            column: 52
          },
          end: {
            line: 98,
            column: 61
          }
        },
        line: 98
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 101,
            column: 21
          },
          end: {
            line: 101,
            column: 22
          }
        },
        loc: {
          start: {
            line: 101,
            column: 28
          },
          end: {
            line: 101,
            column: 59
          }
        },
        line: 101
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 72,
            column: 6
          },
          end: {
            line: 79,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 72,
            column: 6
          },
          end: {
            line: 79,
            column: 7
          }
        }, {
          start: {
            line: 72,
            column: 6
          },
          end: {
            line: 79,
            column: 7
          }
        }],
        line: 72
      },
      '1': {
        loc: {
          start: {
            line: 72,
            column: 10
          },
          end: {
            line: 72,
            column: 57
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 72,
            column: 10
          },
          end: {
            line: 72,
            column: 23
          }
        }, {
          start: {
            line: 72,
            column: 27
          },
          end: {
            line: 72,
            column: 57
          }
        }],
        line: 72
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = _interopRequireWildcard(require('react'));

var _classnames;

function _load_classnames() {
  return _classnames = _interopRequireDefault(require('classnames'));
}

var _nuclideUri;

function _load_nuclideUri() {
  return _nuclideUri = _interopRequireDefault(require('nuclide-commons/nuclideUri'));
}

var _goToLocation;

function _load_goToLocation() {
  return _goToLocation = require('nuclide-commons-atom/go-to-location');
}

var _CodeSnippet;

function _load_CodeSnippet() {
  return _CodeSnippet = require('nuclide-commons-ui/CodeSnippet');
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class FileReferencesView extends _react.Component {
  constructor(props) {
    cov_1mxwjsa5j2.f[0]++;
    cov_1mxwjsa5j2.s[0]++;

    super(props);
    cov_1mxwjsa5j2.s[1]++;
    this.state = {
      isExpanded: true
    };
    cov_1mxwjsa5j2.s[2]++;
    this._onFileClick = this._onFileClick.bind(this);
    cov_1mxwjsa5j2.s[3]++;
    this._onFileNameClick = this._onFileNameClick.bind(this);
  }

  _onRefClick(evt, ref) {
    cov_1mxwjsa5j2.f[1]++;
    cov_1mxwjsa5j2.s[4]++;

    (0, (_goToLocation || _load_goToLocation()).goToLocation)(this.props.uri, {
      line: ref.range.start.row,
      column: ref.range.start.column
    });
    cov_1mxwjsa5j2.s[5]++;
    evt.stopPropagation();
  }

  _onFileClick() {
    cov_1mxwjsa5j2.f[2]++;
    cov_1mxwjsa5j2.s[6]++;

    this.props.clickCallback();
    cov_1mxwjsa5j2.s[7]++;
    this.setState({
      isExpanded: !this.state.isExpanded
    });
  }

  _onFileNameClick(evt, line) {
    cov_1mxwjsa5j2.f[3]++;
    cov_1mxwjsa5j2.s[8]++;

    (0, (_goToLocation || _load_goToLocation()).goToLocation)(this.props.uri, { line });
    cov_1mxwjsa5j2.s[9]++;
    evt.stopPropagation();
  }

  render() {
    cov_1mxwjsa5j2.f[4]++;

    const groups = (cov_1mxwjsa5j2.s[10]++, this.props.refGroups.map((group, i) => {
      cov_1mxwjsa5j2.f[5]++;

      const firstRef = (cov_1mxwjsa5j2.s[11]++, group.references[0]);
      const lastRef = (cov_1mxwjsa5j2.s[12]++, group.references[group.references.length - 1]);

      let caller;
      // flowlint-next-line sketchy-null-string:off
      cov_1mxwjsa5j2.s[13]++;
      if ((cov_1mxwjsa5j2.b[1][0]++, firstRef.name) && (cov_1mxwjsa5j2.b[1][1]++, firstRef.name === lastRef.name)) {
        cov_1mxwjsa5j2.b[0][0]++;
        cov_1mxwjsa5j2.s[14]++;

        caller = _react.createElement(
          'span',
          null,
          ' ',
          'in ',
          _react.createElement(
            'code',
            null,
            firstRef.name
          )
        );
      } else {
        cov_1mxwjsa5j2.b[0][1]++;
      }
      const startRange = (cov_1mxwjsa5j2.s[15]++, firstRef.range.start);
      const endRange = (cov_1mxwjsa5j2.s[16]++, lastRef.range.end);
      cov_1mxwjsa5j2.s[17]++;
      return _react.createElement(
        'li',
        { key: group.startLine, className: 'find-references-ref' },
        _react.createElement(
          'div',
          {
            className: 'find-references-ref-name',
            onClick: evt => {
              cov_1mxwjsa5j2.f[6]++;
              cov_1mxwjsa5j2.s[18]++;
              return this._onRefClick(evt, firstRef);
            } },
          'Line ',
          startRange.row + 1,
          ':',
          startRange.column + 1,
          ' - ',
          endRange.row + 1,
          ':',
          endRange.column + 1,
          caller
        ),
        _react.createElement((_CodeSnippet || _load_CodeSnippet()).CodeSnippet, {
          grammar: this.props.grammar,
          text: this.props.previewText[i],
          highlights: group.references.map(ref => {
            cov_1mxwjsa5j2.f[7]++;
            cov_1mxwjsa5j2.s[19]++;
            return ref.range;
          }),
          startLine: group.startLine,
          endLine: group.endLine,
          onClick: evt => {
            cov_1mxwjsa5j2.f[8]++;
            cov_1mxwjsa5j2.s[20]++;
            return this._onRefClick(evt, firstRef);
          },
          onLineClick: this._onFileNameClick
        })
      );
    }));
    const outerClassName = (cov_1mxwjsa5j2.s[21]++, (0, (_classnames || _load_classnames()).default)('find-references-file list-nested-item', {
      collapsed: !this.state.isExpanded,
      expanded: this.state.isExpanded,
      selected: this.props.isSelected
    }));

    cov_1mxwjsa5j2.s[22]++;
    return _react.createElement(
      'li',
      { className: `${outerClassName}` },
      _react.createElement(
        'div',
        {
          className: 'find-references-filename list-item',
          onClick: this._onFileClick },
        _react.createElement('span', { className: 'icon-file-text icon' }),
        _react.createElement(
          'a',
          { onClick: this._onFileNameClick },
          (_nuclideUri || _load_nuclideUri()).default.relative(this.props.basePath, this.props.uri)
        ),
        _react.createElement(
          'span',
          { className: 'find-references-ref-count badge badge-small' },
          groups.length
        )
      ),
      _react.createElement(
        'ul',
        { className: 'find-references-refs list-tree' },
        groups
      )
    );
  }
}
exports.default = FileReferencesView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZpbGVSZWZlcmVuY2VzVmlldy5qcyJdLCJuYW1lcyI6WyJGaWxlUmVmZXJlbmNlc1ZpZXciLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic3RhdGUiLCJpc0V4cGFuZGVkIiwiX29uRmlsZUNsaWNrIiwiYmluZCIsIl9vbkZpbGVOYW1lQ2xpY2siLCJfb25SZWZDbGljayIsImV2dCIsInJlZiIsInVyaSIsImxpbmUiLCJyYW5nZSIsInN0YXJ0Iiwicm93IiwiY29sdW1uIiwic3RvcFByb3BhZ2F0aW9uIiwiY2xpY2tDYWxsYmFjayIsInNldFN0YXRlIiwicmVuZGVyIiwiZ3JvdXBzIiwicmVmR3JvdXBzIiwibWFwIiwiZ3JvdXAiLCJpIiwiZmlyc3RSZWYiLCJyZWZlcmVuY2VzIiwibGFzdFJlZiIsImxlbmd0aCIsImNhbGxlciIsIm5hbWUiLCJzdGFydFJhbmdlIiwiZW5kUmFuZ2UiLCJlbmQiLCJzdGFydExpbmUiLCJncmFtbWFyIiwicHJldmlld1RleHQiLCJlbmRMaW5lIiwib3V0ZXJDbGFzc05hbWUiLCJjb2xsYXBzZWQiLCJleHBhbmRlZCIsInNlbGVjdGVkIiwiaXNTZWxlY3RlZCIsInJlbGF0aXZlIiwiYmFzZVBhdGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7OztBQUNBO0FBQUE7QUFBQTs7Ozs7O0FBbEJBOzs7Ozs7Ozs7Ozs7QUFrQ2UsTUFBTUEsa0JBQU4sU0FBaUMsT0FBTUMsU0FBdkMsQ0FBK0Q7QUFDNUVDLGNBQVlDLEtBQVosRUFBMEI7QUFBQTtBQUFBOztBQUN4QixVQUFNQSxLQUFOO0FBRHdCO0FBRXhCLFNBQUtDLEtBQUwsR0FBYTtBQUNYQyxrQkFBWTtBQURELEtBQWI7QUFGd0I7QUFLdkIsUUFBRCxDQUFZQyxZQUFaLEdBQTJCLEtBQUtBLFlBQUwsQ0FBa0JDLElBQWxCLENBQXVCLElBQXZCLENBQTNCO0FBTHdCO0FBTXZCLFFBQUQsQ0FBWUMsZ0JBQVosR0FBK0IsS0FBS0EsZ0JBQUwsQ0FBc0JELElBQXRCLENBQTJCLElBQTNCLENBQS9CO0FBQ0Q7O0FBRURFLGNBQVlDLEdBQVosRUFBbUNDLEdBQW5DLEVBQW1EO0FBQUE7QUFBQTs7QUFDakQsOERBQWEsS0FBS1IsS0FBTCxDQUFXUyxHQUF4QixFQUE2QjtBQUMzQkMsWUFBTUYsSUFBSUcsS0FBSixDQUFVQyxLQUFWLENBQWdCQyxHQURLO0FBRTNCQyxjQUFRTixJQUFJRyxLQUFKLENBQVVDLEtBQVYsQ0FBZ0JFO0FBRkcsS0FBN0I7QUFEaUQ7QUFLakRQLFFBQUlRLGVBQUo7QUFDRDs7QUFFRFosaUJBQWU7QUFBQTtBQUFBOztBQUNiLFNBQUtILEtBQUwsQ0FBV2dCLGFBQVg7QUFEYTtBQUViLFNBQUtDLFFBQUwsQ0FBYztBQUNaZixrQkFBWSxDQUFDLEtBQUtELEtBQUwsQ0FBV0M7QUFEWixLQUFkO0FBR0Q7O0FBRURHLG1CQUFpQkUsR0FBakIsRUFBd0NHLElBQXhDLEVBQXVEO0FBQUE7QUFBQTs7QUFDckQsOERBQWEsS0FBS1YsS0FBTCxDQUFXUyxHQUF4QixFQUE2QixFQUFDQyxJQUFELEVBQTdCO0FBRHFEO0FBRXJESCxRQUFJUSxlQUFKO0FBQ0Q7O0FBRURHLFdBQXFCO0FBQUE7O0FBQ25CLFVBQU1DLGtDQUFTLEtBQUtuQixLQUFMLENBQVdvQixTQUFYLENBQXFCQyxHQUFyQixDQUF5QixDQUFDQyxLQUFELEVBQXdCQyxDQUF4QixLQUE4QjtBQUFBOztBQUNwRSxZQUFNQyxvQ0FBV0YsTUFBTUcsVUFBTixDQUFpQixDQUFqQixDQUFYLENBQU47QUFDQSxZQUFNQyxtQ0FBVUosTUFBTUcsVUFBTixDQUFpQkgsTUFBTUcsVUFBTixDQUFpQkUsTUFBakIsR0FBMEIsQ0FBM0MsQ0FBVixDQUFOOztBQUVBLFVBQUlDLE1BQUo7QUFDQTtBQUxvRTtBQU1wRSxVQUFJLG9DQUFTQyxJQUFULGdDQUFpQkwsU0FBU0ssSUFBVCxLQUFrQkgsUUFBUUcsSUFBM0MsQ0FBSixFQUFxRDtBQUFBO0FBQUE7O0FBQ25ERCxpQkFDRTtBQUFBO0FBQUE7QUFDRyxhQURIO0FBQUE7QUFFSztBQUFBO0FBQUE7QUFBT0oscUJBQVNLO0FBQWhCO0FBRkwsU0FERjtBQU1ELE9BUEQ7QUFBQTtBQUFBO0FBUUEsWUFBTUMsc0NBQWFOLFNBQVNiLEtBQVQsQ0FBZUMsS0FBNUIsQ0FBTjtBQUNBLFlBQU1tQixvQ0FBV0wsUUFBUWYsS0FBUixDQUFjcUIsR0FBekIsQ0FBTjtBQWZvRTtBQWdCcEUsYUFDRTtBQUFBO0FBQUEsVUFBSSxLQUFLVixNQUFNVyxTQUFmLEVBQTBCLFdBQVUscUJBQXBDO0FBQ0U7QUFBQTtBQUFBO0FBQ0UsdUJBQVUsMEJBRFo7QUFFRSxxQkFBUzFCLE9BQU87QUFBQTtBQUFBO0FBQUEsMEJBQUtELFdBQUwsQ0FBaUJDLEdBQWpCLEVBQXNCaUIsUUFBdEI7QUFBK0IsYUFGakQ7QUFHRyxpQkFISDtBQUlHTSxxQkFBV2pCLEdBQVgsR0FBaUIsQ0FKcEI7QUFBQTtBQU1HaUIscUJBQVdoQixNQUFYLEdBQW9CLENBTnZCO0FBQUE7QUFNNkJpQixtQkFBU2xCLEdBQVQsR0FBZSxDQU41QztBQUFBO0FBUUdrQixtQkFBU2pCLE1BQVQsR0FBa0IsQ0FSckI7QUFTR2M7QUFUSCxTQURGO0FBWUU7QUFDRSxtQkFBUyxLQUFLNUIsS0FBTCxDQUFXa0MsT0FEdEI7QUFFRSxnQkFBTSxLQUFLbEMsS0FBTCxDQUFXbUMsV0FBWCxDQUF1QlosQ0FBdkIsQ0FGUjtBQUdFLHNCQUFZRCxNQUFNRyxVQUFOLENBQWlCSixHQUFqQixDQUFxQmIsT0FBTztBQUFBO0FBQUE7QUFBQSx1QkFBSUcsS0FBSjtBQUFTLFdBQXJDLENBSGQ7QUFJRSxxQkFBV1csTUFBTVcsU0FKbkI7QUFLRSxtQkFBU1gsTUFBTWMsT0FMakI7QUFNRSxtQkFBUzdCLE9BQU87QUFBQTtBQUFBO0FBQUEsd0JBQUtELFdBQUwsQ0FBaUJDLEdBQWpCLEVBQXNCaUIsUUFBdEI7QUFBK0IsV0FOakQ7QUFPRSx1QkFBYSxLQUFLbkI7QUFQcEI7QUFaRixPQURGO0FBd0JELEtBeENjLENBQVQsQ0FBTjtBQXlDQSxVQUFNZ0MsMENBQWlCLGlEQUFXLHVDQUFYLEVBQW9EO0FBQ3pFQyxpQkFBVyxDQUFDLEtBQUtyQyxLQUFMLENBQVdDLFVBRGtEO0FBRXpFcUMsZ0JBQVUsS0FBS3RDLEtBQUwsQ0FBV0MsVUFGb0Q7QUFHekVzQyxnQkFBVSxLQUFLeEMsS0FBTCxDQUFXeUM7QUFIb0QsS0FBcEQsQ0FBakIsQ0FBTjs7QUExQ21CO0FBZ0RuQixXQUNFO0FBQUE7QUFBQSxRQUFJLFdBQVksR0FBRUosY0FBZSxFQUFqQztBQUNFO0FBQUE7QUFBQTtBQUNFLHFCQUFVLG9DQURaO0FBRUUsbUJBQVMsS0FBS2xDLFlBRmhCO0FBR0UsdUNBQU0sV0FBVSxxQkFBaEIsR0FIRjtBQUlFO0FBQUE7QUFBQSxZQUFHLFNBQVMsS0FBS0UsZ0JBQWpCO0FBQ0csc0RBQVdxQyxRQUFYLENBQW9CLEtBQUsxQyxLQUFMLENBQVcyQyxRQUEvQixFQUF5QyxLQUFLM0MsS0FBTCxDQUFXUyxHQUFwRDtBQURILFNBSkY7QUFPRTtBQUFBO0FBQUEsWUFBTSxXQUFVLDZDQUFoQjtBQUNHVSxpQkFBT1E7QUFEVjtBQVBGLE9BREY7QUFZRTtBQUFBO0FBQUEsVUFBSSxXQUFVLGdDQUFkO0FBQWdEUjtBQUFoRDtBQVpGLEtBREY7QUFnQkQ7QUE5RjJFO2tCQUF6RHRCLGtCIiwiZmlsZSI6IkZpbGVSZWZlcmVuY2VzVmlldy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtSZWZlcmVuY2UsIFJlZmVyZW5jZUdyb3VwfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG51Y2xpZGVVcmkgZnJvbSAnbnVjbGlkZS1jb21tb25zL251Y2xpZGVVcmknO1xuaW1wb3J0IHtnb1RvTG9jYXRpb259IGZyb20gJ251Y2xpZGUtY29tbW9ucy1hdG9tL2dvLXRvLWxvY2F0aW9uJztcbmltcG9ydCB7Q29kZVNuaXBwZXR9IGZyb20gJ251Y2xpZGUtY29tbW9ucy11aS9Db2RlU25pcHBldCc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHVyaTogc3RyaW5nLFxuICBncmFtbWFyOiBhdG9tJEdyYW1tYXIsXG4gIHByZXZpZXdUZXh0OiBBcnJheTxzdHJpbmc+LFxuICByZWZHcm91cHM6IEFycmF5PFJlZmVyZW5jZUdyb3VwPixcbiAgYmFzZVBhdGg6IHN0cmluZyxcbiAgY2xpY2tDYWxsYmFjazogKCkgPT4gdm9pZCxcbiAgaXNTZWxlY3RlZDogYm9vbGVhbixcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIGlzRXhwYW5kZWQ6IGJvb2xlYW4sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlUmVmZXJlbmNlc1ZpZXcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNFeHBhbmRlZDogdHJ1ZSxcbiAgICB9O1xuICAgICh0aGlzOiBhbnkpLl9vbkZpbGVDbGljayA9IHRoaXMuX29uRmlsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgKHRoaXM6IGFueSkuX29uRmlsZU5hbWVDbGljayA9IHRoaXMuX29uRmlsZU5hbWVDbGljay5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX29uUmVmQ2xpY2soZXZ0OiBTeW50aGV0aWNFdmVudDw+LCByZWY6IFJlZmVyZW5jZSkge1xuICAgIGdvVG9Mb2NhdGlvbih0aGlzLnByb3BzLnVyaSwge1xuICAgICAgbGluZTogcmVmLnJhbmdlLnN0YXJ0LnJvdyxcbiAgICAgIGNvbHVtbjogcmVmLnJhbmdlLnN0YXJ0LmNvbHVtbixcbiAgICB9KTtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBfb25GaWxlQ2xpY2soKSB7XG4gICAgdGhpcy5wcm9wcy5jbGlja0NhbGxiYWNrKCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpc0V4cGFuZGVkOiAhdGhpcy5zdGF0ZS5pc0V4cGFuZGVkLFxuICAgIH0pO1xuICB9XG5cbiAgX29uRmlsZU5hbWVDbGljayhldnQ6IFN5bnRoZXRpY0V2ZW50PD4sIGxpbmU/OiBudW1iZXIpIHtcbiAgICBnb1RvTG9jYXRpb24odGhpcy5wcm9wcy51cmksIHtsaW5lfSk7XG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMucHJvcHMucmVmR3JvdXBzLm1hcCgoZ3JvdXA6IFJlZmVyZW5jZUdyb3VwLCBpKSA9PiB7XG4gICAgICBjb25zdCBmaXJzdFJlZiA9IGdyb3VwLnJlZmVyZW5jZXNbMF07XG4gICAgICBjb25zdCBsYXN0UmVmID0gZ3JvdXAucmVmZXJlbmNlc1tncm91cC5yZWZlcmVuY2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBsZXQgY2FsbGVyO1xuICAgICAgLy8gZmxvd2xpbnQtbmV4dC1saW5lIHNrZXRjaHktbnVsbC1zdHJpbmc6b2ZmXG4gICAgICBpZiAoZmlyc3RSZWYubmFtZSAmJiBmaXJzdFJlZi5uYW1lID09PSBsYXN0UmVmLm5hbWUpIHtcbiAgICAgICAgY2FsbGVyID0gKFxuICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgIGluIDxjb2RlPntmaXJzdFJlZi5uYW1lfTwvY29kZT5cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFydFJhbmdlID0gZmlyc3RSZWYucmFuZ2Uuc3RhcnQ7XG4gICAgICBjb25zdCBlbmRSYW5nZSA9IGxhc3RSZWYucmFuZ2UuZW5kO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGxpIGtleT17Z3JvdXAuc3RhcnRMaW5lfSBjbGFzc05hbWU9XCJmaW5kLXJlZmVyZW5jZXMtcmVmXCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmluZC1yZWZlcmVuY2VzLXJlZi1uYW1lXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2V2dCA9PiB0aGlzLl9vblJlZkNsaWNrKGV2dCwgZmlyc3RSZWYpfT5cbiAgICAgICAgICAgIHsnTGluZSAnfVxuICAgICAgICAgICAge3N0YXJ0UmFuZ2Uucm93ICsgMX1cbiAgICAgICAgICAgIDpcbiAgICAgICAgICAgIHtzdGFydFJhbmdlLmNvbHVtbiArIDF9IC0ge2VuZFJhbmdlLnJvdyArIDF9XG4gICAgICAgICAgICA6XG4gICAgICAgICAgICB7ZW5kUmFuZ2UuY29sdW1uICsgMX1cbiAgICAgICAgICAgIHtjYWxsZXJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPENvZGVTbmlwcGV0XG4gICAgICAgICAgICBncmFtbWFyPXt0aGlzLnByb3BzLmdyYW1tYXJ9XG4gICAgICAgICAgICB0ZXh0PXt0aGlzLnByb3BzLnByZXZpZXdUZXh0W2ldfVxuICAgICAgICAgICAgaGlnaGxpZ2h0cz17Z3JvdXAucmVmZXJlbmNlcy5tYXAocmVmID0+IHJlZi5yYW5nZSl9XG4gICAgICAgICAgICBzdGFydExpbmU9e2dyb3VwLnN0YXJ0TGluZX1cbiAgICAgICAgICAgIGVuZExpbmU9e2dyb3VwLmVuZExpbmV9XG4gICAgICAgICAgICBvbkNsaWNrPXtldnQgPT4gdGhpcy5fb25SZWZDbGljayhldnQsIGZpcnN0UmVmKX1cbiAgICAgICAgICAgIG9uTGluZUNsaWNrPXt0aGlzLl9vbkZpbGVOYW1lQ2xpY2t9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9saT5cbiAgICAgICk7XG4gICAgfSk7XG4gICAgY29uc3Qgb3V0ZXJDbGFzc05hbWUgPSBjbGFzc25hbWVzKCdmaW5kLXJlZmVyZW5jZXMtZmlsZSBsaXN0LW5lc3RlZC1pdGVtJywge1xuICAgICAgY29sbGFwc2VkOiAhdGhpcy5zdGF0ZS5pc0V4cGFuZGVkLFxuICAgICAgZXhwYW5kZWQ6IHRoaXMuc3RhdGUuaXNFeHBhbmRlZCxcbiAgICAgIHNlbGVjdGVkOiB0aGlzLnByb3BzLmlzU2VsZWN0ZWQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGxpIGNsYXNzTmFtZT17YCR7b3V0ZXJDbGFzc05hbWV9YH0+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJmaW5kLXJlZmVyZW5jZXMtZmlsZW5hbWUgbGlzdC1pdGVtXCJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkZpbGVDbGlja30+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiaWNvbi1maWxlLXRleHQgaWNvblwiIC8+XG4gICAgICAgICAgPGEgb25DbGljaz17dGhpcy5fb25GaWxlTmFtZUNsaWNrfT5cbiAgICAgICAgICAgIHtudWNsaWRlVXJpLnJlbGF0aXZlKHRoaXMucHJvcHMuYmFzZVBhdGgsIHRoaXMucHJvcHMudXJpKX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmluZC1yZWZlcmVuY2VzLXJlZi1jb3VudCBiYWRnZSBiYWRnZS1zbWFsbFwiPlxuICAgICAgICAgICAge2dyb3Vwcy5sZW5ndGh9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHVsIGNsYXNzTmFtZT1cImZpbmQtcmVmZXJlbmNlcy1yZWZzIGxpc3QtdHJlZVwiPntncm91cHN9PC91bD5cbiAgICAgIDwvbGk+XG4gICAgKTtcbiAgfVxufVxuIl19