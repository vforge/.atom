'use strict';

var cov_23jcqaa6f5 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-code-format/lib/main.js',
      hash = '973c97ec5470b471a140ceceb2bf1a25553a7897',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/atom-ide-ui/pkg/atom-ide-code-format/lib/main.js',
    statementMap: {
      '0': {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 53
        }
      },
      '1': {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 36,
          column: 73
        }
      },
      '2': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 40,
          column: 78
        }
      },
      '3': {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 49,
          column: 5
        }
      },
      '4': {
        start: {
          line: 42,
          column: 6
        },
        end: {
          line: 42,
          column: 49
        }
      },
      '5': {
        start: {
          line: 43,
          column: 11
        },
        end: {
          line: 49,
          column: 5
        }
      },
      '6': {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 48
        }
      },
      '7': {
        start: {
          line: 45,
          column: 11
        },
        end: {
          line: 49,
          column: 5
        }
      },
      '8': {
        start: {
          line: 46,
          column: 6
        },
        end: {
          line: 46,
          column: 50
        }
      },
      '9': {
        start: {
          line: 47,
          column: 11
        },
        end: {
          line: 49,
          column: 5
        }
      },
      '10': {
        start: {
          line: 48,
          column: 6
        },
        end: {
          line: 48,
          column: 50
        }
      },
      '11': {
        start: {
          line: 50,
          column: 4
        },
        end: {
          line: 50,
          column: 52
        }
      },
      '12': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 61
        }
      },
      '13': {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 58,
          column: 60
        }
      },
      '14': {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 62,
          column: 62
        }
      },
      '15': {
        start: {
          line: 66,
          column: 4
        },
        end: {
          line: 66,
          column: 62
        }
      },
      '16': {
        start: {
          line: 70,
          column: 4
        },
        end: {
          line: 70,
          column: 71
        }
      },
      '17': {
        start: {
          line: 74,
          column: 4
        },
        end: {
          line: 74,
          column: 37
        }
      },
      '18': {
        start: {
          line: 78,
          column: 0
        },
        end: {
          line: 78,
          column: 42
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 28,
            column: 2
          },
          end: {
            line: 28,
            column: 3
          }
        },
        loc: {
          start: {
            line: 28,
            column: 16
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 28
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 32,
            column: 3
          }
        },
        loc: {
          start: {
            line: 32,
            column: 67
          },
          end: {
            line: 51,
            column: 3
          }
        },
        line: 32
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 53,
            column: 2
          },
          end: {
            line: 53,
            column: 3
          }
        },
        loc: {
          start: {
            line: 53,
            column: 71
          },
          end: {
            line: 55,
            column: 3
          }
        },
        line: 53
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 57,
            column: 3
          }
        },
        loc: {
          start: {
            line: 57,
            column: 69
          },
          end: {
            line: 59,
            column: 3
          }
        },
        line: 57
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 61,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        loc: {
          start: {
            line: 61,
            column: 73
          },
          end: {
            line: 63,
            column: 3
          }
        },
        line: 61
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 65,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        loc: {
          start: {
            line: 65,
            column: 73
          },
          end: {
            line: 67,
            column: 3
          }
        },
        line: 65
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 69,
            column: 2
          },
          end: {
            line: 69,
            column: 3
          }
        },
        loc: {
          start: {
            line: 69,
            column: 71
          },
          end: {
            line: 71,
            column: 3
          }
        },
        line: 69
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 73,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        loc: {
          start: {
            line: 73,
            column: 12
          },
          end: {
            line: 75,
            column: 3
          }
        },
        line: 73
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 36,
            column: 72
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 35,
            column: 28
          }
        }, {
          start: {
            line: 36,
            column: 7
          },
          end: {
            line: 36,
            column: 71
          }
        }],
        line: 35
      },
      '1': {
        loc: {
          start: {
            line: 36,
            column: 7
          },
          end: {
            line: 36,
            column: 71
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 36,
            column: 35
          },
          end: {
            line: 36,
            column: 64
          }
        }, {
          start: {
            line: 36,
            column: 67
          },
          end: {
            line: 36,
            column: 71
          }
        }],
        line: 36
      },
      '2': {
        loc: {
          start: {
            line: 38,
            column: 6
          },
          end: {
            line: 40,
            column: 77
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 39,
            column: 10
          },
          end: {
            line: 39,
            column: 27
          }
        }, {
          start: {
            line: 40,
            column: 10
          },
          end: {
            line: 40,
            column: 77
          }
        }],
        line: 38
      },
      '3': {
        loc: {
          start: {
            line: 40,
            column: 10
          },
          end: {
            line: 40,
            column: 77
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 40,
            column: 47
          },
          end: {
            line: 40,
            column: 73
          }
        }, {
          start: {
            line: 40,
            column: 76
          },
          end: {
            line: 40,
            column: 77
          }
        }],
        line: 40
      },
      '4': {
        loc: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 49,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 49,
            column: 5
          }
        }, {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 49,
            column: 5
          }
        }],
        line: 41
      },
      '5': {
        loc: {
          start: {
            line: 43,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 43,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }, {
          start: {
            line: 43,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }],
        line: 43
      },
      '6': {
        loc: {
          start: {
            line: 45,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 45,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }, {
          start: {
            line: 45,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }],
        line: 45
      },
      '7': {
        loc: {
          start: {
            line: 47,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 47,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }, {
          start: {
            line: 47,
            column: 11
          },
          end: {
            line: 49,
            column: 5
          }
        }],
        line: 47
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

var _createPackage;

function _load_createPackage() {
  return _createPackage = _interopRequireDefault(require('nuclide-commons-atom/createPackage'));
}

var _CodeFormatManager;

function _load_CodeFormatManager() {
  return _CodeFormatManager = _interopRequireDefault(require('./CodeFormatManager'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

class Activation {

  constructor() {
    cov_23jcqaa6f5.f[0]++;
    cov_23jcqaa6f5.s[0]++;

    this.codeFormatManager = new (_CodeFormatManager || _load_CodeFormatManager()).default();
  }

  consumeLegacyProvider(provider) {
    cov_23jcqaa6f5.f[1]++;
    cov_23jcqaa6f5.s[1]++;

    // Legacy providers used `selector` / `inclusionPriority`.
    provider.grammarScopes = (cov_23jcqaa6f5.b[0][0]++, provider.grammarScopes) || (cov_23jcqaa6f5.b[0][1]++, provider.selector != null ? (cov_23jcqaa6f5.b[1][0]++, provider.selector.split(', ')) : (cov_23jcqaa6f5.b[1][1]++, null));
    cov_23jcqaa6f5.s[2]++;
    provider.priority = provider.priority != null ? (cov_23jcqaa6f5.b[2][0]++, provider.priority) : (cov_23jcqaa6f5.b[2][1]++, provider.inclusionPriority != null ? (cov_23jcqaa6f5.b[3][0]++, provider.inclusionPriority) : (cov_23jcqaa6f5.b[3][1]++, 0));
    cov_23jcqaa6f5.s[3]++;
    if (provider.formatCode) {
      cov_23jcqaa6f5.b[4][0]++;
      cov_23jcqaa6f5.s[4]++;

      return this.consumeRangeProvider(provider);
    } else {
        cov_23jcqaa6f5.b[4][1]++;
        cov_23jcqaa6f5.s[5]++;
        if (provider.formatEntireFile) {
          cov_23jcqaa6f5.b[5][0]++;
          cov_23jcqaa6f5.s[6]++;

          return this.consumeFileProvider(provider);
        } else {
            cov_23jcqaa6f5.b[5][1]++;
            cov_23jcqaa6f5.s[7]++;
            if (provider.formatAtPosition) {
              cov_23jcqaa6f5.b[6][0]++;
              cov_23jcqaa6f5.s[8]++;

              return this.consumeOnTypeProvider(provider);
            } else {
                cov_23jcqaa6f5.b[6][1]++;
                cov_23jcqaa6f5.s[9]++;
                if (provider.formatOnSave) {
                  cov_23jcqaa6f5.b[7][0]++;
                  cov_23jcqaa6f5.s[10]++;

                  return this.consumeOnSaveProvider(provider);
                } else {
                  cov_23jcqaa6f5.b[7][1]++;
                }
              }
          }
      }cov_23jcqaa6f5.s[11]++;
    throw new Error('Invalid code format provider');
  }

  consumeRangeProvider(provider) {
    cov_23jcqaa6f5.f[2]++;
    cov_23jcqaa6f5.s[12]++;

    return this.codeFormatManager.addRangeProvider(provider);
  }

  consumeFileProvider(provider) {
    cov_23jcqaa6f5.f[3]++;
    cov_23jcqaa6f5.s[13]++;

    return this.codeFormatManager.addFileProvider(provider);
  }

  consumeOnTypeProvider(provider) {
    cov_23jcqaa6f5.f[4]++;
    cov_23jcqaa6f5.s[14]++;

    return this.codeFormatManager.addOnTypeProvider(provider);
  }

  consumeOnSaveProvider(provider) {
    cov_23jcqaa6f5.f[5]++;
    cov_23jcqaa6f5.s[15]++;

    return this.codeFormatManager.addOnSaveProvider(provider);
  }

  consumeBusySignal(busySignalService) {
    cov_23jcqaa6f5.f[6]++;
    cov_23jcqaa6f5.s[16]++;

    return this.codeFormatManager.consumeBusySignal(busySignalService);
  }

  dispose() {
    cov_23jcqaa6f5.f[7]++;
    cov_23jcqaa6f5.s[17]++;

    this.codeFormatManager.dispose();
  }
}

cov_23jcqaa6f5.s[18]++;
(0, (_createPackage || _load_createPackage()).default)(module.exports, Activation);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiQWN0aXZhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29kZUZvcm1hdE1hbmFnZXIiLCJjb25zdW1lTGVnYWN5UHJvdmlkZXIiLCJwcm92aWRlciIsImdyYW1tYXJTY29wZXMiLCJzZWxlY3RvciIsInNwbGl0IiwicHJpb3JpdHkiLCJpbmNsdXNpb25Qcmlvcml0eSIsImZvcm1hdENvZGUiLCJjb25zdW1lUmFuZ2VQcm92aWRlciIsImZvcm1hdEVudGlyZUZpbGUiLCJjb25zdW1lRmlsZVByb3ZpZGVyIiwiZm9ybWF0QXRQb3NpdGlvbiIsImNvbnN1bWVPblR5cGVQcm92aWRlciIsImZvcm1hdE9uU2F2ZSIsImNvbnN1bWVPblNhdmVQcm92aWRlciIsIkVycm9yIiwiYWRkUmFuZ2VQcm92aWRlciIsImFkZEZpbGVQcm92aWRlciIsImFkZE9uVHlwZVByb3ZpZGVyIiwiYWRkT25TYXZlUHJvdmlkZXIiLCJjb25zdW1lQnVzeVNpZ25hbCIsImJ1c3lTaWduYWxTZXJ2aWNlIiwiZGlzcG9zZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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LFlBQVU7QUFBQTtBQUFBOztBQUNSLFNBQUt2QixpQkFBTCxDQUF1QnVCLE9BQXZCO0FBQ0Q7QUFsRGM7OztBQXFEakIsdURBQWNDLE9BQU9DLE9BQXJCLEVBQThCM0IsVUFBOUIiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtCdXN5U2lnbmFsU2VydmljZX0gZnJvbSAnLi4vLi4vYXRvbS1pZGUtYnVzeS1zaWduYWwvbGliL3R5cGVzJztcbmltcG9ydCB0eXBlIHtcbiAgQ29kZUZvcm1hdFByb3ZpZGVyLFxuICBSYW5nZUNvZGVGb3JtYXRQcm92aWRlcixcbiAgRmlsZUNvZGVGb3JtYXRQcm92aWRlcixcbiAgT25UeXBlQ29kZUZvcm1hdFByb3ZpZGVyLFxuICBPblNhdmVDb2RlRm9ybWF0UHJvdmlkZXIsXG59IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgY3JlYXRlUGFja2FnZSBmcm9tICdudWNsaWRlLWNvbW1vbnMtYXRvbS9jcmVhdGVQYWNrYWdlJztcbmltcG9ydCBDb2RlRm9ybWF0TWFuYWdlciBmcm9tICcuL0NvZGVGb3JtYXRNYW5hZ2VyJztcblxuY2xhc3MgQWN0aXZhdGlvbiB7XG4gIGNvZGVGb3JtYXRNYW5hZ2VyOiBDb2RlRm9ybWF0TWFuYWdlcjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvZGVGb3JtYXRNYW5hZ2VyID0gbmV3IENvZGVGb3JtYXRNYW5hZ2VyKCk7XG4gIH1cblxuICBjb25zdW1lTGVnYWN5UHJvdmlkZXIocHJvdmlkZXI6IENvZGVGb3JtYXRQcm92aWRlcik6IElEaXNwb3NhYmxlIHtcbiAgICAvLyBMZWdhY3kgcHJvdmlkZXJzIHVzZWQgYHNlbGVjdG9yYCAvIGBpbmNsdXNpb25Qcmlvcml0eWAuXG4gICAgcHJvdmlkZXIuZ3JhbW1hclNjb3BlcyA9XG4gICAgICBwcm92aWRlci5ncmFtbWFyU2NvcGVzIHx8XG4gICAgICAocHJvdmlkZXIuc2VsZWN0b3IgIT0gbnVsbCA/IHByb3ZpZGVyLnNlbGVjdG9yLnNwbGl0KCcsICcpIDogbnVsbCk7XG4gICAgcHJvdmlkZXIucHJpb3JpdHkgPVxuICAgICAgcHJvdmlkZXIucHJpb3JpdHkgIT0gbnVsbFxuICAgICAgICA/IHByb3ZpZGVyLnByaW9yaXR5XG4gICAgICAgIDogcHJvdmlkZXIuaW5jbHVzaW9uUHJpb3JpdHkgIT0gbnVsbCA/IHByb3ZpZGVyLmluY2x1c2lvblByaW9yaXR5IDogMDtcbiAgICBpZiAocHJvdmlkZXIuZm9ybWF0Q29kZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uc3VtZVJhbmdlUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIuZm9ybWF0RW50aXJlRmlsZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uc3VtZUZpbGVQcm92aWRlcihwcm92aWRlcik7XG4gICAgfSBlbHNlIGlmIChwcm92aWRlci5mb3JtYXRBdFBvc2l0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdW1lT25UeXBlUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgIH0gZWxzZSBpZiAocHJvdmlkZXIuZm9ybWF0T25TYXZlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zdW1lT25TYXZlUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBmb3JtYXQgcHJvdmlkZXInKTtcbiAgfVxuXG4gIGNvbnN1bWVSYW5nZVByb3ZpZGVyKHByb3ZpZGVyOiBSYW5nZUNvZGVGb3JtYXRQcm92aWRlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlRm9ybWF0TWFuYWdlci5hZGRSYW5nZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIGNvbnN1bWVGaWxlUHJvdmlkZXIocHJvdmlkZXI6IEZpbGVDb2RlRm9ybWF0UHJvdmlkZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuY29kZUZvcm1hdE1hbmFnZXIuYWRkRmlsZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIGNvbnN1bWVPblR5cGVQcm92aWRlcihwcm92aWRlcjogT25UeXBlQ29kZUZvcm1hdFByb3ZpZGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLmNvZGVGb3JtYXRNYW5hZ2VyLmFkZE9uVHlwZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIGNvbnN1bWVPblNhdmVQcm92aWRlcihwcm92aWRlcjogT25TYXZlQ29kZUZvcm1hdFByb3ZpZGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLmNvZGVGb3JtYXRNYW5hZ2VyLmFkZE9uU2F2ZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIGNvbnN1bWVCdXN5U2lnbmFsKGJ1c3lTaWduYWxTZXJ2aWNlOiBCdXN5U2lnbmFsU2VydmljZSk6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlRm9ybWF0TWFuYWdlci5jb25zdW1lQnVzeVNpZ25hbChidXN5U2lnbmFsU2VydmljZSk7XG4gIH1cblxuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuY29kZUZvcm1hdE1hbmFnZXIuZGlzcG9zZSgpO1xuICB9XG59XG5cbmNyZWF0ZVBhY2thZ2UobW9kdWxlLmV4cG9ydHMsIEFjdGl2YXRpb24pO1xuIl19