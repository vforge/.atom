'use strict';

var cov_2eqp6jm7ek = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/groupMatchIndexes.js',
      hash = '9b41ba0cd7cf71838680ea02f84451b2a4c02d60',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/groupMatchIndexes.js',
    statementMap: {
      '0': {
        start: {
          line: 19,
          column: 22
        },
        end: {
          line: 19,
          column: 27
        }
      },
      '1': {
        start: {
          line: 20,
          column: 14
        },
        end: {
          line: 20,
          column: 15
        }
      },
      '2': {
        start: {
          line: 21,
          column: 25
        },
        end: {
          line: 21,
          column: 27
        }
      },
      '3': {
        start: {
          line: 25,
          column: 2
        },
        end: {
          line: 46,
          column: 5
        }
      },
      '4': {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 45,
          column: 5
        }
      },
      '5': {
        start: {
          line: 27,
          column: 6
        },
        end: {
          line: 33,
          column: 7
        }
      },
      '6': {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 30,
          column: 9
        }
      },
      '7': {
        start: {
          line: 29,
          column: 10
        },
        end: {
          line: 29,
          column: 67
        }
      },
      '8': {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 18
        }
      },
      '9': {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 29
        }
      },
      '10': {
        start: {
          line: 35,
          column: 6
        },
        end: {
          line: 43,
          column: 7
        }
      },
      '11': {
        start: {
          line: 36,
          column: 8
        },
        end: {
          line: 36,
          column: 65
        }
      },
      '12': {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 37,
          column: 30
        }
      },
      '13': {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 41,
          column: 9
        }
      },
      '14': {
        start: {
          line: 40,
          column: 10
        },
        end: {
          line: 40,
          column: 78
        }
      },
      '15': {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 42,
          column: 61
        }
      },
      '16': {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 20
        }
      },
      '17': {
        start: {
          line: 47,
          column: 2
        },
        end: {
          line: 49,
          column: 3
        }
      },
      '18': {
        start: {
          line: 48,
          column: 4
        },
        end: {
          line: 48,
          column: 75
        }
      },
      '19': {
        start: {
          line: 50,
          column: 2
        },
        end: {
          line: 50,
          column: 24
        }
      }
    },
    fnMap: {
      '0': {
        name: 'groupMatchIndexes',
        decl: {
          start: {
            line: 13,
            column: 24
          },
          end: {
            line: 13,
            column: 41
          }
        },
        loc: {
          start: {
            line: 18,
            column: 12
          },
          end: {
            line: 51,
            column: 1
          }
        },
        line: 18
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 25,
            column: 23
          },
          end: {
            line: 25,
            column: 24
          }
        },
        loc: {
          start: {
            line: 25,
            column: 33
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 25
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        }, {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        }],
        line: 26
      },
      '1': {
        loc: {
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 33,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 33,
            column: 7
          }
        }, {
          start: {
            line: 27,
            column: 6
          },
          end: {
            line: 33,
            column: 7
          }
        }],
        line: 27
      },
      '2': {
        loc: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        }, {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 30,
            column: 9
          }
        }],
        line: 28
      },
      '3': {
        loc: {
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 43,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 43,
            column: 7
          }
        }, {
          start: {
            line: 35,
            column: 6
          },
          end: {
            line: 43,
            column: 7
          }
        }],
        line: 35
      },
      '4': {
        loc: {
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 41,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 41,
            column: 9
          }
        }, {
          start: {
            line: 39,
            column: 8
          },
          end: {
            line: 41,
            column: 9
          }
        }],
        line: 39
      },
      '5': {
        loc: {
          start: {
            line: 47,
            column: 2
          },
          end: {
            line: 49,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 47,
            column: 2
          },
          end: {
            line: 49,
            column: 3
          }
        }, {
          start: {
            line: 47,
            column: 2
          },
          end: {
            line: 49,
            column: 3
          }
        }],
        line: 47
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0
    },
    f: {
      '0': 0,
      '1': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = groupMatchIndexes;
/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

function groupMatchIndexes(str, matchIndexes, matchFn, unmatchedFn) {
  cov_2eqp6jm7ek.f[0]++;

  let streakOngoing = (cov_2eqp6jm7ek.s[0]++, false);
  let start = (cov_2eqp6jm7ek.s[1]++, 0);
  const pathComponents = (cov_2eqp6jm7ek.s[2]++, []);

  // Split the path into highlighted and non-highlighted subsequences for optimal rendering perf.
  // Do this in O(n) where n is the number of matchIndexes (ie. less than the length of the path).
  cov_2eqp6jm7ek.s[3]++;
  matchIndexes.forEach((i, n) => {
    cov_2eqp6jm7ek.f[1]++;
    cov_2eqp6jm7ek.s[4]++;

    if (matchIndexes[n + 1] === i + 1) {
      cov_2eqp6jm7ek.b[0][0]++;
      cov_2eqp6jm7ek.s[5]++;

      if (!streakOngoing) {
        cov_2eqp6jm7ek.b[1][0]++;
        cov_2eqp6jm7ek.s[6]++;

        if (start < i) {
          cov_2eqp6jm7ek.b[2][0]++;
          cov_2eqp6jm7ek.s[7]++;

          pathComponents.push(unmatchedFn(str.slice(start, i), i));
        } else {
          cov_2eqp6jm7ek.b[2][1]++;
        }
        cov_2eqp6jm7ek.s[8]++;
        start = i;
        cov_2eqp6jm7ek.s[9]++;
        streakOngoing = true;
      } else {
        cov_2eqp6jm7ek.b[1][1]++;
      }
    } else {
      cov_2eqp6jm7ek.b[0][1]++;
      cov_2eqp6jm7ek.s[10]++;

      if (streakOngoing) {
        cov_2eqp6jm7ek.b[3][0]++;
        cov_2eqp6jm7ek.s[11]++;

        pathComponents.push(matchFn(str.slice(start, i + 1), i));
        cov_2eqp6jm7ek.s[12]++;
        streakOngoing = false;
      } else {
        cov_2eqp6jm7ek.b[3][1]++;
        cov_2eqp6jm7ek.s[13]++;

        if (start < i) {
          cov_2eqp6jm7ek.b[4][0]++;
          cov_2eqp6jm7ek.s[14]++;

          pathComponents.push(unmatchedFn(str.slice(start, i), `before${i}`));
        } else {
          cov_2eqp6jm7ek.b[4][1]++;
        }
        cov_2eqp6jm7ek.s[15]++;
        pathComponents.push(matchFn(str.slice(i, i + 1), i));
      }
      cov_2eqp6jm7ek.s[16]++;
      start = i + 1;
    }
  });
  cov_2eqp6jm7ek.s[17]++;
  if (start < str.length) {
    cov_2eqp6jm7ek.b[5][0]++;
    cov_2eqp6jm7ek.s[18]++;

    pathComponents.push(unmatchedFn(str.slice(start, str.length), 'last'));
  } else {
    cov_2eqp6jm7ek.b[5][1]++;
  }
  cov_2eqp6jm7ek.s[19]++;
  return pathComponents;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3VwTWF0Y2hJbmRleGVzLmpzIl0sIm5hbWVzIjpbImdyb3VwTWF0Y2hJbmRleGVzIiwic3RyIiwibWF0Y2hJbmRleGVzIiwibWF0Y2hGbiIsInVubWF0Y2hlZEZuIiwic3RyZWFrT25nb2luZyIsInN0YXJ0IiwicGF0aENvbXBvbmVudHMiLCJmb3JFYWNoIiwiaSIsIm4iLCJwdXNoIiwic2xpY2UiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQkFZd0JBLGlCO0FBWnhCOzs7Ozs7Ozs7Ozs7QUFZZSxTQUFTQSxpQkFBVCxDQUNiQyxHQURhLEVBRWJDLFlBRmEsRUFHYkMsT0FIYSxFQUliQyxXQUphLEVBS0g7QUFBQTs7QUFDVixNQUFJQyx3Q0FBZ0IsS0FBaEIsQ0FBSjtBQUNBLE1BQUlDLGdDQUFRLENBQVIsQ0FBSjtBQUNBLFFBQU1DLHlDQUFpQixFQUFqQixDQUFOOztBQUVBO0FBQ0E7QUFOVTtBQU9WTCxlQUFhTSxPQUFiLENBQXFCLENBQUNDLENBQUQsRUFBSUMsQ0FBSixLQUFVO0FBQUE7QUFBQTs7QUFDN0IsUUFBSVIsYUFBYVEsSUFBSSxDQUFqQixNQUF3QkQsSUFBSSxDQUFoQyxFQUFtQztBQUFBO0FBQUE7O0FBQ2pDLFVBQUksQ0FBQ0osYUFBTCxFQUFvQjtBQUFBO0FBQUE7O0FBQ2xCLFlBQUlDLFFBQVFHLENBQVosRUFBZTtBQUFBO0FBQUE7O0FBQ2JGLHlCQUFlSSxJQUFmLENBQW9CUCxZQUFZSCxJQUFJVyxLQUFKLENBQVVOLEtBQVYsRUFBaUJHLENBQWpCLENBQVosRUFBaUNBLENBQWpDLENBQXBCO0FBQ0QsU0FGRDtBQUFBO0FBQUE7QUFEa0I7QUFJbEJILGdCQUFRRyxDQUFSO0FBSmtCO0FBS2xCSix3QkFBZ0IsSUFBaEI7QUFDRCxPQU5EO0FBQUE7QUFBQTtBQU9ELEtBUkQsTUFRTztBQUFBO0FBQUE7O0FBQ0wsVUFBSUEsYUFBSixFQUFtQjtBQUFBO0FBQUE7O0FBQ2pCRSx1QkFBZUksSUFBZixDQUFvQlIsUUFBUUYsSUFBSVcsS0FBSixDQUFVTixLQUFWLEVBQWlCRyxJQUFJLENBQXJCLENBQVIsRUFBaUNBLENBQWpDLENBQXBCO0FBRGlCO0FBRWpCSix3QkFBZ0IsS0FBaEI7QUFDRCxPQUhELE1BR087QUFBQTtBQUFBOztBQUNMLFlBQUlDLFFBQVFHLENBQVosRUFBZTtBQUFBO0FBQUE7O0FBQ2JGLHlCQUFlSSxJQUFmLENBQW9CUCxZQUFZSCxJQUFJVyxLQUFKLENBQVVOLEtBQVYsRUFBaUJHLENBQWpCLENBQVosRUFBa0MsU0FBUUEsQ0FBRSxFQUE1QyxDQUFwQjtBQUNELFNBRkQ7QUFBQTtBQUFBO0FBREs7QUFJTEYsdUJBQWVJLElBQWYsQ0FBb0JSLFFBQVFGLElBQUlXLEtBQUosQ0FBVUgsQ0FBVixFQUFhQSxJQUFJLENBQWpCLENBQVIsRUFBNkJBLENBQTdCLENBQXBCO0FBQ0Q7QUFUSTtBQVVMSCxjQUFRRyxJQUFJLENBQVo7QUFDRDtBQUNGLEdBckJEO0FBUFU7QUE2QlYsTUFBSUgsUUFBUUwsSUFBSVksTUFBaEIsRUFBd0I7QUFBQTtBQUFBOztBQUN0Qk4sbUJBQWVJLElBQWYsQ0FBb0JQLFlBQVlILElBQUlXLEtBQUosQ0FBVU4sS0FBVixFQUFpQkwsSUFBSVksTUFBckIsQ0FBWixFQUEwQyxNQUExQyxDQUFwQjtBQUNELEdBRkQ7QUFBQTtBQUFBO0FBN0JVO0FBZ0NWLFNBQU9OLGNBQVA7QUFDRCIsImZpbGUiOiJncm91cE1hdGNoSW5kZXhlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdyb3VwTWF0Y2hJbmRleGVzPFQ+KFxuICBzdHI6IHN0cmluZyxcbiAgbWF0Y2hJbmRleGVzOiBBcnJheTxudW1iZXI+LFxuICBtYXRjaEZuOiAoc3RyaW5nLCBudW1iZXIgfCBzdHJpbmcpID0+IFQsXG4gIHVubWF0Y2hlZEZuOiAoc3RyaW5nLCBudW1iZXIgfCBzdHJpbmcpID0+IFQsXG4pOiBBcnJheTxUPiB7XG4gIGxldCBzdHJlYWtPbmdvaW5nID0gZmFsc2U7XG4gIGxldCBzdGFydCA9IDA7XG4gIGNvbnN0IHBhdGhDb21wb25lbnRzID0gW107XG5cbiAgLy8gU3BsaXQgdGhlIHBhdGggaW50byBoaWdobGlnaHRlZCBhbmQgbm9uLWhpZ2hsaWdodGVkIHN1YnNlcXVlbmNlcyBmb3Igb3B0aW1hbCByZW5kZXJpbmcgcGVyZi5cbiAgLy8gRG8gdGhpcyBpbiBPKG4pIHdoZXJlIG4gaXMgdGhlIG51bWJlciBvZiBtYXRjaEluZGV4ZXMgKGllLiBsZXNzIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgcGF0aCkuXG4gIG1hdGNoSW5kZXhlcy5mb3JFYWNoKChpLCBuKSA9PiB7XG4gICAgaWYgKG1hdGNoSW5kZXhlc1tuICsgMV0gPT09IGkgKyAxKSB7XG4gICAgICBpZiAoIXN0cmVha09uZ29pbmcpIHtcbiAgICAgICAgaWYgKHN0YXJ0IDwgaSkge1xuICAgICAgICAgIHBhdGhDb21wb25lbnRzLnB1c2godW5tYXRjaGVkRm4oc3RyLnNsaWNlKHN0YXJ0LCBpKSwgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgc3RyZWFrT25nb2luZyA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdHJlYWtPbmdvaW5nKSB7XG4gICAgICAgIHBhdGhDb21wb25lbnRzLnB1c2gobWF0Y2hGbihzdHIuc2xpY2Uoc3RhcnQsIGkgKyAxKSwgaSkpO1xuICAgICAgICBzdHJlYWtPbmdvaW5nID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhcnQgPCBpKSB7XG4gICAgICAgICAgcGF0aENvbXBvbmVudHMucHVzaCh1bm1hdGNoZWRGbihzdHIuc2xpY2Uoc3RhcnQsIGkpLCBgYmVmb3JlJHtpfWApKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoQ29tcG9uZW50cy5wdXNoKG1hdGNoRm4oc3RyLnNsaWNlKGksIGkgKyAxKSwgaSkpO1xuICAgICAgfVxuICAgICAgc3RhcnQgPSBpICsgMTtcbiAgICB9XG4gIH0pO1xuICBpZiAoc3RhcnQgPCBzdHIubGVuZ3RoKSB7XG4gICAgcGF0aENvbXBvbmVudHMucHVzaCh1bm1hdGNoZWRGbihzdHIuc2xpY2Uoc3RhcnQsIHN0ci5sZW5ndGgpLCAnbGFzdCcpKTtcbiAgfVxuICByZXR1cm4gcGF0aENvbXBvbmVudHM7XG59XG4iXX0=