'use strict';

var cov_wctxw5jsa = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/observable.js',
      hash = '0704487147795f974a177636849ca75eb02395cb',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/observable.js',
    statementMap: {
      '0': {
        start: {
          line: 27,
          column: 2
        },
        end: {
          line: 52,
          column: 5
        }
      },
      '1': {
        start: {
          line: 28,
          column: 26
        },
        end: {
          line: 28,
          column: 28
        }
      },
      '2': {
        start: {
          line: 31,
          column: 6
        },
        end: {
          line: 34,
          column: 7
        }
      },
      '3': {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 31
        }
      },
      '4': {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 33,
          column: 21
        }
      },
      '5': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 51,
          column: 6
        }
      },
      '6': {
        start: {
          line: 39,
          column: 22
        },
        end: {
          line: 39,
          column: 51
        }
      },
      '7': {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 30
        }
      },
      '8': {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 41,
          column: 58
        }
      },
      '9': {
        start: {
          line: 41,
          column: 30
        },
        end: {
          line: 41,
          column: 56
        }
      },
      '10': {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 44,
          column: 16
        }
      },
      '11': {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 30
        }
      },
      '12': {
        start: {
          line: 48,
          column: 8
        },
        end: {
          line: 48,
          column: 16
        }
      },
      '13': {
        start: {
          line: 49,
          column: 8
        },
        end: {
          line: 49,
          column: 28
        }
      },
      '14': {
        start: {
          line: 68,
          column: 2
        },
        end: {
          line: 95,
          column: 5
        }
      },
      '15': {
        start: {
          line: 69,
          column: 17
        },
        end: {
          line: 69,
          column: 21
        }
      },
      '16': {
        start: {
          line: 70,
          column: 18
        },
        end: {
          line: 75,
          column: 5
        }
      },
      '17': {
        start: {
          line: 71,
          column: 6
        },
        end: {
          line: 74,
          column: 7
        }
      },
      '18': {
        start: {
          line: 72,
          column: 8
        },
        end: {
          line: 72,
          column: 30
        }
      },
      '19': {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 73,
          column: 22
        }
      },
      '20': {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 94,
          column: 6
        }
      },
      '21': {
        start: {
          line: 78,
          column: 8
        },
        end: {
          line: 80,
          column: 9
        }
      },
      '22': {
        start: {
          line: 79,
          column: 10
        },
        end: {
          line: 79,
          column: 22
        }
      },
      '23': {
        start: {
          line: 81,
          column: 8
        },
        end: {
          line: 81,
          column: 23
        }
      },
      '24': {
        start: {
          line: 82,
          column: 8
        },
        end: {
          line: 84,
          column: 9
        }
      },
      '25': {
        start: {
          line: 83,
          column: 10
        },
        end: {
          line: 83,
          column: 18
        }
      },
      '26': {
        start: {
          line: 87,
          column: 8
        },
        end: {
          line: 87,
          column: 16
        }
      },
      '27': {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 28
        }
      },
      '28': {
        start: {
          line: 91,
          column: 8
        },
        end: {
          line: 91,
          column: 16
        }
      },
      '29': {
        start: {
          line: 92,
          column: 8
        },
        end: {
          line: 92,
          column: 28
        }
      },
      '30': {
        start: {
          line: 107,
          column: 2
        },
        end: {
          line: 107,
          column: 64
        }
      },
      '31': {
        start: {
          line: 107,
          column: 31
        },
        end: {
          line: 107,
          column: 51
        }
      },
      '32': {
        start: {
          line: 123,
          column: 2
        },
        end: {
          line: 132,
          column: 66
        }
      },
      '33': {
        start: {
          line: 128,
          column: 32
        },
        end: {
          line: 131,
          column: 5
        }
      },
      '34': {
        start: {
          line: 132,
          column: 20
        },
        end: {
          line: 132,
          column: 64
        }
      },
      '35': {
        start: {
          line: 144,
          column: 15
        },
        end: {
          line: 144,
          column: 32
        }
      },
      '36': {
        start: {
          line: 144,
          column: 30
        },
        end: {
          line: 144,
          column: 31
        }
      },
      '37': {
        start: {
          line: 145,
          column: 29
        },
        end: {
          line: 145,
          column: 38
        }
      },
      '38': {
        start: {
          line: 146,
          column: 22
        },
        end: {
          line: 151,
          column: 3
        }
      },
      '39': {
        start: {
          line: 147,
          column: 23
        },
        end: {
          line: 147,
          column: 57
        }
      },
      '40': {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 34
        }
      },
      '41': {
        start: {
          line: 149,
          column: 4
        },
        end: {
          line: 149,
          column: 25
        }
      },
      '42': {
        start: {
          line: 150,
          column: 4
        },
        end: {
          line: 150,
          column: 36
        }
      },
      '43': {
        start: {
          line: 152,
          column: 21
        },
        end: {
          line: 157,
          column: 3
        }
      },
      '44': {
        start: {
          line: 153,
          column: 4
        },
        end: {
          line: 155,
          column: 7
        }
      },
      '45': {
        start: {
          line: 154,
          column: 6
        },
        end: {
          line: 154,
          column: 27
        }
      },
      '46': {
        start: {
          line: 156,
          column: 4
        },
        end: {
          line: 156,
          column: 31
        }
      },
      '47': {
        start: {
          line: 159,
          column: 2
        },
        end: {
          line: 170,
          column: 4
        }
      },
      '48': {
        start: {
          line: 162,
          column: 6
        },
        end: {
          line: 164,
          column: 9
        }
      },
      '49': {
        start: {
          line: 163,
          column: 8
        },
        end: {
          line: 163,
          column: 60
        }
      },
      '50': {
        start: {
          line: 167,
          column: 6
        },
        end: {
          line: 167,
          column: 40
        }
      },
      '51': {
        start: {
          line: 206,
          column: 16
        },
        end: {
          line: 206,
          column: 36
        }
      },
      '52': {
        start: {
          line: 207,
          column: 2
        },
        end: {
          line: 207,
          column: 51
        }
      },
      '53': {
        start: {
          line: 214,
          column: 2
        },
        end: {
          line: 216,
          column: 67
        }
      },
      '54': {
        start: {
          line: 216,
          column: 27
        },
        end: {
          line: 216,
          column: 64
        }
      },
      '55': {
        start: {
          line: 221,
          column: 2
        },
        end: {
          line: 221,
          column: 46
        }
      },
      '56': {
        start: {
          line: 221,
          column: 29
        },
        end: {
          line: 221,
          column: 38
        }
      },
      '57': {
        start: {
          line: 231,
          column: 2
        },
        end: {
          line: 246,
          column: 4
        }
      },
      '58': {
        start: {
          line: 232,
          column: 4
        },
        end: {
          line: 245,
          column: 5
        }
      },
      '59': {
        start: {
          line: 234,
          column: 8
        },
        end: {
          line: 234,
          column: 25
        }
      },
      '60': {
        start: {
          line: 235,
          column: 8
        },
        end: {
          line: 237,
          column: 9
        }
      },
      '61': {
        start: {
          line: 236,
          column: 10
        },
        end: {
          line: 236,
          column: 30
        }
      },
      '62': {
        start: {
          line: 240,
          column: 8
        },
        end: {
          line: 240,
          column: 28
        }
      },
      '63': {
        start: {
          line: 243,
          column: 8
        },
        end: {
          line: 243,
          column: 28
        }
      },
      '64': {
        start: {
          line: 258,
          column: 6
        },
        end: {
          line: 260,
          column: 3
        }
      },
      '65': {
        start: {
          line: 259,
          column: 4
        },
        end: {
          line: 259,
          column: 41
        }
      },
      '66': {
        start: {
          line: 259,
          column: 27
        },
        end: {
          line: 259,
          column: 40
        }
      },
      '67': {
        start: {
          line: 261,
          column: 2
        },
        end: {
          line: 266,
          column: 51
        }
      },
      '68': {
        start: {
          line: 263,
          column: 6
        },
        end: {
          line: 263,
          column: 32
        }
      },
      '69': {
        start: {
          line: 264,
          column: 6
        },
        end: {
          line: 264,
          column: 25
        }
      },
      '70': {
        start: {
          line: 265,
          column: 28
        },
        end: {
          line: 265,
          column: 30
        }
      },
      '71': {
        start: {
          line: 266,
          column: 24
        },
        end: {
          line: 266,
          column: 49
        }
      },
      '72': {
        start: {
          line: 285,
          column: 18
        },
        end: {
          line: 285,
          column: 32
        }
      },
      '73': {
        start: {
          line: 286,
          column: 18
        },
        end: {
          line: 286,
          column: 43
        }
      },
      '74': {
        start: {
          line: 288,
          column: 2
        },
        end: {
          line: 298,
          column: 3
        }
      },
      '75': {
        start: {
          line: 291,
          column: 6
        },
        end: {
          line: 291,
          column: 45
        }
      },
      '76': {
        start: {
          line: 291,
          column: 21
        },
        end: {
          line: 291,
          column: 44
        }
      },
      '77': {
        start: {
          line: 292,
          column: 6
        },
        end: {
          line: 292,
          column: 12
        }
      },
      '78': {
        start: {
          line: 294,
          column: 6
        },
        end: {
          line: 294,
          column: 41
        }
      },
      '79': {
        start: {
          line: 294,
          column: 21
        },
        end: {
          line: 294,
          column: 40
        }
      },
      '80': {
        start: {
          line: 295,
          column: 6
        },
        end: {
          line: 295,
          column: 12
        }
      },
      '81': {
        start: {
          line: 297,
          column: 6
        },
        end: {
          line: 297,
          column: 47
        }
      },
      '82': {
        start: {
          line: 297,
          column: 21
        },
        end: {
          line: 297,
          column: 46
        }
      },
      '83': {
        start: {
          line: 297,
          column: 37
        },
        end: {
          line: 297,
          column: 45
        }
      },
      '84': {
        start: {
          line: 300,
          column: 2
        },
        end: {
          line: 302,
          column: 3
        }
      },
      '85': {
        start: {
          line: 301,
          column: 4
        },
        end: {
          line: 301,
          column: 25
        }
      },
      '86': {
        start: {
          line: 304,
          column: 2
        },
        end: {
          line: 314,
          column: 5
        }
      },
      '87': {
        start: {
          line: 305,
          column: 30
        },
        end: {
          line: 305,
          column: 46
        }
      },
      '88': {
        start: {
          line: 306,
          column: 22
        },
        end: {
          line: 309,
          column: 5
        }
      },
      '89': {
        start: {
          line: 310,
          column: 4
        },
        end: {
          line: 313,
          column: 6
        }
      },
      '90': {
        start: {
          line: 317,
          column: 25
        },
        end: {
          line: 322,
          column: 2
        }
      },
      '91': {
        start: {
          line: 318,
          column: 2
        },
        end: {
          line: 321,
          column: 5
        }
      },
      '92': {
        start: {
          line: 319,
          column: 4
        },
        end: {
          line: 319,
          column: 20
        }
      },
      '93': {
        start: {
          line: 320,
          column: 4
        },
        end: {
          line: 320,
          column: 24
        }
      },
      '94': {
        start: {
          line: 324,
          column: 25
        },
        end: {
          line: 332,
          column: 2
        }
      },
      '95': {
        start: {
          line: 325,
          column: 18
        },
        end: {
          line: 328,
          column: 4
        }
      },
      '96': {
        start: {
          line: 326,
          column: 4
        },
        end: {
          line: 326,
          column: 20
        }
      },
      '97': {
        start: {
          line: 327,
          column: 4
        },
        end: {
          line: 327,
          column: 24
        }
      },
      '98': {
        start: {
          line: 329,
          column: 2
        },
        end: {
          line: 331,
          column: 4
        }
      },
      '99': {
        start: {
          line: 330,
          column: 4
        },
        end: {
          line: 330,
          column: 28
        }
      },
      '100': {
        start: {
          line: 334,
          column: 34
        },
        end: {
          line: 345,
          column: 2
        }
      },
      '101': {
        start: {
          line: 335,
          column: 2
        },
        end: {
          line: 337,
          column: 3
        }
      },
      '102': {
        start: {
          line: 336,
          column: 4
        },
        end: {
          line: 336,
          column: 58
        }
      },
      '103': {
        start: {
          line: 338,
          column: 13
        },
        end: {
          line: 341,
          column: 4
        }
      },
      '104': {
        start: {
          line: 339,
          column: 4
        },
        end: {
          line: 339,
          column: 20
        }
      },
      '105': {
        start: {
          line: 340,
          column: 4
        },
        end: {
          line: 340,
          column: 24
        }
      },
      '106': {
        start: {
          line: 342,
          column: 2
        },
        end: {
          line: 344,
          column: 4
        }
      },
      '107': {
        start: {
          line: 343,
          column: 4
        },
        end: {
          line: 343,
          column: 29
        }
      }
    },
    fnMap: {
      '0': {
        name: 'splitStream',
        decl: {
          start: {
            line: 26,
            column: 16
          },
          end: {
            line: 26,
            column: 27
          }
        },
        loc: {
          start: {
            line: 26,
            column: 75
          },
          end: {
            line: 53,
            column: 1
          }
        },
        line: 26
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 27,
            column: 27
          },
          end: {
            line: 27,
            column: 28
          }
        },
        loc: {
          start: {
            line: 27,
            column: 39
          },
          end: {
            line: 52,
            column: 3
          }
        },
        line: 27
      },
      '2': {
        name: 'onEnd',
        decl: {
          start: {
            line: 30,
            column: 13
          },
          end: {
            line: 30,
            column: 18
          }
        },
        loc: {
          start: {
            line: 30,
            column: 21
          },
          end: {
            line: 35,
            column: 5
          }
        },
        line: 30
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 38,
            column: 6
          },
          end: {
            line: 38,
            column: 7
          }
        },
        loc: {
          start: {
            line: 38,
            column: 15
          },
          end: {
            line: 42,
            column: 7
          }
        },
        line: 38
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 41,
            column: 22
          },
          end: {
            line: 41,
            column: 23
          }
        },
        loc: {
          start: {
            line: 41,
            column: 30
          },
          end: {
            line: 41,
            column: 56
          }
        },
        line: 41
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 43,
            column: 6
          },
          end: {
            line: 43,
            column: 7
          }
        },
        loc: {
          start: {
            line: 43,
            column: 15
          },
          end: {
            line: 46,
            column: 7
          }
        },
        line: 43
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 47,
            column: 6
          },
          end: {
            line: 47,
            column: 7
          }
        },
        loc: {
          start: {
            line: 47,
            column: 12
          },
          end: {
            line: 50,
            column: 7
          }
        },
        line: 47
      },
      '7': {
        name: 'bufferUntil',
        decl: {
          start: {
            line: 64,
            column: 16
          },
          end: {
            line: 64,
            column: 27
          }
        },
        loc: {
          start: {
            line: 67,
            column: 24
          },
          end: {
            line: 96,
            column: 1
          }
        },
        line: 67
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 68,
            column: 27
          },
          end: {
            line: 68,
            column: 28
          }
        },
        loc: {
          start: {
            line: 68,
            column: 39
          },
          end: {
            line: 95,
            column: 3
          }
        },
        line: 68
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 70,
            column: 18
          },
          end: {
            line: 70,
            column: 19
          }
        },
        loc: {
          start: {
            line: 70,
            column: 24
          },
          end: {
            line: 75,
            column: 5
          }
        },
        line: 70
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 77,
            column: 6
          },
          end: {
            line: 77,
            column: 7
          }
        },
        loc: {
          start: {
            line: 77,
            column: 11
          },
          end: {
            line: 85,
            column: 7
          }
        },
        line: 77
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 86,
            column: 6
          },
          end: {
            line: 86,
            column: 7
          }
        },
        loc: {
          start: {
            line: 86,
            column: 13
          },
          end: {
            line: 89,
            column: 7
          }
        },
        line: 86
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 90,
            column: 6
          },
          end: {
            line: 90,
            column: 7
          }
        },
        loc: {
          start: {
            line: 90,
            column: 12
          },
          end: {
            line: 93,
            column: 7
          }
        },
        line: 90
      },
      '13': {
        name: 'cacheWhileSubscribed',
        decl: {
          start: {
            line: 106,
            column: 16
          },
          end: {
            line: 106,
            column: 36
          }
        },
        loc: {
          start: {
            line: 106,
            column: 77
          },
          end: {
            line: 108,
            column: 1
          }
        },
        line: 106
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 107,
            column: 25
          },
          end: {
            line: 107,
            column: 26
          }
        },
        loc: {
          start: {
            line: 107,
            column: 31
          },
          end: {
            line: 107,
            column: 51
          }
        },
        line: 107
      },
      '15': {
        name: 'diffSets',
        decl: {
          start: {
            line: 119,
            column: 16
          },
          end: {
            line: 119,
            column: 24
          }
        },
        loc: {
          start: {
            line: 122,
            column: 23
          },
          end: {
            line: 133,
            column: 1
          }
        },
        line: 122
      },
      '16': {
        name: '(anonymous_16)',
        decl: {
          start: {
            line: 128,
            column: 9
          },
          end: {
            line: 128,
            column: 10
          }
        },
        loc: {
          start: {
            line: 128,
            column: 32
          },
          end: {
            line: 131,
            column: 5
          }
        },
        line: 128
      },
      '17': {
        name: '(anonymous_17)',
        decl: {
          start: {
            line: 132,
            column: 12
          },
          end: {
            line: 132,
            column: 13
          }
        },
        loc: {
          start: {
            line: 132,
            column: 20
          },
          end: {
            line: 132,
            column: 64
          }
        },
        line: 132
      },
      '18': {
        name: 'reconcileSetDiffs',
        decl: {
          start: {
            line: 139,
            column: 16
          },
          end: {
            line: 139,
            column: 33
          }
        },
        loc: {
          start: {
            line: 143,
            column: 15
          },
          end: {
            line: 171,
            column: 1
          }
        },
        line: 143
      },
      '19': {
        name: '(anonymous_19)',
        decl: {
          start: {
            line: 144,
            column: 25
          },
          end: {
            line: 144,
            column: 26
          }
        },
        loc: {
          start: {
            line: 144,
            column: 30
          },
          end: {
            line: 144,
            column: 31
          }
        },
        line: 144
      },
      '20': {
        name: '(anonymous_20)',
        decl: {
          start: {
            line: 146,
            column: 22
          },
          end: {
            line: 146,
            column: 23
          }
        },
        loc: {
          start: {
            line: 146,
            column: 30
          },
          end: {
            line: 151,
            column: 3
          }
        },
        line: 146
      },
      '21': {
        name: '(anonymous_21)',
        decl: {
          start: {
            line: 152,
            column: 21
          },
          end: {
            line: 152,
            column: 22
          }
        },
        loc: {
          start: {
            line: 152,
            column: 27
          },
          end: {
            line: 157,
            column: 3
          }
        },
        line: 152
      },
      '22': {
        name: '(anonymous_22)',
        decl: {
          start: {
            line: 153,
            column: 31
          },
          end: {
            line: 153,
            column: 32
          }
        },
        loc: {
          start: {
            line: 153,
            column: 45
          },
          end: {
            line: 155,
            column: 5
          }
        },
        line: 153
      },
      '23': {
        name: '(anonymous_23)',
        decl: {
          start: {
            line: 160,
            column: 20
          },
          end: {
            line: 160,
            column: 21
          }
        },
        loc: {
          start: {
            line: 160,
            column: 28
          },
          end: {
            line: 168,
            column: 5
          }
        },
        line: 160
      },
      '24': {
        name: '(anonymous_24)',
        decl: {
          start: {
            line: 162,
            column: 25
          },
          end: {
            line: 162,
            column: 26
          }
        },
        loc: {
          start: {
            line: 162,
            column: 33
          },
          end: {
            line: 164,
            column: 7
          }
        },
        line: 162
      },
      '25': {
        name: 'reconcileSets',
        decl: {
          start: {
            line: 201,
            column: 16
          },
          end: {
            line: 201,
            column: 29
          }
        },
        loc: {
          start: {
            line: 205,
            column: 15
          },
          end: {
            line: 208,
            column: 1
          }
        },
        line: 205
      },
      '26': {
        name: 'toggle',
        decl: {
          start: {
            line: 210,
            column: 16
          },
          end: {
            line: 210,
            column: 22
          }
        },
        loc: {
          start: {
            line: 213,
            column: 17
          },
          end: {
            line: 217,
            column: 1
          }
        },
        line: 213
      },
      '27': {
        name: '(anonymous_27)',
        decl: {
          start: {
            line: 216,
            column: 15
          },
          end: {
            line: 216,
            column: 16
          }
        },
        loc: {
          start: {
            line: 216,
            column: 27
          },
          end: {
            line: 216,
            column: 64
          }
        },
        line: 216
      },
      '28': {
        name: 'compact',
        decl: {
          start: {
            line: 219,
            column: 16
          },
          end: {
            line: 219,
            column: 23
          }
        },
        loc: {
          start: {
            line: 219,
            column: 66
          },
          end: {
            line: 222,
            column: 1
          }
        },
        line: 219
      },
      '29': {
        name: '(anonymous_29)',
        decl: {
          start: {
            line: 221,
            column: 24
          },
          end: {
            line: 221,
            column: 25
          }
        },
        loc: {
          start: {
            line: 221,
            column: 29
          },
          end: {
            line: 221,
            column: 38
          }
        },
        line: 221
      },
      '30': {
        name: 'takeWhileInclusive',
        decl: {
          start: {
            line: 227,
            column: 16
          },
          end: {
            line: 227,
            column: 34
          }
        },
        loc: {
          start: {
            line: 230,
            column: 17
          },
          end: {
            line: 247,
            column: 1
          }
        },
        line: 230
      },
      '31': {
        name: '(anonymous_31)',
        decl: {
          start: {
            line: 231,
            column: 27
          },
          end: {
            line: 231,
            column: 28
          }
        },
        loc: {
          start: {
            line: 232,
            column: 4
          },
          end: {
            line: 245,
            column: 5
          }
        },
        line: 232
      },
      '32': {
        name: '(anonymous_32)',
        decl: {
          start: {
            line: 233,
            column: 6
          },
          end: {
            line: 233,
            column: 7
          }
        },
        loc: {
          start: {
            line: 233,
            column: 11
          },
          end: {
            line: 238,
            column: 7
          }
        },
        line: 233
      },
      '33': {
        name: '(anonymous_33)',
        decl: {
          start: {
            line: 239,
            column: 6
          },
          end: {
            line: 239,
            column: 7
          }
        },
        loc: {
          start: {
            line: 239,
            column: 13
          },
          end: {
            line: 241,
            column: 7
          }
        },
        line: 239
      },
      '34': {
        name: '(anonymous_34)',
        decl: {
          start: {
            line: 242,
            column: 6
          },
          end: {
            line: 242,
            column: 7
          }
        },
        loc: {
          start: {
            line: 242,
            column: 12
          },
          end: {
            line: 244,
            column: 7
          }
        },
        line: 242
      },
      '35': {
        name: 'concatLatest',
        decl: {
          start: {
            line: 251,
            column: 16
          },
          end: {
            line: 251,
            column: 28
          }
        },
        loc: {
          start: {
            line: 253,
            column: 24
          },
          end: {
            line: 267,
            column: 1
          }
        },
        line: 253
      },
      '36': {
        name: '(anonymous_36)',
        decl: {
          start: {
            line: 258,
            column: 22
          },
          end: {
            line: 258,
            column: 23
          }
        },
        loc: {
          start: {
            line: 259,
            column: 4
          },
          end: {
            line: 259,
            column: 41
          }
        },
        line: 259
      },
      '37': {
        name: '(anonymous_37)',
        decl: {
          start: {
            line: 259,
            column: 19
          },
          end: {
            line: 259,
            column: 20
          }
        },
        loc: {
          start: {
            line: 259,
            column: 27
          },
          end: {
            line: 259,
            column: 40
          }
        },
        line: 259
      },
      '38': {
        name: '(anonymous_38)',
        decl: {
          start: {
            line: 262,
            column: 10
          },
          end: {
            line: 262,
            column: 11
          }
        },
        loc: {
          start: {
            line: 262,
            column: 42
          },
          end: {
            line: 265,
            column: 5
          }
        },
        line: 262
      },
      '39': {
        name: '(anonymous_39)',
        decl: {
          start: {
            line: 265,
            column: 23
          },
          end: {
            line: 265,
            column: 24
          }
        },
        loc: {
          start: {
            line: 265,
            column: 28
          },
          end: {
            line: 265,
            column: 30
          }
        },
        line: 265
      },
      '40': {
        name: '(anonymous_40)',
        decl: {
          start: {
            line: 266,
            column: 9
          },
          end: {
            line: 266,
            column: 10
          }
        },
        loc: {
          start: {
            line: 266,
            column: 24
          },
          end: {
            line: 266,
            column: 49
          }
        },
        line: 266
      },
      '41': {
        name: 'throttle',
        decl: {
          start: {
            line: 277,
            column: 16
          },
          end: {
            line: 277,
            column: 24
          }
        },
        loc: {
          start: {
            line: 284,
            column: 17
          },
          end: {
            line: 315,
            column: 1
          }
        },
        line: 284
      },
      '42': {
        name: '(anonymous_42)',
        decl: {
          start: {
            line: 291,
            column: 14
          },
          end: {
            line: 291,
            column: 15
          }
        },
        loc: {
          start: {
            line: 291,
            column: 21
          },
          end: {
            line: 291,
            column: 44
          }
        },
        line: 291
      },
      '43': {
        name: '(anonymous_43)',
        decl: {
          start: {
            line: 294,
            column: 14
          },
          end: {
            line: 294,
            column: 15
          }
        },
        loc: {
          start: {
            line: 294,
            column: 21
          },
          end: {
            line: 294,
            column: 40
          }
        },
        line: 294
      },
      '44': {
        name: '(anonymous_44)',
        decl: {
          start: {
            line: 297,
            column: 14
          },
          end: {
            line: 297,
            column: 15
          }
        },
        loc: {
          start: {
            line: 297,
            column: 21
          },
          end: {
            line: 297,
            column: 46
          }
        },
        line: 297
      },
      '45': {
        name: '(anonymous_45)',
        decl: {
          start: {
            line: 297,
            column: 31
          },
          end: {
            line: 297,
            column: 32
          }
        },
        loc: {
          start: {
            line: 297,
            column: 37
          },
          end: {
            line: 297,
            column: 45
          }
        },
        line: 297
      },
      '46': {
        name: '(anonymous_46)',
        decl: {
          start: {
            line: 304,
            column: 27
          },
          end: {
            line: 304,
            column: 28
          }
        },
        loc: {
          start: {
            line: 304,
            column: 39
          },
          end: {
            line: 314,
            column: 3
          }
        },
        line: 304
      },
      '47': {
        name: '(anonymous_47)',
        decl: {
          start: {
            line: 317,
            column: 43
          },
          end: {
            line: 317,
            column: 44
          }
        },
        loc: {
          start: {
            line: 317,
            column: 55
          },
          end: {
            line: 322,
            column: 1
          }
        },
        line: 317
      },
      '48': {
        name: '(anonymous_48)',
        decl: {
          start: {
            line: 318,
            column: 19
          },
          end: {
            line: 318,
            column: 20
          }
        },
        loc: {
          start: {
            line: 318,
            column: 25
          },
          end: {
            line: 321,
            column: 3
          }
        },
        line: 318
      },
      '49': {
        name: '(anonymous_49)',
        decl: {
          start: {
            line: 324,
            column: 43
          },
          end: {
            line: 324,
            column: 44
          }
        },
        loc: {
          start: {
            line: 324,
            column: 55
          },
          end: {
            line: 332,
            column: 1
          }
        },
        line: 324
      },
      '50': {
        name: '(anonymous_50)',
        decl: {
          start: {
            line: 325,
            column: 31
          },
          end: {
            line: 325,
            column: 32
          }
        },
        loc: {
          start: {
            line: 325,
            column: 37
          },
          end: {
            line: 328,
            column: 3
          }
        },
        line: 325
      },
      '51': {
        name: '(anonymous_51)',
        decl: {
          start: {
            line: 329,
            column: 9
          },
          end: {
            line: 329,
            column: 10
          }
        },
        loc: {
          start: {
            line: 329,
            column: 15
          },
          end: {
            line: 331,
            column: 3
          }
        },
        line: 329
      },
      '52': {
        name: '(anonymous_52)',
        decl: {
          start: {
            line: 334,
            column: 52
          },
          end: {
            line: 334,
            column: 53
          }
        },
        loc: {
          start: {
            line: 334,
            column: 64
          },
          end: {
            line: 345,
            column: 1
          }
        },
        line: 334
      },
      '53': {
        name: '(anonymous_53)',
        decl: {
          start: {
            line: 338,
            column: 35
          },
          end: {
            line: 338,
            column: 36
          }
        },
        loc: {
          start: {
            line: 338,
            column: 41
          },
          end: {
            line: 341,
            column: 3
          }
        },
        line: 338
      },
      '54': {
        name: '(anonymous_54)',
        decl: {
          start: {
            line: 342,
            column: 9
          },
          end: {
            line: 342,
            column: 10
          }
        },
        loc: {
          start: {
            line: 342,
            column: 15
          },
          end: {
            line: 344,
            column: 3
          }
        },
        line: 342
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 31,
            column: 6
          },
          end: {
            line: 34,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 31,
            column: 6
          },
          end: {
            line: 34,
            column: 7
          }
        }, {
          start: {
            line: 31,
            column: 6
          },
          end: {
            line: 34,
            column: 7
          }
        }],
        line: 31
      },
      '1': {
        loc: {
          start: {
            line: 71,
            column: 6
          },
          end: {
            line: 74,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 71,
            column: 6
          },
          end: {
            line: 74,
            column: 7
          }
        }, {
          start: {
            line: 71,
            column: 6
          },
          end: {
            line: 74,
            column: 7
          }
        }],
        line: 71
      },
      '2': {
        loc: {
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 80,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 80,
            column: 9
          }
        }, {
          start: {
            line: 78,
            column: 8
          },
          end: {
            line: 80,
            column: 9
          }
        }],
        line: 78
      },
      '3': {
        loc: {
          start: {
            line: 82,
            column: 8
          },
          end: {
            line: 84,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 82,
            column: 8
          },
          end: {
            line: 84,
            column: 9
          }
        }, {
          start: {
            line: 82,
            column: 8
          },
          end: {
            line: 84,
            column: 9
          }
        }],
        line: 82
      },
      '4': {
        loc: {
          start: {
            line: 132,
            column: 20
          },
          end: {
            line: 132,
            column: 64
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 132,
            column: 20
          },
          end: {
            line: 132,
            column: 39
          }
        }, {
          start: {
            line: 132,
            column: 43
          },
          end: {
            line: 132,
            column: 64
          }
        }],
        line: 132
      },
      '5': {
        loc: {
          start: {
            line: 144,
            column: 15
          },
          end: {
            line: 144,
            column: 32
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 144,
            column: 15
          },
          end: {
            line: 144,
            column: 20
          }
        }, {
          start: {
            line: 144,
            column: 25
          },
          end: {
            line: 144,
            column: 31
          }
        }],
        line: 144
      },
      '6': {
        loc: {
          start: {
            line: 216,
            column: 27
          },
          end: {
            line: 216,
            column: 64
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 216,
            column: 37
          },
          end: {
            line: 216,
            column: 43
          }
        }, {
          start: {
            line: 216,
            column: 46
          },
          end: {
            line: 216,
            column: 64
          }
        }],
        line: 216
      },
      '7': {
        loc: {
          start: {
            line: 235,
            column: 8
          },
          end: {
            line: 237,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 235,
            column: 8
          },
          end: {
            line: 237,
            column: 9
          }
        }, {
          start: {
            line: 235,
            column: 8
          },
          end: {
            line: 237,
            column: 9
          }
        }],
        line: 235
      },
      '8': {
        loc: {
          start: {
            line: 285,
            column: 18
          },
          end: {
            line: 285,
            column: 32
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 285,
            column: 18
          },
          end: {
            line: 285,
            column: 26
          }
        }, {
          start: {
            line: 285,
            column: 30
          },
          end: {
            line: 285,
            column: 32
          }
        }],
        line: 285
      },
      '9': {
        loc: {
          start: {
            line: 288,
            column: 2
          },
          end: {
            line: 298,
            column: 3
          }
        },
        type: 'switch',
        locations: [{
          start: {
            line: 289,
            column: 4
          },
          end: {
            line: 292,
            column: 12
          }
        }, {
          start: {
            line: 293,
            column: 4
          },
          end: {
            line: 295,
            column: 12
          }
        }, {
          start: {
            line: 296,
            column: 4
          },
          end: {
            line: 297,
            column: 47
          }
        }],
        line: 288
      },
      '10': {
        loc: {
          start: {
            line: 300,
            column: 2
          },
          end: {
            line: 302,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 300,
            column: 2
          },
          end: {
            line: 302,
            column: 3
          }
        }, {
          start: {
            line: 300,
            column: 2
          },
          end: {
            line: 302,
            column: 3
          }
        }],
        line: 300
      },
      '11': {
        loc: {
          start: {
            line: 335,
            column: 2
          },
          end: {
            line: 337,
            column: 3
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 335,
            column: 2
          },
          end: {
            line: 337,
            column: 3
          }
        }, {
          start: {
            line: 335,
            column: 2
          },
          end: {
            line: 337,
            column: 3
          }
        }],
        line: 335
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0,
      '72': 0,
      '73': 0,
      '74': 0,
      '75': 0,
      '76': 0,
      '77': 0,
      '78': 0,
      '79': 0,
      '80': 0,
      '81': 0,
      '82': 0,
      '83': 0,
      '84': 0,
      '85': 0,
      '86': 0,
      '87': 0,
      '88': 0,
      '89': 0,
      '90': 0,
      '91': 0,
      '92': 0,
      '93': 0,
      '94': 0,
      '95': 0,
      '96': 0,
      '97': 0,
      '98': 0,
      '99': 0,
      '100': 0,
      '101': 0,
      '102': 0,
      '103': 0,
      '104': 0,
      '105': 0,
      '106': 0,
      '107': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0, 0],
      '10': [0, 0],
      '11': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.nextAnimationFrame = exports.macrotask = exports.microtask = undefined;
exports.splitStream = splitStream;
exports.bufferUntil = bufferUntil;
exports.cacheWhileSubscribed = cacheWhileSubscribed;
exports.diffSets = diffSets;
exports.reconcileSetDiffs = reconcileSetDiffs;
exports.reconcileSets = reconcileSets;
exports.toggle = toggle;
exports.compact = compact;
exports.takeWhileInclusive = takeWhileInclusive;
exports.concatLatest = concatLatest;
exports.throttle = throttle;

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('./UniversalDisposable'));
}

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

var _collection;

function _load_collection() {
  return _collection = require('./collection');
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Splits a stream of strings on newlines.
 * Includes the newlines in the resulting stream.
 * Sends any non-newline terminated data before closing.
 * Never sends an empty string.
 */
function splitStream(input) {
  cov_wctxw5jsa.f[0]++;
  cov_wctxw5jsa.s[0]++;

  return _rxjsBundlesRxMinJs.Observable.create(observer => {
    cov_wctxw5jsa.f[1]++;

    let current = (cov_wctxw5jsa.s[1]++, '');

    function onEnd() {
      cov_wctxw5jsa.f[2]++;
      cov_wctxw5jsa.s[2]++;

      if (current !== '') {
        cov_wctxw5jsa.b[0][0]++;
        cov_wctxw5jsa.s[3]++;

        observer.next(current);
        cov_wctxw5jsa.s[4]++;
        current = '';
      } else {
        cov_wctxw5jsa.b[0][1]++;
      }
    }

    cov_wctxw5jsa.s[5]++;
    return input.subscribe(value => {
      cov_wctxw5jsa.f[3]++;

      const lines = (cov_wctxw5jsa.s[6]++, (current + value).split('\n'));
      cov_wctxw5jsa.s[7]++;
      current = lines.pop();
      cov_wctxw5jsa.s[8]++;
      lines.forEach(line => {
        cov_wctxw5jsa.f[4]++;
        cov_wctxw5jsa.s[9]++;
        return observer.next(line + '\n');
      });
    }, error => {
      cov_wctxw5jsa.f[5]++;
      cov_wctxw5jsa.s[10]++;

      onEnd();
      cov_wctxw5jsa.s[11]++;
      observer.error(error);
    }, () => {
      cov_wctxw5jsa.f[6]++;
      cov_wctxw5jsa.s[12]++;

      onEnd();
      cov_wctxw5jsa.s[13]++;
      observer.complete();
    });
  });
}

/**
 * Buffers until the predicate matches an element, then opens a new buffer.
 *
 * @param stream - The observable to buffer
 * @param predicate - A function that will be called every time an element is emitted from the
 *     source. The predicate is passed the current element as well as the buffer at that point
 *     (which includes the element). IMPORTANT: DO NOT MUTATE THE BUFFER. It returns a boolean
 *     specifying whether to complete the buffer (and begin a new one).
 */
/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

/* global requestAnimationFrame, cancelAnimationFrame */

function bufferUntil(stream, condition) {
  cov_wctxw5jsa.f[7]++;
  cov_wctxw5jsa.s[14]++;

  return _rxjsBundlesRxMinJs.Observable.create(observer => {
    cov_wctxw5jsa.f[8]++;

    let buffer = (cov_wctxw5jsa.s[15]++, null);
    cov_wctxw5jsa.s[16]++;
    const flush = () => {
      cov_wctxw5jsa.f[9]++;
      cov_wctxw5jsa.s[17]++;

      if (buffer != null) {
        cov_wctxw5jsa.b[1][0]++;
        cov_wctxw5jsa.s[18]++;

        observer.next(buffer);
        cov_wctxw5jsa.s[19]++;
        buffer = null;
      } else {
        cov_wctxw5jsa.b[1][1]++;
      }
    };
    cov_wctxw5jsa.s[20]++;
    return stream.subscribe(x => {
      cov_wctxw5jsa.f[10]++;
      cov_wctxw5jsa.s[21]++;

      if (buffer == null) {
        cov_wctxw5jsa.b[2][0]++;
        cov_wctxw5jsa.s[22]++;

        buffer = [];
      } else {
        cov_wctxw5jsa.b[2][1]++;
      }
      cov_wctxw5jsa.s[23]++;
      buffer.push(x);
      cov_wctxw5jsa.s[24]++;
      if (condition(x, buffer)) {
        cov_wctxw5jsa.b[3][0]++;
        cov_wctxw5jsa.s[25]++;

        flush();
      } else {
        cov_wctxw5jsa.b[3][1]++;
      }
    }, err => {
      cov_wctxw5jsa.f[11]++;
      cov_wctxw5jsa.s[26]++;

      flush();
      cov_wctxw5jsa.s[27]++;
      observer.error(err);
    }, () => {
      cov_wctxw5jsa.f[12]++;
      cov_wctxw5jsa.s[28]++;

      flush();
      cov_wctxw5jsa.s[29]++;
      observer.complete();
    });
  });
}

/**
 * Caches the latest element as long as there are subscribers. This is useful so that if consumers
 * unsubscribe and then subscribe much later, they do not get an ancient cached value.
 *
 * This is intended to be used with cold Observables. If you have a hot Observable, `cache(1)` will
 * be just fine because the hot Observable will continue producing values even when there are no
 * subscribers, so you can be assured that the cached values are up-to-date.
 */
function cacheWhileSubscribed(input) {
  cov_wctxw5jsa.f[13]++;
  cov_wctxw5jsa.s[30]++;

  return input.multicast(() => {
    cov_wctxw5jsa.f[14]++;
    cov_wctxw5jsa.s[31]++;
    return new _rxjsBundlesRxMinJs.ReplaySubject(1);
  }).refCount();
}

/**
 * Given a stream of sets, return a stream of diffs.
 * **IMPORTANT:** These sets are assumed to be immutable by convention. Don't mutate them!
 */
function diffSets(sets, hash) {
  cov_wctxw5jsa.f[15]++;
  cov_wctxw5jsa.s[32]++;

  return _rxjsBundlesRxMinJs.Observable.concat(_rxjsBundlesRxMinJs.Observable.of(new Set()), // Always start with no items with an empty set
  sets).pairwise().map(([previous, next]) => {
    cov_wctxw5jsa.f[16]++;
    cov_wctxw5jsa.s[33]++;
    return {
      added: (0, (_collection || _load_collection()).setDifference)(next, previous, hash),
      removed: (0, (_collection || _load_collection()).setDifference)(previous, next, hash)
    };
  }).filter(diff => {
    cov_wctxw5jsa.f[17]++;
    cov_wctxw5jsa.s[34]++;
    return (cov_wctxw5jsa.b[4][0]++, diff.added.size > 0) || (cov_wctxw5jsa.b[4][1]++, diff.removed.size > 0);
  });
}

/**
 * Give a stream of diffs, perform an action for each added item and dispose of the returned
 * disposable when the item is removed.
 */
function reconcileSetDiffs(diffs, addAction, hash_) {
  cov_wctxw5jsa.f[18]++;

  const hash = (cov_wctxw5jsa.s[35]++, (cov_wctxw5jsa.b[5][0]++, hash_) || (cov_wctxw5jsa.b[5][1]++, x => {
    cov_wctxw5jsa.f[19]++;
    cov_wctxw5jsa.s[36]++;
    return x;
  }));
  const itemsToDisposables = (cov_wctxw5jsa.s[37]++, new Map());
  cov_wctxw5jsa.s[38]++;
  const disposeItem = item => {
    cov_wctxw5jsa.f[20]++;

    const disposable = (cov_wctxw5jsa.s[39]++, itemsToDisposables.get(hash(item)));
    cov_wctxw5jsa.s[40]++;

    if (!(disposable != null)) {
      throw new Error('Invariant violation: "disposable != null"');
    }

    cov_wctxw5jsa.s[41]++;

    disposable.dispose();
    cov_wctxw5jsa.s[42]++;
    itemsToDisposables.delete(item);
  };
  cov_wctxw5jsa.s[43]++;
  const disposeAll = () => {
    cov_wctxw5jsa.f[21]++;
    cov_wctxw5jsa.s[44]++;

    itemsToDisposables.forEach(disposable => {
      cov_wctxw5jsa.f[22]++;
      cov_wctxw5jsa.s[45]++;

      disposable.dispose();
    });
    cov_wctxw5jsa.s[46]++;
    itemsToDisposables.clear();
  };

  cov_wctxw5jsa.s[47]++;
  return new (_UniversalDisposable || _load_UniversalDisposable()).default(diffs.subscribe(diff => {
    cov_wctxw5jsa.f[23]++;
    cov_wctxw5jsa.s[48]++;

    // For every item that got added, perform the add action.
    diff.added.forEach(item => {
      cov_wctxw5jsa.f[24]++;
      cov_wctxw5jsa.s[49]++;

      itemsToDisposables.set(hash(item), addAction(item));
    });

    // "Undo" the add action for each item that got removed.
    cov_wctxw5jsa.s[50]++;
    diff.removed.forEach(disposeItem);
  }), disposeAll);
}

/**
 * Given a stream of sets, perform a side-effect whenever an item is added (i.e. is present in a
 * set but wasn't in the previous set in the stream), and a corresponding cleanup when it's removed.
 * **IMPORTANT:** These sets are assumed to be immutable by convention. Don't mutate them!
 *
 * Example:
 *
 *    const dogs = Observable.of(
 *      new Set([{name: 'Winston', id: 1}, {name: 'Penelope', id: 2}]),
 *      new Set([{name: 'Winston', id: 1}]),
 *    );
 *    const disposable = reconcileSets(
 *      dogs,
 *      dog => {
 *        const notification = atom.notifications.addSuccess(
 *          `${dog.name} was added!`,
 *          {dismissable: true},
 *        );
 *        return new Disposable(() => { notification.dismiss(); });
 *      },
 *      dog => dog.id,
 *    );
 *
 * The above code will first add notifications saying "Winston was added!" and "Penelope was
 * added!", then dismiss the "Penelope" notification. Since the Winston object is in the final set
 * of the dogs observable, his notification will remain until `disposable.dispose()` is called, at
 * which point the cleanup for all remaining items will be performed.
 */
function reconcileSets(sets, addAction, hash) {
  cov_wctxw5jsa.f[25]++;

  const diffs = (cov_wctxw5jsa.s[51]++, diffSets(sets, hash));
  cov_wctxw5jsa.s[52]++;
  return reconcileSetDiffs(diffs, addAction, hash);
}

function toggle(source, toggler) {
  cov_wctxw5jsa.f[26]++;
  cov_wctxw5jsa.s[53]++;

  return toggler.distinctUntilChanged().switchMap(enabled => {
    cov_wctxw5jsa.f[27]++;
    cov_wctxw5jsa.s[54]++;
    return enabled ? (cov_wctxw5jsa.b[6][0]++, source) : (cov_wctxw5jsa.b[6][1]++, _rxjsBundlesRxMinJs.Observable.empty());
  });
}

function compact(source) {
  cov_wctxw5jsa.f[28]++;
  cov_wctxw5jsa.s[55]++;

  // Flow does not understand the semantics of `filter`
  return source.filter(x => {
    cov_wctxw5jsa.f[29]++;
    cov_wctxw5jsa.s[56]++;
    return x != null;
  });
}

/**
 * Like `takeWhile`, but includes the first item that doesn't match the predicate.
 */
function takeWhileInclusive(source, predicate) {
  cov_wctxw5jsa.f[30]++;
  cov_wctxw5jsa.s[57]++;

  return _rxjsBundlesRxMinJs.Observable.create(observer => {
    cov_wctxw5jsa.f[31]++;
    cov_wctxw5jsa.s[58]++;
    return source.subscribe(x => {
      cov_wctxw5jsa.f[32]++;
      cov_wctxw5jsa.s[59]++;

      observer.next(x);
      cov_wctxw5jsa.s[60]++;
      if (!predicate(x)) {
        cov_wctxw5jsa.b[7][0]++;
        cov_wctxw5jsa.s[61]++;

        observer.complete();
      } else {
        cov_wctxw5jsa.b[7][1]++;
      }
    }, err => {
      cov_wctxw5jsa.f[33]++;
      cov_wctxw5jsa.s[62]++;

      observer.error(err);
    }, () => {
      cov_wctxw5jsa.f[34]++;
      cov_wctxw5jsa.s[63]++;

      observer.complete();
    });
  });
}

// Concatenate the latest values from each input observable into one big list.
// Observables who have not emitted a value yet are treated as empty.
function concatLatest(...observables) {
  cov_wctxw5jsa.f[35]++;

  // First, tag all input observables with their index.
  const tagged = (cov_wctxw5jsa.s[64]++, observables.map((observable, index) => {
    cov_wctxw5jsa.f[36]++;
    cov_wctxw5jsa.s[65]++;
    return observable.map(list => {
      cov_wctxw5jsa.f[37]++;
      cov_wctxw5jsa.s[66]++;
      return [list, index];
    });
  }));
  cov_wctxw5jsa.s[67]++;
  return _rxjsBundlesRxMinJs.Observable.merge(...tagged).scan((accumulator, [list, index]) => {
    cov_wctxw5jsa.f[38]++;
    cov_wctxw5jsa.s[68]++;

    accumulator[index] = list;
    cov_wctxw5jsa.s[69]++;
    return accumulator;
  }, observables.map(x => {
    cov_wctxw5jsa.f[39]++;
    cov_wctxw5jsa.s[70]++;
    return [];
  })).map(accumulator => {
    cov_wctxw5jsa.f[40]++;
    cov_wctxw5jsa.s[71]++;
    return [].concat(...accumulator);
  });
}

/**
 * A more sensible alternative to RxJS's throttle/audit/sample operators.
 */
function throttle(source, duration, options_) {
  cov_wctxw5jsa.f[41]++;

  const options = (cov_wctxw5jsa.s[72]++, (cov_wctxw5jsa.b[8][0]++, options_) || (cov_wctxw5jsa.b[8][1]++, {}));
  const leading = (cov_wctxw5jsa.s[73]++, options.leading !== false);
  let audit;
  cov_wctxw5jsa.s[74]++;
  switch (typeof duration) {
    case 'number':
      cov_wctxw5jsa.b[9][0]++;
      cov_wctxw5jsa.s[75]++;

      // $FlowFixMe: Add `auditTime()` to Flow defs
      audit = obs => {
        cov_wctxw5jsa.f[42]++;
        cov_wctxw5jsa.s[76]++;
        return obs.auditTime(duration);
      };
      cov_wctxw5jsa.s[77]++;
      break;
    case 'function':
      cov_wctxw5jsa.b[9][1]++;
      cov_wctxw5jsa.s[78]++;

      audit = obs => {
        cov_wctxw5jsa.f[43]++;
        cov_wctxw5jsa.s[79]++;
        return obs.audit(duration);
      };
      cov_wctxw5jsa.s[80]++;
      break;
    default:
      cov_wctxw5jsa.b[9][2]++;
      cov_wctxw5jsa.s[81]++;

      audit = obs => {
        cov_wctxw5jsa.f[44]++;
        cov_wctxw5jsa.s[82]++;
        return obs.audit(() => {
          cov_wctxw5jsa.f[45]++;
          cov_wctxw5jsa.s[83]++;
          return duration;
        });
      };
  }

  cov_wctxw5jsa.s[84]++;
  if (!leading) {
    cov_wctxw5jsa.b[10][0]++;
    cov_wctxw5jsa.s[85]++;

    return audit(source);
  } else {
    cov_wctxw5jsa.b[10][1]++;
  }

  cov_wctxw5jsa.s[86]++;
  return _rxjsBundlesRxMinJs.Observable.create(observer => {
    cov_wctxw5jsa.f[46]++;

    const connectableSource = (cov_wctxw5jsa.s[87]++, source.publish());
    const throttled = (cov_wctxw5jsa.s[88]++, _rxjsBundlesRxMinJs.Observable.merge(connectableSource.take(1), audit(connectableSource.skip(1))));
    cov_wctxw5jsa.s[89]++;
    return new (_UniversalDisposable || _load_UniversalDisposable()).default(throttled.subscribe(observer), connectableSource.connect());
  });
}

const microtask = exports.microtask = (cov_wctxw5jsa.s[90]++, _rxjsBundlesRxMinJs.Observable.create(observer => {
  cov_wctxw5jsa.f[47]++;
  cov_wctxw5jsa.s[91]++;

  process.nextTick(() => {
    cov_wctxw5jsa.f[48]++;
    cov_wctxw5jsa.s[92]++;

    observer.next();
    cov_wctxw5jsa.s[93]++;
    observer.complete();
  });
}));

const macrotask = exports.macrotask = (cov_wctxw5jsa.s[94]++, _rxjsBundlesRxMinJs.Observable.create(observer => {
  cov_wctxw5jsa.f[49]++;

  const timerId = (cov_wctxw5jsa.s[95]++, setImmediate(() => {
    cov_wctxw5jsa.f[50]++;
    cov_wctxw5jsa.s[96]++;

    observer.next();
    cov_wctxw5jsa.s[97]++;
    observer.complete();
  }));
  cov_wctxw5jsa.s[98]++;
  return () => {
    cov_wctxw5jsa.f[51]++;
    cov_wctxw5jsa.s[99]++;

    clearImmediate(timerId);
  };
}));

const nextAnimationFrame = exports.nextAnimationFrame = (cov_wctxw5jsa.s[100]++, _rxjsBundlesRxMinJs.Observable.create(observer => {
  cov_wctxw5jsa.f[52]++;
  cov_wctxw5jsa.s[101]++;

  if (typeof requestAnimationFrame === 'undefined') {
    cov_wctxw5jsa.b[11][0]++;
    cov_wctxw5jsa.s[102]++;

    throw new Error('This util can only be used in Atom');
  } else {
    cov_wctxw5jsa.b[11][1]++;
  }
  const id = (cov_wctxw5jsa.s[103]++, requestAnimationFrame(() => {
    cov_wctxw5jsa.f[53]++;
    cov_wctxw5jsa.s[104]++;

    observer.next();
    cov_wctxw5jsa.s[105]++;
    observer.complete();
  }));
  cov_wctxw5jsa.s[106]++;
  return () => {
    cov_wctxw5jsa.f[54]++;
    cov_wctxw5jsa.s[107]++;

    cancelAnimationFrame(id);
  };
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9ic2VydmFibGUuanMiXSwibmFtZXMiOlsic3BsaXRTdHJlYW0iLCJidWZmZXJVbnRpbCIsImNhY2hlV2hpbGVTdWJzY3JpYmVkIiwiZGlmZlNldHMiLCJyZWNvbmNpbGVTZXREaWZmcyIsInJlY29uY2lsZVNldHMiLCJ0b2dnbGUiLCJjb21wYWN0IiwidGFrZVdoaWxlSW5jbHVzaXZlIiwiY29uY2F0TGF0ZXN0IiwidGhyb3R0bGUiLCJpbnB1dCIsImNyZWF0ZSIsIm9ic2VydmVyIiwiY3VycmVudCIsIm9uRW5kIiwibmV4dCIsInN1YnNjcmliZSIsInZhbHVlIiwibGluZXMiLCJzcGxpdCIsInBvcCIsImZvckVhY2giLCJsaW5lIiwiZXJyb3IiLCJjb21wbGV0ZSIsInN0cmVhbSIsImNvbmRpdGlvbiIsImJ1ZmZlciIsImZsdXNoIiwieCIsInB1c2giLCJlcnIiLCJtdWx0aWNhc3QiLCJyZWZDb3VudCIsInNldHMiLCJoYXNoIiwiY29uY2F0Iiwib2YiLCJTZXQiLCJwYWlyd2lzZSIsIm1hcCIsInByZXZpb3VzIiwiYWRkZWQiLCJyZW1vdmVkIiwiZmlsdGVyIiwiZGlmZiIsInNpemUiLCJkaWZmcyIsImFkZEFjdGlvbiIsImhhc2hfIiwiaXRlbXNUb0Rpc3Bvc2FibGVzIiwiTWFwIiwiZGlzcG9zZUl0ZW0iLCJpdGVtIiwiZGlzcG9zYWJsZSIsImdldCIsImRpc3Bvc2UiLCJkZWxldGUiLCJkaXNwb3NlQWxsIiwiY2xlYXIiLCJzZXQiLCJzb3VyY2UiLCJ0b2dnbGVyIiwiZGlzdGluY3RVbnRpbENoYW5nZWQiLCJzd2l0Y2hNYXAiLCJlbmFibGVkIiwiZW1wdHkiLCJwcmVkaWNhdGUiLCJvYnNlcnZhYmxlcyIsInRhZ2dlZCIsIm9ic2VydmFibGUiLCJpbmRleCIsImxpc3QiLCJtZXJnZSIsInNjYW4iLCJhY2N1bXVsYXRvciIsImR1cmF0aW9uIiwib3B0aW9uc18iLCJvcHRpb25zIiwibGVhZGluZyIsImF1ZGl0Iiwib2JzIiwiYXVkaXRUaW1lIiwiY29ubmVjdGFibGVTb3VyY2UiLCJwdWJsaXNoIiwidGhyb3R0bGVkIiwidGFrZSIsInNraXAiLCJjb25uZWN0IiwibWljcm90YXNrIiwicHJvY2VzcyIsIm5leHRUaWNrIiwibWFjcm90YXNrIiwidGltZXJJZCIsInNldEltbWVkaWF0ZSIsImNsZWFySW1tZWRpYXRlIiwibmV4dEFuaW1hdGlvbkZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiRXJyb3IiLCJpZCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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O0FBRHFCO0FBRXJCSCxhQUFTWSxRQUFUO0FBQ0QsR0FIRDtBQUlELENBTHdCLENBQVosQ0FBTjs7QUFPQSxNQUFNb0Usd0RBQVksK0JBQVdqRixNQUFYLENBQWtCQyxZQUFZO0FBQUE7O0FBQ3JELFFBQU1pRixrQ0FBVUMsYUFBYSxNQUFNO0FBQUE7QUFBQTs7QUFDakNsRixhQUFTRyxJQUFUO0FBRGlDO0FBRWpDSCxhQUFTWSxRQUFUO0FBQ0QsR0FIZSxDQUFWLENBQU47QUFEcUQ7QUFLckQsU0FBTyxNQUFNO0FBQUE7QUFBQTs7QUFDWHVFLG1CQUFlRixPQUFmO0FBQ0QsR0FGRDtBQUdELENBUndCLENBQVosQ0FBTjs7QUFVQSxNQUFNRywyRUFBcUIsK0JBQVdyRixNQUFYLENBQWtCQyxZQUFZO0FBQUE7QUFBQTs7QUFDOUQsTUFBSSxPQUFPcUYscUJBQVAsS0FBaUMsV0FBckMsRUFBa0Q7QUFBQTtBQUFBOztBQUNoRCxVQUFNLElBQUlDLEtBQUosQ0FBVSxvQ0FBVixDQUFOO0FBQ0QsR0FGRDtBQUFBO0FBQUE7QUFHQSxRQUFNQyw4QkFBS0Ysc0JBQXNCLE1BQU07QUFBQTtBQUFBOztBQUNyQ3JGLGFBQVNHLElBQVQ7QUFEcUM7QUFFckNILGFBQVNZLFFBQVQ7QUFDRCxHQUhVLENBQUwsQ0FBTjtBQUo4RDtBQVE5RCxTQUFPLE1BQU07QUFBQTtBQUFBOztBQUNYNEUseUJBQXFCRCxFQUFyQjtBQUNELEdBRkQ7QUFHRCxDQVhpQyxDQUFyQixDQUFOIiwiZmlsZSI6Im9ic2VydmFibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4vKiBnbG9iYWwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLCBjYW5jZWxBbmltYXRpb25GcmFtZSAqL1xuXG5pbXBvcnQgVW5pdmVyc2FsRGlzcG9zYWJsZSBmcm9tICcuL1VuaXZlcnNhbERpc3Bvc2FibGUnO1xuaW1wb3J0IGludmFyaWFudCBmcm9tICdhc3NlcnQnO1xuaW1wb3J0IHtPYnNlcnZhYmxlLCBSZXBsYXlTdWJqZWN0fSBmcm9tICdyeGpzJztcbmltcG9ydCB7c2V0RGlmZmVyZW5jZX0gZnJvbSAnLi9jb2xsZWN0aW9uJztcblxuLyoqXG4gKiBTcGxpdHMgYSBzdHJlYW0gb2Ygc3RyaW5ncyBvbiBuZXdsaW5lcy5cbiAqIEluY2x1ZGVzIHRoZSBuZXdsaW5lcyBpbiB0aGUgcmVzdWx0aW5nIHN0cmVhbS5cbiAqIFNlbmRzIGFueSBub24tbmV3bGluZSB0ZXJtaW5hdGVkIGRhdGEgYmVmb3JlIGNsb3NpbmcuXG4gKiBOZXZlciBzZW5kcyBhbiBlbXB0eSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFN0cmVhbShpbnB1dDogT2JzZXJ2YWJsZTxzdHJpbmc+KTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcbiAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKG9ic2VydmVyID0+IHtcbiAgICBsZXQgY3VycmVudDogc3RyaW5nID0gJyc7XG5cbiAgICBmdW5jdGlvbiBvbkVuZCgpIHtcbiAgICAgIGlmIChjdXJyZW50ICE9PSAnJykge1xuICAgICAgICBvYnNlcnZlci5uZXh0KGN1cnJlbnQpO1xuICAgICAgICBjdXJyZW50ID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlucHV0LnN1YnNjcmliZShcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgY29uc3QgbGluZXMgPSAoY3VycmVudCArIHZhbHVlKS5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGN1cnJlbnQgPSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IG9ic2VydmVyLm5leHQobGluZSArICdcXG4nKSk7XG4gICAgICB9LFxuICAgICAgZXJyb3IgPT4ge1xuICAgICAgICBvbkVuZCgpO1xuICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBvbkVuZCgpO1xuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgfSxcbiAgICApO1xuICB9KTtcbn1cblxuLyoqXG4gKiBCdWZmZXJzIHVudGlsIHRoZSBwcmVkaWNhdGUgbWF0Y2hlcyBhbiBlbGVtZW50LCB0aGVuIG9wZW5zIGEgbmV3IGJ1ZmZlci5cbiAqXG4gKiBAcGFyYW0gc3RyZWFtIC0gVGhlIG9ic2VydmFibGUgdG8gYnVmZmVyXG4gKiBAcGFyYW0gcHJlZGljYXRlIC0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIGV2ZXJ5IHRpbWUgYW4gZWxlbWVudCBpcyBlbWl0dGVkIGZyb20gdGhlXG4gKiAgICAgc291cmNlLiBUaGUgcHJlZGljYXRlIGlzIHBhc3NlZCB0aGUgY3VycmVudCBlbGVtZW50IGFzIHdlbGwgYXMgdGhlIGJ1ZmZlciBhdCB0aGF0IHBvaW50XG4gKiAgICAgKHdoaWNoIGluY2x1ZGVzIHRoZSBlbGVtZW50KS4gSU1QT1JUQU5UOiBETyBOT1QgTVVUQVRFIFRIRSBCVUZGRVIuIEl0IHJldHVybnMgYSBib29sZWFuXG4gKiAgICAgc3BlY2lmeWluZyB3aGV0aGVyIHRvIGNvbXBsZXRlIHRoZSBidWZmZXIgKGFuZCBiZWdpbiBhIG5ldyBvbmUpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyVW50aWw8VD4oXG4gIHN0cmVhbTogT2JzZXJ2YWJsZTxUPixcbiAgY29uZGl0aW9uOiAoaXRlbTogVCwgYnVmZmVyOiBBcnJheTxUPikgPT4gYm9vbGVhbixcbik6IE9ic2VydmFibGU8QXJyYXk8VD4+IHtcbiAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKG9ic2VydmVyID0+IHtcbiAgICBsZXQgYnVmZmVyID0gbnVsbDtcbiAgICBjb25zdCBmbHVzaCA9ICgpID0+IHtcbiAgICAgIGlmIChidWZmZXIgIT0gbnVsbCkge1xuICAgICAgICBvYnNlcnZlci5uZXh0KGJ1ZmZlcik7XG4gICAgICAgIGJ1ZmZlciA9IG51bGw7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gc3RyZWFtLnN1YnNjcmliZShcbiAgICAgIHggPT4ge1xuICAgICAgICBpZiAoYnVmZmVyID09IG51bGwpIHtcbiAgICAgICAgICBidWZmZXIgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXIucHVzaCh4KTtcbiAgICAgICAgaWYgKGNvbmRpdGlvbih4LCBidWZmZXIpKSB7XG4gICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVyciA9PiB7XG4gICAgICAgIGZsdXNoKCk7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBmbHVzaCgpO1xuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgfSxcbiAgICApO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDYWNoZXMgdGhlIGxhdGVzdCBlbGVtZW50IGFzIGxvbmcgYXMgdGhlcmUgYXJlIHN1YnNjcmliZXJzLiBUaGlzIGlzIHVzZWZ1bCBzbyB0aGF0IGlmIGNvbnN1bWVyc1xuICogdW5zdWJzY3JpYmUgYW5kIHRoZW4gc3Vic2NyaWJlIG11Y2ggbGF0ZXIsIHRoZXkgZG8gbm90IGdldCBhbiBhbmNpZW50IGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aCBjb2xkIE9ic2VydmFibGVzLiBJZiB5b3UgaGF2ZSBhIGhvdCBPYnNlcnZhYmxlLCBgY2FjaGUoMSlgIHdpbGxcbiAqIGJlIGp1c3QgZmluZSBiZWNhdXNlIHRoZSBob3QgT2JzZXJ2YWJsZSB3aWxsIGNvbnRpbnVlIHByb2R1Y2luZyB2YWx1ZXMgZXZlbiB3aGVuIHRoZXJlIGFyZSBub1xuICogc3Vic2NyaWJlcnMsIHNvIHlvdSBjYW4gYmUgYXNzdXJlZCB0aGF0IHRoZSBjYWNoZWQgdmFsdWVzIGFyZSB1cC10by1kYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FjaGVXaGlsZVN1YnNjcmliZWQ8VD4oaW5wdXQ6IE9ic2VydmFibGU8VD4pOiBPYnNlcnZhYmxlPFQ+IHtcbiAgcmV0dXJuIGlucHV0Lm11bHRpY2FzdCgoKSA9PiBuZXcgUmVwbGF5U3ViamVjdCgxKSkucmVmQ291bnQoKTtcbn1cblxudHlwZSBEaWZmPFQ+ID0ge1xuICBhZGRlZDogU2V0PFQ+LFxuICByZW1vdmVkOiBTZXQ8VD4sXG59O1xuXG4vKipcbiAqIEdpdmVuIGEgc3RyZWFtIG9mIHNldHMsIHJldHVybiBhIHN0cmVhbSBvZiBkaWZmcy5cbiAqICoqSU1QT1JUQU5UOioqIFRoZXNlIHNldHMgYXJlIGFzc3VtZWQgdG8gYmUgaW1tdXRhYmxlIGJ5IGNvbnZlbnRpb24uIERvbid0IG11dGF0ZSB0aGVtIVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlNldHM8VD4oXG4gIHNldHM6IE9ic2VydmFibGU8U2V0PFQ+PixcbiAgaGFzaD86ICh2OiBUKSA9PiBhbnksXG4pOiBPYnNlcnZhYmxlPERpZmY8VD4+IHtcbiAgcmV0dXJuIE9ic2VydmFibGUuY29uY2F0KFxuICAgIE9ic2VydmFibGUub2YobmV3IFNldCgpKSwgLy8gQWx3YXlzIHN0YXJ0IHdpdGggbm8gaXRlbXMgd2l0aCBhbiBlbXB0eSBzZXRcbiAgICBzZXRzLFxuICApXG4gICAgLnBhaXJ3aXNlKClcbiAgICAubWFwKChbcHJldmlvdXMsIG5leHRdKSA9PiAoe1xuICAgICAgYWRkZWQ6IHNldERpZmZlcmVuY2UobmV4dCwgcHJldmlvdXMsIGhhc2gpLFxuICAgICAgcmVtb3ZlZDogc2V0RGlmZmVyZW5jZShwcmV2aW91cywgbmV4dCwgaGFzaCksXG4gICAgfSkpXG4gICAgLmZpbHRlcihkaWZmID0+IGRpZmYuYWRkZWQuc2l6ZSA+IDAgfHwgZGlmZi5yZW1vdmVkLnNpemUgPiAwKTtcbn1cblxuLyoqXG4gKiBHaXZlIGEgc3RyZWFtIG9mIGRpZmZzLCBwZXJmb3JtIGFuIGFjdGlvbiBmb3IgZWFjaCBhZGRlZCBpdGVtIGFuZCBkaXNwb3NlIG9mIHRoZSByZXR1cm5lZFxuICogZGlzcG9zYWJsZSB3aGVuIHRoZSBpdGVtIGlzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNvbmNpbGVTZXREaWZmczxUPihcbiAgZGlmZnM6IE9ic2VydmFibGU8RGlmZjxUPj4sXG4gIGFkZEFjdGlvbjogKGFkZGVkSXRlbTogVCkgPT4gSURpc3Bvc2FibGUsXG4gIGhhc2hfPzogKHY6IFQpID0+IGFueSxcbik6IElEaXNwb3NhYmxlIHtcbiAgY29uc3QgaGFzaCA9IGhhc2hfIHx8ICh4ID0+IHgpO1xuICBjb25zdCBpdGVtc1RvRGlzcG9zYWJsZXMgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IGRpc3Bvc2VJdGVtID0gaXRlbSA9PiB7XG4gICAgY29uc3QgZGlzcG9zYWJsZSA9IGl0ZW1zVG9EaXNwb3NhYmxlcy5nZXQoaGFzaChpdGVtKSk7XG4gICAgaW52YXJpYW50KGRpc3Bvc2FibGUgIT0gbnVsbCk7XG4gICAgZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgaXRlbXNUb0Rpc3Bvc2FibGVzLmRlbGV0ZShpdGVtKTtcbiAgfTtcbiAgY29uc3QgZGlzcG9zZUFsbCA9ICgpID0+IHtcbiAgICBpdGVtc1RvRGlzcG9zYWJsZXMuZm9yRWFjaChkaXNwb3NhYmxlID0+IHtcbiAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIH0pO1xuICAgIGl0ZW1zVG9EaXNwb3NhYmxlcy5jbGVhcigpO1xuICB9O1xuXG4gIHJldHVybiBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZShcbiAgICBkaWZmcy5zdWJzY3JpYmUoZGlmZiA9PiB7XG4gICAgICAvLyBGb3IgZXZlcnkgaXRlbSB0aGF0IGdvdCBhZGRlZCwgcGVyZm9ybSB0aGUgYWRkIGFjdGlvbi5cbiAgICAgIGRpZmYuYWRkZWQuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaXRlbXNUb0Rpc3Bvc2FibGVzLnNldChoYXNoKGl0ZW0pLCBhZGRBY3Rpb24oaXRlbSkpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFwiVW5kb1wiIHRoZSBhZGQgYWN0aW9uIGZvciBlYWNoIGl0ZW0gdGhhdCBnb3QgcmVtb3ZlZC5cbiAgICAgIGRpZmYucmVtb3ZlZC5mb3JFYWNoKGRpc3Bvc2VJdGVtKTtcbiAgICB9KSxcbiAgICBkaXNwb3NlQWxsLFxuICApO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgc3RyZWFtIG9mIHNldHMsIHBlcmZvcm0gYSBzaWRlLWVmZmVjdCB3aGVuZXZlciBhbiBpdGVtIGlzIGFkZGVkIChpLmUuIGlzIHByZXNlbnQgaW4gYVxuICogc2V0IGJ1dCB3YXNuJ3QgaW4gdGhlIHByZXZpb3VzIHNldCBpbiB0aGUgc3RyZWFtKSwgYW5kIGEgY29ycmVzcG9uZGluZyBjbGVhbnVwIHdoZW4gaXQncyByZW1vdmVkLlxuICogKipJTVBPUlRBTlQ6KiogVGhlc2Ugc2V0cyBhcmUgYXNzdW1lZCB0byBiZSBpbW11dGFibGUgYnkgY29udmVudGlvbi4gRG9uJ3QgbXV0YXRlIHRoZW0hXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICBjb25zdCBkb2dzID0gT2JzZXJ2YWJsZS5vZihcbiAqICAgICAgbmV3IFNldChbe25hbWU6ICdXaW5zdG9uJywgaWQ6IDF9LCB7bmFtZTogJ1BlbmVsb3BlJywgaWQ6IDJ9XSksXG4gKiAgICAgIG5ldyBTZXQoW3tuYW1lOiAnV2luc3RvbicsIGlkOiAxfV0pLFxuICogICAgKTtcbiAqICAgIGNvbnN0IGRpc3Bvc2FibGUgPSByZWNvbmNpbGVTZXRzKFxuICogICAgICBkb2dzLFxuICogICAgICBkb2cgPT4ge1xuICogICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGF0b20ubm90aWZpY2F0aW9ucy5hZGRTdWNjZXNzKFxuICogICAgICAgICAgYCR7ZG9nLm5hbWV9IHdhcyBhZGRlZCFgLFxuICogICAgICAgICAge2Rpc21pc3NhYmxlOiB0cnVlfSxcbiAqICAgICAgICApO1xuICogICAgICAgIHJldHVybiBuZXcgRGlzcG9zYWJsZSgoKSA9PiB7IG5vdGlmaWNhdGlvbi5kaXNtaXNzKCk7IH0pO1xuICogICAgICB9LFxuICogICAgICBkb2cgPT4gZG9nLmlkLFxuICogICAgKTtcbiAqXG4gKiBUaGUgYWJvdmUgY29kZSB3aWxsIGZpcnN0IGFkZCBub3RpZmljYXRpb25zIHNheWluZyBcIldpbnN0b24gd2FzIGFkZGVkIVwiIGFuZCBcIlBlbmVsb3BlIHdhc1xuICogYWRkZWQhXCIsIHRoZW4gZGlzbWlzcyB0aGUgXCJQZW5lbG9wZVwiIG5vdGlmaWNhdGlvbi4gU2luY2UgdGhlIFdpbnN0b24gb2JqZWN0IGlzIGluIHRoZSBmaW5hbCBzZXRcbiAqIG9mIHRoZSBkb2dzIG9ic2VydmFibGUsIGhpcyBub3RpZmljYXRpb24gd2lsbCByZW1haW4gdW50aWwgYGRpc3Bvc2FibGUuZGlzcG9zZSgpYCBpcyBjYWxsZWQsIGF0XG4gKiB3aGljaCBwb2ludCB0aGUgY2xlYW51cCBmb3IgYWxsIHJlbWFpbmluZyBpdGVtcyB3aWxsIGJlIHBlcmZvcm1lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY29uY2lsZVNldHM8VD4oXG4gIHNldHM6IE9ic2VydmFibGU8U2V0PFQ+PixcbiAgYWRkQWN0aW9uOiAoYWRkZWRJdGVtOiBUKSA9PiBJRGlzcG9zYWJsZSxcbiAgaGFzaD86ICh2OiBUKSA9PiBhbnksXG4pOiBJRGlzcG9zYWJsZSB7XG4gIGNvbnN0IGRpZmZzID0gZGlmZlNldHMoc2V0cywgaGFzaCk7XG4gIHJldHVybiByZWNvbmNpbGVTZXREaWZmcyhkaWZmcywgYWRkQWN0aW9uLCBoYXNoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZTxUPihcbiAgc291cmNlOiBPYnNlcnZhYmxlPFQ+LFxuICB0b2dnbGVyOiBPYnNlcnZhYmxlPGJvb2xlYW4+LFxuKTogT2JzZXJ2YWJsZTxUPiB7XG4gIHJldHVybiB0b2dnbGVyXG4gICAgLmRpc3RpbmN0VW50aWxDaGFuZ2VkKClcbiAgICAuc3dpdGNoTWFwKGVuYWJsZWQgPT4gKGVuYWJsZWQgPyBzb3VyY2UgOiBPYnNlcnZhYmxlLmVtcHR5KCkpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhY3Q8VD4oc291cmNlOiBPYnNlcnZhYmxlPD9UPik6IE9ic2VydmFibGU8VD4ge1xuICAvLyBGbG93IGRvZXMgbm90IHVuZGVyc3RhbmQgdGhlIHNlbWFudGljcyBvZiBgZmlsdGVyYFxuICByZXR1cm4gKHNvdXJjZS5maWx0ZXIoeCA9PiB4ICE9IG51bGwpOiBhbnkpO1xufVxuXG4vKipcbiAqIExpa2UgYHRha2VXaGlsZWAsIGJ1dCBpbmNsdWRlcyB0aGUgZmlyc3QgaXRlbSB0aGF0IGRvZXNuJ3QgbWF0Y2ggdGhlIHByZWRpY2F0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRha2VXaGlsZUluY2x1c2l2ZTxUPihcbiAgc291cmNlOiBPYnNlcnZhYmxlPFQ+LFxuICBwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbixcbik6IE9ic2VydmFibGU8VD4ge1xuICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUob2JzZXJ2ZXIgPT5cbiAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgeCA9PiB7XG4gICAgICAgIG9ic2VydmVyLm5leHQoeCk7XG4gICAgICAgIGlmICghcHJlZGljYXRlKHgpKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVyciA9PiB7XG4gICAgICAgIG9ic2VydmVyLmVycm9yKGVycik7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgfSxcbiAgICApLFxuICApO1xufVxuXG4vLyBDb25jYXRlbmF0ZSB0aGUgbGF0ZXN0IHZhbHVlcyBmcm9tIGVhY2ggaW5wdXQgb2JzZXJ2YWJsZSBpbnRvIG9uZSBiaWcgbGlzdC5cbi8vIE9ic2VydmFibGVzIHdobyBoYXZlIG5vdCBlbWl0dGVkIGEgdmFsdWUgeWV0IGFyZSB0cmVhdGVkIGFzIGVtcHR5LlxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdExhdGVzdDxUPihcbiAgLi4ub2JzZXJ2YWJsZXM6IEFycmF5PE9ic2VydmFibGU8QXJyYXk8VD4+PlxuKTogT2JzZXJ2YWJsZTxBcnJheTxUPj4ge1xuICAvLyBGaXJzdCwgdGFnIGFsbCBpbnB1dCBvYnNlcnZhYmxlcyB3aXRoIHRoZWlyIGluZGV4LlxuICAvLyBGbG93IGVycm9ycyB3aXRoIGFtYmlndWl0eSB3aXRob3V0IHRoZSBleHBsaWNpdCBhbm5vdGF0aW9uLlxuICBjb25zdCB0YWdnZWQ6IEFycmF5PFxuICAgIE9ic2VydmFibGU8W0FycmF5PFQ+LCBudW1iZXJdPixcbiAgPiA9IG9ic2VydmFibGVzLm1hcCgob2JzZXJ2YWJsZSwgaW5kZXgpID0+XG4gICAgb2JzZXJ2YWJsZS5tYXAobGlzdCA9PiBbbGlzdCwgaW5kZXhdKSxcbiAgKTtcbiAgcmV0dXJuIE9ic2VydmFibGUubWVyZ2UoLi4udGFnZ2VkKVxuICAgIC5zY2FuKChhY2N1bXVsYXRvciwgW2xpc3QsIGluZGV4XSkgPT4ge1xuICAgICAgYWNjdW11bGF0b3JbaW5kZXhdID0gbGlzdDtcbiAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICB9LCBvYnNlcnZhYmxlcy5tYXAoeCA9PiBbXSkpXG4gICAgLm1hcChhY2N1bXVsYXRvciA9PiBbXS5jb25jYXQoLi4uYWNjdW11bGF0b3IpKTtcbn1cblxudHlwZSBUaHJvdHRsZU9wdGlvbnMgPSB7XG4gIC8vIFNob3VsZCB0aGUgZmlyc3QgZWxlbWVudCBiZSBlbWl0dGVkIGltbWVkaXRhdGVseT8gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgbGVhZGluZz86IGJvb2xlYW4sXG59O1xuXG4vKipcbiAqIEEgbW9yZSBzZW5zaWJsZSBhbHRlcm5hdGl2ZSB0byBSeEpTJ3MgdGhyb3R0bGUvYXVkaXQvc2FtcGxlIG9wZXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlPFQ+KFxuICBzb3VyY2U6IE9ic2VydmFibGU8VD4sXG4gIGR1cmF0aW9uOlxuICAgIHwgbnVtYmVyXG4gICAgfCBPYnNlcnZhYmxlPGFueT5cbiAgICB8ICgodmFsdWU6IFQpID0+IE9ic2VydmFibGU8YW55PiB8IFByb21pc2U8YW55PiksXG4gIG9wdGlvbnNfOiA/VGhyb3R0bGVPcHRpb25zLFxuKTogT2JzZXJ2YWJsZTxUPiB7XG4gIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zXyB8fCB7fTtcbiAgY29uc3QgbGVhZGluZyA9IG9wdGlvbnMubGVhZGluZyAhPT0gZmFsc2U7XG4gIGxldCBhdWRpdDtcbiAgc3dpdGNoICh0eXBlb2YgZHVyYXRpb24pIHtcbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgLy8gJEZsb3dGaXhNZTogQWRkIGBhdWRpdFRpbWUoKWAgdG8gRmxvdyBkZWZzXG4gICAgICBhdWRpdCA9IG9icyA9PiBvYnMuYXVkaXRUaW1lKGR1cmF0aW9uKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIGF1ZGl0ID0gb2JzID0+IG9icy5hdWRpdChkdXJhdGlvbik7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYXVkaXQgPSBvYnMgPT4gb2JzLmF1ZGl0KCgpID0+IGR1cmF0aW9uKTtcbiAgfVxuXG4gIGlmICghbGVhZGluZykge1xuICAgIHJldHVybiBhdWRpdChzb3VyY2UpO1xuICB9XG5cbiAgcmV0dXJuIE9ic2VydmFibGUuY3JlYXRlKG9ic2VydmVyID0+IHtcbiAgICBjb25zdCBjb25uZWN0YWJsZVNvdXJjZSA9IHNvdXJjZS5wdWJsaXNoKCk7XG4gICAgY29uc3QgdGhyb3R0bGVkID0gT2JzZXJ2YWJsZS5tZXJnZShcbiAgICAgIGNvbm5lY3RhYmxlU291cmNlLnRha2UoMSksXG4gICAgICBhdWRpdChjb25uZWN0YWJsZVNvdXJjZS5za2lwKDEpKSxcbiAgICApO1xuICAgIHJldHVybiBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZShcbiAgICAgIHRocm90dGxlZC5zdWJzY3JpYmUob2JzZXJ2ZXIpLFxuICAgICAgY29ubmVjdGFibGVTb3VyY2UuY29ubmVjdCgpLFxuICAgICk7XG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgbWljcm90YXNrID0gT2JzZXJ2YWJsZS5jcmVhdGUob2JzZXJ2ZXIgPT4ge1xuICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICBvYnNlcnZlci5uZXh0KCk7XG4gICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgfSk7XG59KTtcblxuZXhwb3J0IGNvbnN0IG1hY3JvdGFzayA9IE9ic2VydmFibGUuY3JlYXRlKG9ic2VydmVyID0+IHtcbiAgY29uc3QgdGltZXJJZCA9IHNldEltbWVkaWF0ZSgoKSA9PiB7XG4gICAgb2JzZXJ2ZXIubmV4dCgpO1xuICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNsZWFySW1tZWRpYXRlKHRpbWVySWQpO1xuICB9O1xufSk7XG5cbmV4cG9ydCBjb25zdCBuZXh0QW5pbWF0aW9uRnJhbWUgPSBPYnNlcnZhYmxlLmNyZWF0ZShvYnNlcnZlciA9PiB7XG4gIGlmICh0eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhpcyB1dGlsIGNhbiBvbmx5IGJlIHVzZWQgaW4gQXRvbScpO1xuICB9XG4gIGNvbnN0IGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBvYnNlcnZlci5uZXh0KCk7XG4gICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgfSk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xuICB9O1xufSk7XG4iXX0=