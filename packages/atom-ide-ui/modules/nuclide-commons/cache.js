'use strict';

var cov_1x9od9a3gp = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/cache.js',
      hash = 'a88b8d7418dfca04e6071dc4ef2c15b4ada7cc49',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons/cache.js',
    statementMap: {
      '0': {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 26,
          column: 29
        }
      },
      '1': {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 27,
          column: 28
        }
      },
      '2': {
        start: {
          line: 28,
          column: 4
        },
        end: {
          line: 28,
          column: 38
        }
      },
      '3': {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 41
        }
      },
      '4': {
        start: {
          line: 33,
          column: 4
        },
        end: {
          line: 33,
          column: 33
        }
      },
      '5': {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 45,
          column: 5
        }
      },
      '6': {
        start: {
          line: 38,
          column: 23
        },
        end: {
          line: 38,
          column: 41
        }
      },
      '7': {
        start: {
          line: 39,
          column: 6
        },
        end: {
          line: 39,
          column: 38
        }
      },
      '8': {
        start: {
          line: 40,
          column: 6
        },
        end: {
          line: 40,
          column: 49
        }
      },
      '9': {
        start: {
          line: 41,
          column: 6
        },
        end: {
          line: 41,
          column: 22
        }
      },
      '10': {
        start: {
          line: 44,
          column: 6
        },
        end: {
          line: 44,
          column: 42
        }
      },
      '11': {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 56,
          column: 5
        }
      },
      '12': {
        start: {
          line: 53,
          column: 6
        },
        end: {
          line: 55,
          column: 7
        }
      },
      '13': {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 54,
          column: 33
        }
      },
      '14': {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 60,
          column: 5
        }
      },
      '15': {
        start: {
          line: 59,
          column: 6
        },
        end: {
          line: 59,
          column: 23
        }
      },
      '16': {
        start: {
          line: 64,
          column: 4
        },
        end: {
          line: 64,
          column: 31
        }
      },
      '17': {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 68,
          column: 33
        }
      },
      '18': {
        start: {
          line: 72,
          column: 4
        },
        end: {
          line: 72,
          column: 56
        }
      },
      '19': {
        start: {
          line: 72,
          column: 46
        },
        end: {
          line: 72,
          column: 54
        }
      },
      '20': {
        start: {
          line: 76,
          column: 4
        },
        end: {
          line: 79,
          column: 6
        }
      },
      '21': {
        start: {
          line: 83,
          column: 4
        },
        end: {
          line: 83,
          column: 56
        }
      },
      '22': {
        start: {
          line: 83,
          column: 46
        },
        end: {
          line: 83,
          column: 54
        }
      },
      '23': {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 94,
          column: 5
        }
      },
      '24': {
        start: {
          line: 88,
          column: 20
        },
        end: {
          line: 88,
          column: 33
        }
      },
      '25': {
        start: {
          line: 89,
          column: 6
        },
        end: {
          line: 89,
          column: 31
        }
      },
      '26': {
        start: {
          line: 90,
          column: 6
        },
        end: {
          line: 90,
          column: 32
        }
      },
      '27': {
        start: {
          line: 91,
          column: 6
        },
        end: {
          line: 91,
          column: 18
        }
      },
      '28': {
        start: {
          line: 93,
          column: 6
        },
        end: {
          line: 93,
          column: 19
        }
      },
      '29': {
        start: {
          line: 99,
          column: 19
        },
        end: {
          line: 99,
          column: 31
        }
      },
      '30': {
        start: {
          line: 100,
          column: 4
        },
        end: {
          line: 100,
          column: 29
        }
      },
      '31': {
        start: {
          line: 101,
          column: 4
        },
        end: {
          line: 103,
          column: 5
        }
      },
      '32': {
        start: {
          line: 102,
          column: 6
        },
        end: {
          line: 102,
          column: 32
        }
      },
      '33': {
        start: {
          line: 107,
          column: 4
        },
        end: {
          line: 107,
          column: 17
        }
      },
      '34': {
        start: {
          line: 108,
          column: 4
        },
        end: {
          line: 108,
          column: 36
        }
      },
      '35': {
        start: {
          line: 113,
          column: 29
        },
        end: {
          line: 115,
          column: 1
        }
      },
      '36': {
        start: {
          line: 114,
          column: 2
        },
        end: {
          line: 114,
          column: 18
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 22,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        },
        loc: {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 30,
            column: 3
          }
        },
        line: 25
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 24,
            column: 48
          },
          end: {
            line: 24,
            column: 49
          }
        },
        loc: {
          start: {
            line: 24,
            column: 57
          },
          end: {
            line: 24,
            column: 59
          }
        },
        line: 24
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 32,
            column: 3
          }
        },
        loc: {
          start: {
            line: 32,
            column: 29
          },
          end: {
            line: 34,
            column: 3
          }
        },
        line: 32
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 36,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        },
        loc: {
          start: {
            line: 36,
            column: 31
          },
          end: {
            line: 46,
            column: 3
          }
        },
        line: 36
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 51,
            column: 2
          },
          end: {
            line: 51,
            column: 3
          }
        },
        loc: {
          start: {
            line: 51,
            column: 39
          },
          end: {
            line: 61,
            column: 3
          }
        },
        line: 51
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 63,
            column: 2
          },
          end: {
            line: 63,
            column: 3
          }
        },
        loc: {
          start: {
            line: 63,
            column: 28
          },
          end: {
            line: 65,
            column: 3
          }
        },
        line: 63
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        },
        loc: {
          start: {
            line: 67,
            column: 32
          },
          end: {
            line: 69,
            column: 3
          }
        },
        line: 67
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 71,
            column: 3
          }
        },
        loc: {
          start: {
            line: 71,
            column: 41
          },
          end: {
            line: 73,
            column: 3
          }
        },
        line: 71
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 72,
            column: 37
          },
          end: {
            line: 72,
            column: 38
          }
        },
        loc: {
          start: {
            line: 72,
            column: 46
          },
          end: {
            line: 72,
            column: 54
          }
        },
        line: 72
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 75,
            column: 2
          },
          end: {
            line: 75,
            column: 3
          }
        },
        loc: {
          start: {
            line: 75,
            column: 53
          },
          end: {
            line: 80,
            column: 3
          }
        },
        line: 75
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 82,
            column: 3
          }
        },
        loc: {
          start: {
            line: 82,
            column: 37
          },
          end: {
            line: 84,
            column: 3
          }
        },
        line: 82
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 83,
            column: 37
          },
          end: {
            line: 83,
            column: 38
          }
        },
        loc: {
          start: {
            line: 83,
            column: 46
          },
          end: {
            line: 83,
            column: 54
          }
        },
        line: 83
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 86,
            column: 2
          },
          end: {
            line: 86,
            column: 3
          }
        },
        loc: {
          start: {
            line: 86,
            column: 32
          },
          end: {
            line: 95,
            column: 3
          }
        },
        line: 86
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 97,
            column: 2
          },
          end: {
            line: 97,
            column: 3
          }
        },
        loc: {
          start: {
            line: 97,
            column: 16
          },
          end: {
            line: 104,
            column: 3
          }
        },
        line: 97
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 106,
            column: 2
          },
          end: {
            line: 106,
            column: 3
          }
        },
        loc: {
          start: {
            line: 106,
            column: 18
          },
          end: {
            line: 109,
            column: 3
          }
        },
        line: 106
      },
      '15': {
        name: '(anonymous_15)',
        decl: {
          start: {
            line: 113,
            column: 29
          },
          end: {
            line: 113,
            column: 30
          }
        },
        loc: {
          start: {
            line: 113,
            column: 53
          },
          end: {
            line: 115,
            column: 1
          }
        },
        line: 113
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 24,
            column: 59
          }
        },
        type: 'default-arg',
        locations: [{
          start: {
            line: 24,
            column: 48
          },
          end: {
            line: 24,
            column: 59
          }
        }],
        line: 24
      },
      '1': {
        loc: {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        }, {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 45,
            column: 5
          }
        }],
        line: 37
      },
      '2': {
        loc: {
          start: {
            line: 53,
            column: 6
          },
          end: {
            line: 55,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 53,
            column: 6
          },
          end: {
            line: 55,
            column: 7
          }
        }, {
          start: {
            line: 53,
            column: 6
          },
          end: {
            line: 55,
            column: 7
          }
        }],
        line: 53
      },
      '3': {
        loc: {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        }, {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        }],
        line: 87
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0
    },
    b: {
      '0': [0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DISPOSE_VALUE = exports.Cache = undefined;

var _rxjsBundlesRxMinJs = require('rxjs/bundles/Rx.min.js');

// A Cache mapping keys to values which creates entries as they are requested.
class Cache {

  constructor(factory, disposeValue = (cov_1x9od9a3gp.b[0][0]++, value => {
    cov_1x9od9a3gp.f[1]++;
  })) {
    cov_1x9od9a3gp.f[0]++;
    cov_1x9od9a3gp.s[0]++;

    this._values = new Map();
    cov_1x9od9a3gp.s[1]++;
    this._factory = factory;
    cov_1x9od9a3gp.s[2]++;
    this._disposeValue = disposeValue;
    cov_1x9od9a3gp.s[3]++;
    this._entriesSubject = new _rxjsBundlesRxMinJs.Subject();
  }

  has(key) {
    cov_1x9od9a3gp.f[2]++;
    cov_1x9od9a3gp.s[4]++;

    return this._values.has(key);
  }

  get(key) {
    cov_1x9od9a3gp.f[3]++;
    cov_1x9od9a3gp.s[5]++;

    if (!this._values.has(key)) {
      cov_1x9od9a3gp.b[1][0]++;

      const newValue = (cov_1x9od9a3gp.s[6]++, this._factory(key));
      cov_1x9od9a3gp.s[7]++;
      this._values.set(key, newValue);
      cov_1x9od9a3gp.s[8]++;
      this._entriesSubject.next([key, newValue]);
      cov_1x9od9a3gp.s[9]++;
      return newValue;
    } else {
      cov_1x9od9a3gp.b[1][1]++;
      cov_1x9od9a3gp.s[10]++;

      // Cannot use invariant as ValueType may include null/undefined.
      return this._values.get(key);
    }
  }

  // After this method this._values.keys() === newKeys.
  // deletes all keys not in newKeys
  // gets all keys in newKeys
  setKeys(newKeys) {
    cov_1x9od9a3gp.f[4]++;
    cov_1x9od9a3gp.s[11]++;

    for (const existingKey of this._values.keys()) {
      cov_1x9od9a3gp.s[12]++;

      if (!newKeys.has(existingKey)) {
        cov_1x9od9a3gp.b[2][0]++;
        cov_1x9od9a3gp.s[13]++;

        this.delete(existingKey);
      } else {
        cov_1x9od9a3gp.b[2][1]++;
      }
    }

    cov_1x9od9a3gp.s[14]++;
    for (const newKey of newKeys) {
      cov_1x9od9a3gp.s[15]++;

      this.get(newKey);
    }
  }

  keys() {
    cov_1x9od9a3gp.f[5]++;
    cov_1x9od9a3gp.s[16]++;

    return this._values.keys();
  }

  values() {
    cov_1x9od9a3gp.f[6]++;
    cov_1x9od9a3gp.s[17]++;

    return this._values.values();
  }

  observeValues() {
    cov_1x9od9a3gp.f[7]++;
    cov_1x9od9a3gp.s[18]++;

    return this.observeEntries().map(entry => {
      cov_1x9od9a3gp.f[8]++;
      cov_1x9od9a3gp.s[19]++;
      return entry[1];
    });
  }

  observeEntries() {
    cov_1x9od9a3gp.f[9]++;
    cov_1x9od9a3gp.s[20]++;

    return _rxjsBundlesRxMinJs.Observable.concat(_rxjsBundlesRxMinJs.Observable.from(this._values.entries()), this._entriesSubject);
  }

  observeKeys() {
    cov_1x9od9a3gp.f[10]++;
    cov_1x9od9a3gp.s[21]++;

    return this.observeEntries().map(entry => {
      cov_1x9od9a3gp.f[11]++;
      cov_1x9od9a3gp.s[22]++;
      return entry[0];
    });
  }

  delete(key) {
    cov_1x9od9a3gp.f[12]++;
    cov_1x9od9a3gp.s[23]++;

    if (this.has(key)) {
      cov_1x9od9a3gp.b[3][0]++;

      const value = (cov_1x9od9a3gp.s[24]++, this.get(key));
      cov_1x9od9a3gp.s[25]++;
      this._values.delete(key);
      cov_1x9od9a3gp.s[26]++;
      this._disposeValue(value);
      cov_1x9od9a3gp.s[27]++;
      return true;
    } else {
      cov_1x9od9a3gp.b[3][1]++;
      cov_1x9od9a3gp.s[28]++;

      return false;
    }
  }

  clear() {
    cov_1x9od9a3gp.f[13]++;

    // Defend against a dispose call removing elements from the Cache.
    const values = (cov_1x9od9a3gp.s[29]++, this._values);
    cov_1x9od9a3gp.s[30]++;
    this._values = new Map();
    cov_1x9od9a3gp.s[31]++;
    for (const value of values.values()) {
      cov_1x9od9a3gp.s[32]++;

      this._disposeValue(value);
    }
  }

  dispose() {
    cov_1x9od9a3gp.f[14]++;
    cov_1x9od9a3gp.s[33]++;

    this.clear();
    cov_1x9od9a3gp.s[34]++;
    this._entriesSubject.complete();
  }
}

exports.Cache = Cache; // Useful for optional second parameter to Cache constructor.
/**
 * Copyright (c) 2017-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 * 
 * @format
 */

cov_1x9od9a3gp.s[35]++;
const DISPOSE_VALUE = exports.DISPOSE_VALUE = value => {
  cov_1x9od9a3gp.f[15]++;
  cov_1x9od9a3gp.s[36]++;

  value.dispose();
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhY2hlLmpzIl0sIm5hbWVzIjpbIkNhY2hlIiwiY29uc3RydWN0b3IiLCJmYWN0b3J5IiwiZGlzcG9zZVZhbHVlIiwidmFsdWUiLCJfdmFsdWVzIiwiTWFwIiwiX2ZhY3RvcnkiLCJfZGlzcG9zZVZhbHVlIiwiX2VudHJpZXNTdWJqZWN0IiwiaGFzIiwia2V5IiwiZ2V0IiwibmV3VmFsdWUiLCJzZXQiLCJuZXh0Iiwic2V0S2V5cyIsIm5ld0tleXMiLCJleGlzdGluZ0tleSIsImtleXMiLCJkZWxldGUiLCJuZXdLZXkiLCJ2YWx1ZXMiLCJvYnNlcnZlVmFsdWVzIiwib2JzZXJ2ZUVudHJpZXMiLCJtYXAiLCJlbnRyeSIsImNvbmNhdCIsImZyb20iLCJlbnRyaWVzIiwib2JzZXJ2ZUtleXMiLCJjbGVhciIsImRpc3Bvc2UiLCJjb21wbGV0ZSIsIkRJU1BPU0VfVkFMVUUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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Q0FBaUI5QixLQUFELElBQXdCO0FBQUE7QUFBQTs7QUFDbkRBLFFBQU00QixPQUFOO0FBQ0QsQ0FGTSIsImZpbGUiOiJjYWNoZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB7T2JzZXJ2YWJsZSwgU3ViamVjdH0gZnJvbSAncnhqcyc7XG5cbi8vIEEgQ2FjaGUgbWFwcGluZyBrZXlzIHRvIHZhbHVlcyB3aGljaCBjcmVhdGVzIGVudHJpZXMgYXMgdGhleSBhcmUgcmVxdWVzdGVkLlxuZXhwb3J0IGNsYXNzIENhY2hlPEtleVR5cGUsIFZhbHVlVHlwZT4ge1xuICBfdmFsdWVzOiBNYXA8S2V5VHlwZSwgVmFsdWVUeXBlPjtcbiAgX2ZhY3Rvcnk6IChrZXk6IEtleVR5cGUpID0+IFZhbHVlVHlwZTtcbiAgX2Rpc3Bvc2VWYWx1ZTogKHZhbHVlOiBWYWx1ZVR5cGUpID0+IG1peGVkO1xuICBfZW50cmllc1N1YmplY3Q6IFN1YmplY3Q8W0tleVR5cGUsIFZhbHVlVHlwZV0+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGZhY3Rvcnk6IChrZXk6IEtleVR5cGUpID0+IFZhbHVlVHlwZSxcbiAgICBkaXNwb3NlVmFsdWU6ICh2YWx1ZTogVmFsdWVUeXBlKSA9PiBtaXhlZCA9IHZhbHVlID0+IHt9LFxuICApIHtcbiAgICB0aGlzLl92YWx1ZXMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgdGhpcy5fZGlzcG9zZVZhbHVlID0gZGlzcG9zZVZhbHVlO1xuICAgIHRoaXMuX2VudHJpZXNTdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgfVxuXG4gIGhhcyhrZXk6IEtleVR5cGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzLmhhcyhrZXkpO1xuICB9XG5cbiAgZ2V0KGtleTogS2V5VHlwZSk6IFZhbHVlVHlwZSB7XG4gICAgaWYgKCF0aGlzLl92YWx1ZXMuaGFzKGtleSkpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5fZmFjdG9yeShrZXkpO1xuICAgICAgdGhpcy5fdmFsdWVzLnNldChrZXksIG5ld1ZhbHVlKTtcbiAgICAgIHRoaXMuX2VudHJpZXNTdWJqZWN0Lm5leHQoW2tleSwgbmV3VmFsdWVdKTtcbiAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2Fubm90IHVzZSBpbnZhcmlhbnQgYXMgVmFsdWVUeXBlIG1heSBpbmNsdWRlIG51bGwvdW5kZWZpbmVkLlxuICAgICAgcmV0dXJuICh0aGlzLl92YWx1ZXMuZ2V0KGtleSk6IGFueSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQWZ0ZXIgdGhpcyBtZXRob2QgdGhpcy5fdmFsdWVzLmtleXMoKSA9PT0gbmV3S2V5cy5cbiAgLy8gZGVsZXRlcyBhbGwga2V5cyBub3QgaW4gbmV3S2V5c1xuICAvLyBnZXRzIGFsbCBrZXlzIGluIG5ld0tleXNcbiAgc2V0S2V5cyhuZXdLZXlzOiBTZXQ8S2V5VHlwZT4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGV4aXN0aW5nS2V5IG9mIHRoaXMuX3ZhbHVlcy5rZXlzKCkpIHtcbiAgICAgIGlmICghbmV3S2V5cy5oYXMoZXhpc3RpbmdLZXkpKSB7XG4gICAgICAgIHRoaXMuZGVsZXRlKGV4aXN0aW5nS2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG5ld0tleSBvZiBuZXdLZXlzKSB7XG4gICAgICB0aGlzLmdldChuZXdLZXkpO1xuICAgIH1cbiAgfVxuXG4gIGtleXMoKTogSXRlcmF0b3I8S2V5VHlwZT4ge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZXMua2V5cygpO1xuICB9XG5cbiAgdmFsdWVzKCk6IEl0ZXJhdG9yPFZhbHVlVHlwZT4ge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZXMudmFsdWVzKCk7XG4gIH1cblxuICBvYnNlcnZlVmFsdWVzKCk6IE9ic2VydmFibGU8VmFsdWVUeXBlPiB7XG4gICAgcmV0dXJuIHRoaXMub2JzZXJ2ZUVudHJpZXMoKS5tYXAoZW50cnkgPT4gZW50cnlbMV0pO1xuICB9XG5cbiAgb2JzZXJ2ZUVudHJpZXMoKTogT2JzZXJ2YWJsZTxbS2V5VHlwZSwgVmFsdWVUeXBlXT4ge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmNvbmNhdChcbiAgICAgIE9ic2VydmFibGUuZnJvbSh0aGlzLl92YWx1ZXMuZW50cmllcygpKSxcbiAgICAgIHRoaXMuX2VudHJpZXNTdWJqZWN0LFxuICAgICk7XG4gIH1cblxuICBvYnNlcnZlS2V5cygpOiBPYnNlcnZhYmxlPEtleVR5cGU+IHtcbiAgICByZXR1cm4gdGhpcy5vYnNlcnZlRW50cmllcygpLm1hcChlbnRyeSA9PiBlbnRyeVswXSk7XG4gIH1cblxuICBkZWxldGUoa2V5OiBLZXlUeXBlKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuaGFzKGtleSkpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXQoa2V5KTtcbiAgICAgIHRoaXMuX3ZhbHVlcy5kZWxldGUoa2V5KTtcbiAgICAgIHRoaXMuX2Rpc3Bvc2VWYWx1ZSh2YWx1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIC8vIERlZmVuZCBhZ2FpbnN0IGEgZGlzcG9zZSBjYWxsIHJlbW92aW5nIGVsZW1lbnRzIGZyb20gdGhlIENhY2hlLlxuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuX3ZhbHVlcztcbiAgICB0aGlzLl92YWx1ZXMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMudmFsdWVzKCkpIHtcbiAgICAgIHRoaXMuX2Rpc3Bvc2VWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgdGhpcy5fZW50cmllc1N1YmplY3QuY29tcGxldGUoKTtcbiAgfVxufVxuXG4vLyBVc2VmdWwgZm9yIG9wdGlvbmFsIHNlY29uZCBwYXJhbWV0ZXIgdG8gQ2FjaGUgY29uc3RydWN0b3IuXG5leHBvcnQgY29uc3QgRElTUE9TRV9WQUxVRSA9ICh2YWx1ZTogSURpc3Bvc2FibGUpID0+IHtcbiAgdmFsdWUuZGlzcG9zZSgpO1xufTtcbiJdfQ==