'use strict';

var cov_t0vxbfk33 = function () {
  var path = '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-atom/FeatureLoader.js',
      hash = 'a9eeb959c00c639f22c6b0ec7038926d845054af',
      global = new Function('return this')(),
      gcv = '__coverage__',
      coverageData = {
    path: '/Users/hansonw/atom-ide-ui/modules/nuclide-commons-atom/FeatureLoader.js',
    statementMap: {
      '0': {
        start: {
          line: 41,
          column: 18
        },
        end: {
          line: 41,
          column: 40
        }
      },
      '1': {
        start: {
          line: 52,
          column: 4
        },
        end: {
          line: 52,
          column: 30
        }
      },
      '2': {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 53,
          column: 53
        }
      },
      '3': {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 28
        }
      },
      '4': {
        start: {
          line: 55,
          column: 4
        },
        end: {
          line: 63,
          column: 6
        }
      },
      '5': {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 68,
          column: 46
        }
      },
      '6': {
        start: {
          line: 80,
          column: 4
        },
        end: {
          line: 85,
          column: 6
        }
      },
      '7': {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 147,
          column: 7
        }
      },
      '8': {
        start: {
          line: 96,
          column: 25
        },
        end: {
          line: 96,
          column: 36
        }
      },
      '9': {
        start: {
          line: 97,
          column: 19
        },
        end: {
          line: 97,
          column: 34
        }
      },
      '10': {
        start: {
          line: 101,
          column: 22
        },
        end: {
          line: 101,
          column: 49
        }
      },
      '11': {
        start: {
          line: 104,
          column: 22
        },
        end: {
          line: 112,
          column: 7
        }
      },
      '12': {
        start: {
          line: 114,
          column: 6
        },
        end: {
          line: 123,
          column: 7
        }
      },
      '13': {
        start: {
          line: 115,
          column: 8
        },
        end: {
          line: 118,
          column: 9
        }
      },
      '14': {
        start: {
          line: 116,
          column: 27
        },
        end: {
          line: 116,
          column: 78
        }
      },
      '15': {
        start: {
          line: 117,
          column: 10
        },
        end: {
          line: 117,
          column: 68
        }
      },
      '16': {
        start: {
          line: 119,
          column: 8
        },
        end: {
          line: 122,
          column: 9
        }
      },
      '17': {
        start: {
          line: 120,
          column: 27
        },
        end: {
          line: 120,
          column: 78
        }
      },
      '18': {
        start: {
          line: 121,
          column: 10
        },
        end: {
          line: 121,
          column: 68
        }
      },
      '19': {
        start: {
          line: 125,
          column: 6
        },
        end: {
          line: 125,
          column: 50
        }
      },
      '20': {
        start: {
          line: 129,
          column: 8
        },
        end: {
          line: 130,
          column: 57
        }
      },
      '21': {
        start: {
          line: 132,
          column: 6
        },
        end: {
          line: 146,
          column: 7
        }
      },
      '22': {
        start: {
          line: 133,
          column: 8
        },
        end: {
          line: 139,
          column: 10
        }
      },
      '23': {
        start: {
          line: 140,
          column: 8
        },
        end: {
          line: 145,
          column: 11
        }
      },
      '24': {
        start: {
          line: 141,
          column: 10
        },
        end: {
          line: 144,
          column: 12
        }
      },
      '25': {
        start: {
          line: 148,
          column: 4
        },
        end: {
          line: 148,
          column: 48
        }
      },
      '26': {
        start: {
          line: 154,
          column: 34
        },
        end: {
          line: 181,
          column: 6
        }
      },
      '27': {
        start: {
          line: 155,
          column: 6
        },
        end: {
          line: 157,
          column: 7
        }
      },
      '28': {
        start: {
          line: 156,
          column: 8
        },
        end: {
          line: 156,
          column: 15
        }
      },
      '29': {
        start: {
          line: 163,
          column: 6
        },
        end: {
          line: 176,
          column: 9
        }
      },
      '30': {
        start: {
          line: 167,
          column: 24
        },
        end: {
          line: 167,
          column: 75
        }
      },
      '31': {
        start: {
          line: 169,
          column: 10
        },
        end: {
          line: 171,
          column: 21
        }
      },
      '32': {
        start: {
          line: 173,
          column: 8
        },
        end: {
          line: 175,
          column: 9
        }
      },
      '33': {
        start: {
          line: 174,
          column: 10
        },
        end: {
          line: 174,
          column: 53
        }
      },
      '34': {
        start: {
          line: 178,
          column: 6
        },
        end: {
          line: 178,
          column: 47
        }
      },
      '35': {
        start: {
          line: 179,
          column: 6
        },
        end: {
          line: 179,
          column: 57
        }
      },
      '36': {
        start: {
          line: 180,
          column: 6
        },
        end: {
          line: 180,
          column: 38
        }
      },
      '37': {
        start: {
          line: 183,
          column: 4
        },
        end: {
          line: 183,
          column: 52
        }
      },
      '38': {
        start: {
          line: 187,
          column: 4
        },
        end: {
          line: 187,
          column: 50
        }
      },
      '39': {
        start: {
          line: 189,
          column: 24
        },
        end: {
          line: 189,
          column: 69
        }
      },
      '40': {
        start: {
          line: 190,
          column: 4
        },
        end: {
          line: 190,
          column: 35
        }
      },
      '41': {
        start: {
          line: 195,
          column: 4
        },
        end: {
          line: 197,
          column: 6
        }
      },
      '42': {
        start: {
          line: 199,
          column: 4
        },
        end: {
          line: 203,
          column: 7
        }
      },
      '43': {
        start: {
          line: 200,
          column: 6
        },
        end: {
          line: 202,
          column: 7
        }
      },
      '44': {
        start: {
          line: 201,
          column: 8
        },
        end: {
          line: 201,
          column: 55
        }
      },
      '45': {
        start: {
          line: 206,
          column: 4
        },
        end: {
          line: 216,
          column: 6
        }
      },
      '46': {
        start: {
          line: 208,
          column: 8
        },
        end: {
          line: 214,
          column: 10
        }
      },
      '47': {
        start: {
          line: 209,
          column: 10
        },
        end: {
          line: 213,
          column: 11
        }
      },
      '48': {
        start: {
          line: 210,
          column: 12
        },
        end: {
          line: 210,
          column: 59
        }
      },
      '49': {
        start: {
          line: 211,
          column: 17
        },
        end: {
          line: 213,
          column: 11
        }
      },
      '50': {
        start: {
          line: 212,
          column: 12
        },
        end: {
          line: 212,
          column: 36
        }
      },
      '51': {
        start: {
          line: 220,
          column: 4
        },
        end: {
          line: 222,
          column: 6
        }
      },
      '52': {
        start: {
          line: 224,
          column: 4
        },
        end: {
          line: 228,
          column: 7
        }
      },
      '53': {
        start: {
          line: 227,
          column: 6
        },
        end: {
          line: 227,
          column: 36
        }
      },
      '54': {
        start: {
          line: 230,
          column: 4
        },
        end: {
          line: 230,
          column: 42
        }
      },
      '55': {
        start: {
          line: 231,
          column: 4
        },
        end: {
          line: 231,
          column: 41
        }
      },
      '56': {
        start: {
          line: 232,
          column: 4
        },
        end: {
          line: 232,
          column: 38
        }
      },
      '57': {
        start: {
          line: 236,
          column: 4
        },
        end: {
          line: 236,
          column: 24
        }
      },
      '58': {
        start: {
          line: 245,
          column: 4
        },
        end: {
          line: 245,
          column: 42
        }
      },
      '59': {
        start: {
          line: 249,
          column: 4
        },
        end: {
          line: 249,
          column: 54
        }
      },
      '60': {
        start: {
          line: 257,
          column: 15
        },
        end: {
          line: 257,
          column: 31
        }
      },
      '61': {
        start: {
          line: 258,
          column: 2
        },
        end: {
          line: 266,
          column: 3
        }
      },
      '62': {
        start: {
          line: 259,
          column: 17
        },
        end: {
          line: 259,
          column: 53
        }
      },
      '63': {
        start: {
          line: 260,
          column: 4
        },
        end: {
          line: 262,
          column: 5
        }
      },
      '64': {
        start: {
          line: 261,
          column: 6
        },
        end: {
          line: 261,
          column: 67
        }
      },
      '65': {
        start: {
          line: 265,
          column: 4
        },
        end: {
          line: 265,
          column: 66
        }
      },
      '66': {
        start: {
          line: 270,
          column: 15
        },
        end: {
          line: 270,
          column: 31
        }
      },
      '67': {
        start: {
          line: 271,
          column: 2
        },
        end: {
          line: 280,
          column: 3
        }
      },
      '68': {
        start: {
          line: 272,
          column: 17
        },
        end: {
          line: 272,
          column: 53
        }
      },
      '69': {
        start: {
          line: 273,
          column: 4
        },
        end: {
          line: 276,
          column: 5
        }
      },
      '70': {
        start: {
          line: 275,
          column: 6
        },
        end: {
          line: 275,
          column: 43
        }
      },
      '71': {
        start: {
          line: 279,
          column: 4
        },
        end: {
          line: 279,
          column: 65
        }
      }
    },
    fnMap: {
      '0': {
        name: '(anonymous_0)',
        decl: {
          start: {
            line: 51,
            column: 2
          },
          end: {
            line: 51,
            column: 3
          }
        },
        loc: {
          start: {
            line: 51,
            column: 64
          },
          end: {
            line: 64,
            column: 3
          }
        },
        line: 51
      },
      '1': {
        name: '(anonymous_1)',
        decl: {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 67,
            column: 3
          }
        },
        loc: {
          start: {
            line: 67,
            column: 15
          },
          end: {
            line: 184,
            column: 3
          }
        },
        line: 67
      },
      '2': {
        name: '(anonymous_2)',
        decl: {
          start: {
            line: 95,
            column: 27
          },
          end: {
            line: 95,
            column: 28
          }
        },
        loc: {
          start: {
            line: 95,
            column: 38
          },
          end: {
            line: 147,
            column: 5
          }
        },
        line: 95
      },
      '3': {
        name: '(anonymous_3)',
        decl: {
          start: {
            line: 140,
            column: 46
          },
          end: {
            line: 140,
            column: 47
          }
        },
        loc: {
          start: {
            line: 140,
            column: 53
          },
          end: {
            line: 145,
            column: 9
          }
        },
        line: 140
      },
      '4': {
        name: '(anonymous_4)',
        decl: {
          start: {
            line: 154,
            column: 65
          },
          end: {
            line: 154,
            column: 66
          }
        },
        loc: {
          start: {
            line: 154,
            column: 73
          },
          end: {
            line: 181,
            column: 5
          }
        },
        line: 154
      },
      '5': {
        name: '(anonymous_5)',
        decl: {
          start: {
            line: 163,
            column: 29
          },
          end: {
            line: 163,
            column: 30
          }
        },
        loc: {
          start: {
            line: 163,
            column: 40
          },
          end: {
            line: 176,
            column: 7
          }
        },
        line: 163
      },
      '6': {
        name: '(anonymous_6)',
        decl: {
          start: {
            line: 186,
            column: 2
          },
          end: {
            line: 186,
            column: 3
          }
        },
        loc: {
          start: {
            line: 186,
            column: 19
          },
          end: {
            line: 217,
            column: 3
          }
        },
        line: 186
      },
      '7': {
        name: '(anonymous_7)',
        decl: {
          start: {
            line: 199,
            column: 27
          },
          end: {
            line: 199,
            column: 28
          }
        },
        loc: {
          start: {
            line: 199,
            column: 38
          },
          end: {
            line: 203,
            column: 5
          }
        },
        line: 199
      },
      '8': {
        name: '(anonymous_8)',
        decl: {
          start: {
            line: 207,
            column: 28
          },
          end: {
            line: 207,
            column: 29
          }
        },
        loc: {
          start: {
            line: 208,
            column: 8
          },
          end: {
            line: 214,
            column: 10
          }
        },
        line: 208
      },
      '9': {
        name: '(anonymous_9)',
        decl: {
          start: {
            line: 208,
            column: 68
          },
          end: {
            line: 208,
            column: 69
          }
        },
        loc: {
          start: {
            line: 208,
            column: 77
          },
          end: {
            line: 214,
            column: 9
          }
        },
        line: 208
      },
      '10': {
        name: '(anonymous_10)',
        decl: {
          start: {
            line: 219,
            column: 2
          },
          end: {
            line: 219,
            column: 3
          }
        },
        loc: {
          start: {
            line: 219,
            column: 21
          },
          end: {
            line: 233,
            column: 3
          }
        },
        line: 219
      },
      '11': {
        name: '(anonymous_11)',
        decl: {
          start: {
            line: 224,
            column: 27
          },
          end: {
            line: 224,
            column: 28
          }
        },
        loc: {
          start: {
            line: 224,
            column: 38
          },
          end: {
            line: 228,
            column: 5
          }
        },
        line: 224
      },
      '12': {
        name: '(anonymous_12)',
        decl: {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 235,
            column: 3
          }
        },
        loc: {
          start: {
            line: 235,
            column: 22
          },
          end: {
            line: 237,
            column: 3
          }
        },
        line: 235
      },
      '13': {
        name: '(anonymous_13)',
        decl: {
          start: {
            line: 239,
            column: 2
          },
          end: {
            line: 239,
            column: 3
          }
        },
        loc: {
          start: {
            line: 239,
            column: 20
          },
          end: {
            line: 246,
            column: 3
          }
        },
        line: 239
      },
      '14': {
        name: '(anonymous_14)',
        decl: {
          start: {
            line: 248,
            column: 2
          },
          end: {
            line: 248,
            column: 3
          }
        },
        loc: {
          start: {
            line: 248,
            column: 49
          },
          end: {
            line: 250,
            column: 3
          }
        },
        line: 248
      },
      '15': {
        name: 'safeDeactivate',
        decl: {
          start: {
            line: 253,
            column: 9
          },
          end: {
            line: 253,
            column: 23
          }
        },
        loc: {
          start: {
            line: 256,
            column: 2
          },
          end: {
            line: 267,
            column: 1
          }
        },
        line: 256
      },
      '16': {
        name: 'safeSerialize',
        decl: {
          start: {
            line: 269,
            column: 9
          },
          end: {
            line: 269,
            column: 22
          }
        },
        loc: {
          start: {
            line: 269,
            column: 41
          },
          end: {
            line: 281,
            column: 1
          }
        },
        line: 269
      }
    },
    branchMap: {
      '0': {
        loc: {
          start: {
            line: 106,
            column: 10
          },
          end: {
            line: 108,
            column: 48
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 107,
            column: 14
          },
          end: {
            line: 107,
            column: 44
          }
        }, {
          start: {
            line: 108,
            column: 14
          },
          end: {
            line: 108,
            column: 48
          }
        }],
        line: 106
      },
      '1': {
        loc: {
          start: {
            line: 109,
            column: 21
          },
          end: {
            line: 109,
            column: 49
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 109,
            column: 21
          },
          end: {
            line: 109,
            column: 43
          }
        }, {
          start: {
            line: 109,
            column: 47
          },
          end: {
            line: 109,
            column: 49
          }
        }],
        line: 109
      },
      '2': {
        loc: {
          start: {
            line: 114,
            column: 6
          },
          end: {
            line: 123,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 114,
            column: 6
          },
          end: {
            line: 123,
            column: 7
          }
        }, {
          start: {
            line: 114,
            column: 6
          },
          end: {
            line: 123,
            column: 7
          }
        }],
        line: 114
      },
      '3': {
        loc: {
          start: {
            line: 115,
            column: 8
          },
          end: {
            line: 118,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 115,
            column: 8
          },
          end: {
            line: 118,
            column: 9
          }
        }, {
          start: {
            line: 115,
            column: 8
          },
          end: {
            line: 118,
            column: 9
          }
        }],
        line: 115
      },
      '4': {
        loc: {
          start: {
            line: 119,
            column: 8
          },
          end: {
            line: 122,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 119,
            column: 8
          },
          end: {
            line: 122,
            column: 9
          }
        }, {
          start: {
            line: 119,
            column: 8
          },
          end: {
            line: 122,
            column: 9
          }
        }],
        line: 119
      },
      '5': {
        loc: {
          start: {
            line: 129,
            column: 8
          },
          end: {
            line: 130,
            column: 57
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 129,
            column: 8
          },
          end: {
            line: 129,
            column: 29
          }
        }, {
          start: {
            line: 130,
            column: 9
          },
          end: {
            line: 130,
            column: 27
          }
        }, {
          start: {
            line: 130,
            column: 31
          },
          end: {
            line: 130,
            column: 56
          }
        }],
        line: 129
      },
      '6': {
        loc: {
          start: {
            line: 132,
            column: 6
          },
          end: {
            line: 146,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 132,
            column: 6
          },
          end: {
            line: 146,
            column: 7
          }
        }, {
          start: {
            line: 132,
            column: 6
          },
          end: {
            line: 146,
            column: 7
          }
        }],
        line: 132
      },
      '7': {
        loc: {
          start: {
            line: 143,
            column: 19
          },
          end: {
            line: 143,
            column: 53
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 143,
            column: 19
          },
          end: {
            line: 143,
            column: 46
          }
        }, {
          start: {
            line: 143,
            column: 50
          },
          end: {
            line: 143,
            column: 53
          }
        }],
        line: 143
      },
      '8': {
        loc: {
          start: {
            line: 155,
            column: 6
          },
          end: {
            line: 157,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 155,
            column: 6
          },
          end: {
            line: 157,
            column: 7
          }
        }, {
          start: {
            line: 155,
            column: 6
          },
          end: {
            line: 157,
            column: 7
          }
        }],
        line: 155
      },
      '9': {
        loc: {
          start: {
            line: 169,
            column: 10
          },
          end: {
            line: 171,
            column: 21
          }
        },
        type: 'cond-expr',
        locations: [{
          start: {
            line: 170,
            column: 14
          },
          end: {
            line: 170,
            column: 67
          }
        }, {
          start: {
            line: 171,
            column: 14
          },
          end: {
            line: 171,
            column: 21
          }
        }],
        line: 169
      },
      '10': {
        loc: {
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        }, {
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 175,
            column: 9
          }
        }],
        line: 173
      },
      '11': {
        loc: {
          start: {
            line: 200,
            column: 6
          },
          end: {
            line: 202,
            column: 7
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 200,
            column: 6
          },
          end: {
            line: 202,
            column: 7
          }
        }, {
          start: {
            line: 200,
            column: 6
          },
          end: {
            line: 202,
            column: 7
          }
        }],
        line: 200
      },
      '12': {
        loc: {
          start: {
            line: 209,
            column: 10
          },
          end: {
            line: 213,
            column: 11
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 209,
            column: 10
          },
          end: {
            line: 213,
            column: 11
          }
        }, {
          start: {
            line: 209,
            column: 10
          },
          end: {
            line: 213,
            column: 11
          }
        }],
        line: 209
      },
      '13': {
        loc: {
          start: {
            line: 211,
            column: 17
          },
          end: {
            line: 213,
            column: 11
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 211,
            column: 17
          },
          end: {
            line: 213,
            column: 11
          }
        }, {
          start: {
            line: 211,
            column: 17
          },
          end: {
            line: 213,
            column: 11
          }
        }],
        line: 211
      },
      '14': {
        loc: {
          start: {
            line: 221,
            column: 6
          },
          end: {
            line: 221,
            column: 72
          }
        },
        type: 'binary-expr',
        locations: [{
          start: {
            line: 221,
            column: 6
          },
          end: {
            line: 221,
            column: 32
          }
        }, {
          start: {
            line: 221,
            column: 36
          },
          end: {
            line: 221,
            column: 72
          }
        }],
        line: 221
      },
      '15': {
        loc: {
          start: {
            line: 255,
            column: 2
          },
          end: {
            line: 255,
            column: 40
          }
        },
        type: 'default-arg',
        locations: [{
          start: {
            line: 255,
            column: 35
          },
          end: {
            line: 255,
            column: 40
          }
        }],
        line: 255
      },
      '16': {
        loc: {
          start: {
            line: 260,
            column: 4
          },
          end: {
            line: 262,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 260,
            column: 4
          },
          end: {
            line: 262,
            column: 5
          }
        }, {
          start: {
            line: 260,
            column: 4
          },
          end: {
            line: 262,
            column: 5
          }
        }],
        line: 260
      },
      '17': {
        loc: {
          start: {
            line: 273,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        },
        type: 'if',
        locations: [{
          start: {
            line: 273,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        }, {
          start: {
            line: 273,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        }],
        line: 273
      }
    },
    s: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0,
      '17': 0,
      '18': 0,
      '19': 0,
      '20': 0,
      '21': 0,
      '22': 0,
      '23': 0,
      '24': 0,
      '25': 0,
      '26': 0,
      '27': 0,
      '28': 0,
      '29': 0,
      '30': 0,
      '31': 0,
      '32': 0,
      '33': 0,
      '34': 0,
      '35': 0,
      '36': 0,
      '37': 0,
      '38': 0,
      '39': 0,
      '40': 0,
      '41': 0,
      '42': 0,
      '43': 0,
      '44': 0,
      '45': 0,
      '46': 0,
      '47': 0,
      '48': 0,
      '49': 0,
      '50': 0,
      '51': 0,
      '52': 0,
      '53': 0,
      '54': 0,
      '55': 0,
      '56': 0,
      '57': 0,
      '58': 0,
      '59': 0,
      '60': 0,
      '61': 0,
      '62': 0,
      '63': 0,
      '64': 0,
      '65': 0,
      '66': 0,
      '67': 0,
      '68': 0,
      '69': 0,
      '70': 0,
      '71': 0
    },
    f: {
      '0': 0,
      '1': 0,
      '2': 0,
      '3': 0,
      '4': 0,
      '5': 0,
      '6': 0,
      '7': 0,
      '8': 0,
      '9': 0,
      '10': 0,
      '11': 0,
      '12': 0,
      '13': 0,
      '14': 0,
      '15': 0,
      '16': 0
    },
    b: {
      '0': [0, 0],
      '1': [0, 0],
      '2': [0, 0],
      '3': [0, 0],
      '4': [0, 0],
      '5': [0, 0, 0],
      '6': [0, 0],
      '7': [0, 0],
      '8': [0, 0],
      '9': [0, 0],
      '10': [0, 0],
      '11': [0, 0],
      '12': [0, 0],
      '13': [0, 0],
      '14': [0, 0],
      '15': [0],
      '16': [0, 0],
      '17': [0, 0]
    },
    _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
  },
      coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  coverageData.hash = hash;
  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _UniversalDisposable;

function _load_UniversalDisposable() {
  return _UniversalDisposable = _interopRequireDefault(require('nuclide-commons/UniversalDisposable'));
}

var _featureConfig;

function _load_featureConfig() {
  return _featureConfig = _interopRequireDefault(require('./feature-config'));
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const { devMode } = (cov_t0vxbfk33.s[0]++, atom.getLoadSettings()); /**
                                                                     * Copyright (c) 2017-present, Facebook, Inc.
                                                                     * All rights reserved.
                                                                     *
                                                                     * This source code is licensed under the BSD-style license found in the
                                                                     * LICENSE file in the root directory of this source tree. An additional grant
                                                                     * of patent rights can be found in the PATENTS file in the same directory.
                                                                     *
                                                                     * 
                                                                     * @format
                                                                     */

/* global localStorage */

class FeatureLoader {

  constructor({ config, features, pkgName }) {
    cov_t0vxbfk33.f[0]++;
    cov_t0vxbfk33.s[1]++;

    this._features = features;
    cov_t0vxbfk33.s[2]++;
    this._loadDisposable = new (_UniversalDisposable || _load_UniversalDisposable()).default();
    cov_t0vxbfk33.s[3]++;
    this._pkgName = pkgName;
    cov_t0vxbfk33.s[4]++;
    this._config = {
      use: {
        title: 'Enabled Features',
        description: 'Enable and disable individual features',
        type: 'object',
        collapsed: true,
        properties: {}
      }
    };
  }

  // Build the config. Should occur with root package's load
  load() {
    cov_t0vxbfk33.f[1]++;
    cov_t0vxbfk33.s[5]++;

    if (!!this._loadDisposable.disposed) {
      throw new Error('Invariant violation: "!this._loadDisposable.disposed"');
    }

    // Add a dummy deserializer. This forces Atom to load Nuclide's main module
    // (this file) when the package is loaded, which is super important because
    // this module loads all of the Nuclide features. We could accomplish the same
    // thing by unsetting [the local storage value][1] that Atom uses to indicate
    // whether the main module load can be deferred, however, that would mean that
    // (for a brief time, at least), the flag would be set. If there were an error
    // during that time and we never got a chance to unset the flag, Nuclide
    // features would never load again!
    //
    // [1] https://github.com/atom/atom/blob/v1.9.8/src/package.coffee#L442


    cov_t0vxbfk33.s[6]++;
    this._loadDisposable.add(atom.deserializers.add({
      name: `${this._pkgName}.ForceMainModuleLoad`,
      deserialize() {}
    }));

    //
    // Build the "config" object. This determines the config defaults and
    // it's what is shown by the Settings view. It includes:
    // (1) An entry to enable/disable each feature - called "${pkgName}.use.*".
    // (2) Each feature's merged config.
    //
    // https://atom.io/docs/api/latest/Config
    //
    cov_t0vxbfk33.s[7]++;
    this._features.forEach(feature => {
      cov_t0vxbfk33.f[2]++;

      const featurePkg = (cov_t0vxbfk33.s[8]++, feature.pkg);
      const name = (cov_t0vxbfk33.s[9]++, featurePkg.name);

      // Sample packages are disabled by default. They are meant for development
      // use only, and aren't included in Nuclide builds.
      const enabled = (cov_t0vxbfk33.s[10]++, !name.startsWith('sample-'));

      // Entry for enabling/disabling the feature
      const setting = (cov_t0vxbfk33.s[11]++, {
        title: featurePkg.displayName == null ? (cov_t0vxbfk33.b[0][0]++, `Enable the "${name}" feature`) : (cov_t0vxbfk33.b[0][1]++, `Enable ${featurePkg.displayName}`),
        description: (cov_t0vxbfk33.b[1][0]++, featurePkg.description) || (cov_t0vxbfk33.b[1][1]++, ''),
        type: 'boolean',
        default: enabled
      });

      cov_t0vxbfk33.s[12]++;
      if (devMode) {
        cov_t0vxbfk33.b[2][0]++;
        cov_t0vxbfk33.s[13]++;

        if (featurePkg.providedServices) {
          cov_t0vxbfk33.b[3][0]++;

          const provides = (cov_t0vxbfk33.s[14]++, Object.keys(featurePkg.providedServices).join(', '));
          cov_t0vxbfk33.s[15]++;
          setting.description += `<br/>**Provides:** _${provides}_`;
        } else {
          cov_t0vxbfk33.b[3][1]++;
        }
        cov_t0vxbfk33.s[16]++;
        if (featurePkg.consumedServices) {
          cov_t0vxbfk33.b[4][0]++;

          const consumes = (cov_t0vxbfk33.s[17]++, Object.keys(featurePkg.consumedServices).join(', '));
          cov_t0vxbfk33.s[18]++;
          setting.description += `<br/>**Consumes:** _${consumes}_`;
        } else {
          cov_t0vxbfk33.b[4][1]++;
        }
      } else {
        cov_t0vxbfk33.b[2][1]++;
      }

      cov_t0vxbfk33.s[19]++;
      this._config.use.properties[name] = setting;

      // Merge in the feature's config
      const featurePkgConfig = (cov_t0vxbfk33.s[20]++, (cov_t0vxbfk33.b[5][0]++, featurePkg.atomConfig) || (cov_t0vxbfk33.b[5][1]++, featurePkg.nuclide) && (cov_t0vxbfk33.b[5][2]++, featurePkg.nuclide.config));

      cov_t0vxbfk33.s[21]++;
      if (featurePkgConfig) {
        cov_t0vxbfk33.b[6][0]++;
        cov_t0vxbfk33.s[22]++;

        this._config[name] = {
          type: 'object',
          title: featurePkg.displayName,
          description: featurePkg.description,
          collapsed: true,
          properties: {}
        };
        cov_t0vxbfk33.s[23]++;
        Object.keys(featurePkgConfig).forEach(key => {
          cov_t0vxbfk33.f[3]++;
          cov_t0vxbfk33.s[24]++;

          this._config[name].properties[key] = Object.assign({}, featurePkgConfig[key], {
            title: (cov_t0vxbfk33.b[7][0]++, featurePkgConfig[key].title) || (cov_t0vxbfk33.b[7][1]++, key)
          });
        });
      } else {
        cov_t0vxbfk33.b[6][1]++;
      }
    });
    cov_t0vxbfk33.s[25]++;
    (_featureConfig || _load_featureConfig()).default.setPackageName(this._pkgName);

    // Nesting loads within loads leads to reverse activation order- that is, if
    // the root package loads feature packages, then the feature package activations will
    // happen before the root package's. So we wait until the root package is done loading,
    // but before it activates, to load the features.
    const initialLoadDisposable = (cov_t0vxbfk33.s[26]++, atom.packages.onDidLoadPackage(pack => {
      cov_t0vxbfk33.f[4]++;
      cov_t0vxbfk33.s[27]++;

      if (pack.name !== this._pkgName) {
        cov_t0vxbfk33.b[8][0]++;
        cov_t0vxbfk33.s[28]++;

        return;
      } else {
        cov_t0vxbfk33.b[8][1]++;
      }

      // Load all the features. This needs to be done during Atom's load phase to
      // make sure that deserializers are registered, etc.
      // https://github.com/atom/atom/blob/v1.1.0/src/atom-environment.coffee#L625-L631
      // https://atom.io/docs/api/latest/PackageManager
      cov_t0vxbfk33.s[29]++;
      this._features.forEach(feature => {
        cov_t0vxbfk33.f[5]++;

        // Config defaults are not merged with user defaults until activate. At
        // this point `atom.config.get` returns the user set value. If it's
        // `undefined`, then the user has not set it.
        const enabled = (cov_t0vxbfk33.s[30]++, atom.config.get(this.useKeyPathForFeature(feature)));
        const shouldEnable = (cov_t0vxbfk33.s[31]++, enabled == null ? (cov_t0vxbfk33.b[9][0]++, this._config.use.properties[feature.pkg.name].default) : (cov_t0vxbfk33.b[9][1]++, enabled));

        cov_t0vxbfk33.s[32]++;
        if (shouldEnable) {
          cov_t0vxbfk33.b[10][0]++;
          cov_t0vxbfk33.s[33]++;

          atom.packages.loadPackage(feature.dirname);
        } else {
          cov_t0vxbfk33.b[10][1]++;
        }
      });

      cov_t0vxbfk33.s[34]++;

      if (!(initialLoadDisposable != null)) {
        throw new Error('Invariant violation: "initialLoadDisposable != null"');
      }

      cov_t0vxbfk33.s[35]++;

      this._loadDisposable.remove(initialLoadDisposable);
      cov_t0vxbfk33.s[36]++;
      initialLoadDisposable.dispose();
    }));

    cov_t0vxbfk33.s[37]++;
    this._loadDisposable.add(initialLoadDisposable);
  }

  activate() {
    cov_t0vxbfk33.f[6]++;
    cov_t0vxbfk33.s[38]++;

    if (!(this._activationDisposable == null)) {
      throw new Error('Invariant violation: "this._activationDisposable == null"');
    }

    const rootPackage = (cov_t0vxbfk33.s[39]++, atom.packages.getLoadedPackage(this._pkgName));
    cov_t0vxbfk33.s[40]++;

    if (!(rootPackage != null)) {
      throw new Error('Invariant violation: "rootPackage != null"');
    }

    // This is a failsafe in case the `.ForceMainModuleLoad` deserializer
    // defined above does not register in time, or if the defer key has been set
    // w/o our knowledge. This can happen during OSS upgrades.


    cov_t0vxbfk33.s[41]++;
    localStorage.removeItem(rootPackage.getCanDeferMainModuleRequireStorageKey());

    cov_t0vxbfk33.s[42]++;
    this._features.forEach(feature => {
      cov_t0vxbfk33.f[7]++;
      cov_t0vxbfk33.s[43]++;

      if (atom.config.get(this.useKeyPathForFeature(feature))) {
        cov_t0vxbfk33.b[11][0]++;
        cov_t0vxbfk33.s[44]++;

        atom.packages.activatePackage(feature.dirname);
      } else {
        cov_t0vxbfk33.b[11][1]++;
      }
    });

    // Watch the config to manage toggling features
    cov_t0vxbfk33.s[45]++;
    this._activationDisposable = new (_UniversalDisposable || _load_UniversalDisposable()).default(...this._features.map(feature => {
      cov_t0vxbfk33.f[8]++;
      cov_t0vxbfk33.s[46]++;
      return atom.config.onDidChange(this.useKeyPathForFeature(feature), event => {
        cov_t0vxbfk33.f[9]++;
        cov_t0vxbfk33.s[47]++;

        if (event.newValue === true) {
          cov_t0vxbfk33.b[12][0]++;
          cov_t0vxbfk33.s[48]++;

          atom.packages.activatePackage(feature.dirname);
        } else {
            cov_t0vxbfk33.b[12][1]++;
            cov_t0vxbfk33.s[49]++;
            if (event.newValue === false) {
              cov_t0vxbfk33.b[13][0]++;
              cov_t0vxbfk33.s[50]++;

              safeDeactivate(feature);
            } else {
              cov_t0vxbfk33.b[13][1]++;
            }
          }
      });
    }));
  }

  deactivate() {
    cov_t0vxbfk33.f[10]++;
    cov_t0vxbfk33.s[51]++;

    if (!((cov_t0vxbfk33.b[14][0]++, this._activationDisposable) && (cov_t0vxbfk33.b[14][1]++, !this._activationDisposable.disposed))) {
      throw new Error('Invariant violation: "this._activationDisposable && !this._activationDisposable.disposed"');
    }

    cov_t0vxbfk33.s[52]++;


    this._features.forEach(feature => {
      cov_t0vxbfk33.f[11]++;
      cov_t0vxbfk33.s[53]++;

      // Deactivate the package, but don't serialize. That needs to be done in a separate phase so that
      // we don't end up disconnecting a service and then serializing the disconnected state.
      safeDeactivate(feature, true);
    });

    cov_t0vxbfk33.s[54]++;

    if (!this._activationDisposable) {
      throw new Error('Invariant violation: "this._activationDisposable"');
    } // reasserting for flow


    cov_t0vxbfk33.s[55]++;
    this._activationDisposable.dispose();
    cov_t0vxbfk33.s[56]++;
    this._activationDisposable = null;
  }

  getConfig() {
    cov_t0vxbfk33.f[12]++;
    cov_t0vxbfk33.s[57]++;

    return this._config;
  }

  serialize() {
    cov_t0vxbfk33.f[13]++;
    cov_t0vxbfk33.s[58]++;

    // When the root package is serialized, all of its features need to be serialized. This is an abuse of
    // `serialize()` since we're using it to do side effects instead of returning the serialization,
    // but it ensures that serialization of the Atom packages happens at the right point in the
    // package lifecycle. Unfortunately, it also means that Nuclide features will be serialized twice
    // on deactivation.
    this._features.forEach(safeSerialize);
  }

  useKeyPathForFeature(feature) {
    cov_t0vxbfk33.f[14]++;
    cov_t0vxbfk33.s[59]++;

    return `${this._pkgName}.use.${feature.pkg.name}`;
  }
}

exports.default = FeatureLoader;
function safeDeactivate(feature, suppressSerialization = (cov_t0vxbfk33.b[15][0]++, false)) {
  cov_t0vxbfk33.f[15]++;

  const name = (cov_t0vxbfk33.s[60]++, feature.pkg.name);
  cov_t0vxbfk33.s[61]++;
  try {
    const pack = (cov_t0vxbfk33.s[62]++, atom.packages.getLoadedPackage(name));
    cov_t0vxbfk33.s[63]++;
    if (pack != null) {
      cov_t0vxbfk33.b[16][0]++;
      cov_t0vxbfk33.s[64]++;

      atom.packages.deactivatePackage(name, suppressSerialization);
    } else {
      cov_t0vxbfk33.b[16][1]++;
    }
  } catch (err) {
    cov_t0vxbfk33.s[65]++;

    // eslint-disable-next-line no-console
    console.error(`Error deactivating "${name}": ${err.message}`);
  }
}

function safeSerialize(feature) {
  cov_t0vxbfk33.f[16]++;

  const name = (cov_t0vxbfk33.s[66]++, feature.pkg.name);
  cov_t0vxbfk33.s[67]++;
  try {
    const pack = (cov_t0vxbfk33.s[68]++, atom.packages.getActivePackage(name));
    cov_t0vxbfk33.s[69]++;
    if (pack != null) {
      cov_t0vxbfk33.b[17][0]++;
      cov_t0vxbfk33.s[70]++;

      // Serialize the package
      atom.packages.serializePackage(pack);
    } else {
      cov_t0vxbfk33.b[17][1]++;
    }
  } catch (err) {
    cov_t0vxbfk33.s[71]++;

    // eslint-disable-next-line no-console
    console.error(`Error serializing "${name}": ${err.message}`);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZlYXR1cmVMb2FkZXIuanMiXSwibmFtZXMiOlsiZGV2TW9kZSIsImF0b20iLCJnZXRMb2FkU2V0dGluZ3MiLCJGZWF0dXJlTG9hZGVyIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmZWF0dXJlcyIsInBrZ05hbWUiLCJfZmVhdHVyZXMiLCJfbG9hZERpc3Bvc2FibGUiLCJfcGtnTmFtZSIsIl9jb25maWciLCJ1c2UiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidHlwZSIsImNvbGxhcHNlZCIsInByb3BlcnRpZXMiLCJsb2FkIiwiZGlzcG9zZWQiLCJhZGQiLCJkZXNlcmlhbGl6ZXJzIiwibmFtZSIsImRlc2VyaWFsaXplIiwiZm9yRWFjaCIsImZlYXR1cmUiLCJmZWF0dXJlUGtnIiwicGtnIiwiZW5hYmxlZCIsInN0YXJ0c1dpdGgiLCJzZXR0aW5nIiwiZGlzcGxheU5hbWUiLCJkZWZhdWx0IiwicHJvdmlkZWRTZXJ2aWNlcyIsInByb3ZpZGVzIiwiT2JqZWN0Iiwia2V5cyIsImpvaW4iLCJjb25zdW1lZFNlcnZpY2VzIiwiY29uc3VtZXMiLCJmZWF0dXJlUGtnQ29uZmlnIiwiYXRvbUNvbmZpZyIsIm51Y2xpZGUiLCJrZXkiLCJzZXRQYWNrYWdlTmFtZSIsImluaXRpYWxMb2FkRGlzcG9zYWJsZSIsInBhY2thZ2VzIiwib25EaWRMb2FkUGFja2FnZSIsInBhY2siLCJnZXQiLCJ1c2VLZXlQYXRoRm9yRmVhdHVyZSIsInNob3VsZEVuYWJsZSIsImxvYWRQYWNrYWdlIiwiZGlybmFtZSIsInJlbW92ZSIsImRpc3Bvc2UiLCJhY3RpdmF0ZSIsIl9hY3RpdmF0aW9uRGlzcG9zYWJsZSIsInJvb3RQYWNrYWdlIiwiZ2V0TG9hZGVkUGFja2FnZSIsImxvY2FsU3RvcmFnZSIsInJlbW92ZUl0ZW0iLCJnZXRDYW5EZWZlck1haW5Nb2R1bGVSZXF1aXJlU3RvcmFnZUtleSIsImFjdGl2YXRlUGFja2FnZSIsIm1hcCIsIm9uRGlkQ2hhbmdlIiwiZXZlbnQiLCJuZXdWYWx1ZSIsInNhZmVEZWFjdGl2YXRlIiwiZGVhY3RpdmF0ZSIsImdldENvbmZpZyIsInNlcmlhbGl6ZSIsInNhZmVTZXJpYWxpemUiLCJzdXBwcmVzc1NlcmlhbGl6YXRpb24iLCJkZWFjdGl2YXRlUGFja2FnZSIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJnZXRBY3RpdmVQYWNrYWdlIiwic2VyaWFsaXplUGFja2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFNSCwrQkFBT0csUUFBUUUsR0FBUixDQUFZTCxJQUFuQixDQUFOO0FBRHVDO0FBRXZDLE1BQUk7QUFDRixVQUFNMEIsK0JBQU8vQyxLQUFLNkMsUUFBTCxDQUFjaUMsZ0JBQWQsQ0FBK0J6RCxJQUEvQixDQUFQLENBQU47QUFERTtBQUVGLFFBQUkwQixRQUFRLElBQVosRUFBa0I7QUFBQTtBQUFBOztBQUNoQjtBQUNBL0MsV0FBSzZDLFFBQUwsQ0FBY2tDLGdCQUFkLENBQStCaEMsSUFBL0I7QUFDRCxLQUhEO0FBQUE7QUFBQTtBQUlELEdBTkQsQ0FNRSxPQUFPMkIsR0FBUCxFQUFZO0FBQUE7O0FBQ1o7QUFDQUMsWUFBUUMsS0FBUixDQUFlLHNCQUFxQnZELElBQUssTUFBS3FELElBQUlHLE9BQVEsRUFBMUQ7QUFDRDtBQUNGIiwiZmlsZSI6IkZlYXR1cmVMb2FkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4vKiBnbG9iYWwgbG9jYWxTdG9yYWdlICovXG5cbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnYXNzZXJ0JztcbmltcG9ydCBVbml2ZXJzYWxEaXNwb3NhYmxlIGZyb20gJ251Y2xpZGUtY29tbW9ucy9Vbml2ZXJzYWxEaXNwb3NhYmxlJztcbmltcG9ydCBmZWF0dXJlQ29uZmlnIGZyb20gJy4vZmVhdHVyZS1jb25maWcnO1xuXG50eXBlIEZlYXR1cmVQa2cgPSB7XG4gIGF0b21Db25maWc/OiBPYmplY3QsXG4gIGNvbnN1bWVkU2VydmljZXM/OiBPYmplY3QsXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nLFxuICBkaXNwbGF5TmFtZT86IHN0cmluZyxcbiAgbmFtZTogc3RyaW5nLFxuICBudWNsaWRlPzoge1xuICAgIGNvbmZpZz86IE9iamVjdCxcbiAgfSxcbiAgcHJvdmlkZWRTZXJ2aWNlcz86IE9iamVjdCxcbn07XG5cbmV4cG9ydCB0eXBlIEZlYXR1cmUgPSB7XG4gIGRpcm5hbWU6IHN0cmluZyxcbiAgcGtnOiBGZWF0dXJlUGtnLFxufTtcblxudHlwZSBGZWF0dXJlTG9hZGVyUGFyYW1zID0ge1xuICBwa2dOYW1lOiBzdHJpbmcsXG4gIGZlYXR1cmVzOiBBcnJheTxGZWF0dXJlPixcbn07XG5cbmNvbnN0IHtkZXZNb2RlfSA9IGF0b20uZ2V0TG9hZFNldHRpbmdzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZlYXR1cmVMb2FkZXIge1xuICBfYWN0aXZhdGlvbkRpc3Bvc2FibGU6ID9Vbml2ZXJzYWxEaXNwb3NhYmxlO1xuICBfbG9hZERpc3Bvc2FibGU6IFVuaXZlcnNhbERpc3Bvc2FibGU7XG5cbiAgX2NvbmZpZzogT2JqZWN0O1xuICBfZmVhdHVyZXM6IEFycmF5PEZlYXR1cmU+O1xuICBfcGtnTmFtZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHtjb25maWcsIGZlYXR1cmVzLCBwa2dOYW1lfTogRmVhdHVyZUxvYWRlclBhcmFtcykge1xuICAgIHRoaXMuX2ZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgdGhpcy5fbG9hZERpc3Bvc2FibGUgPSBuZXcgVW5pdmVyc2FsRGlzcG9zYWJsZSgpO1xuICAgIHRoaXMuX3BrZ05hbWUgPSBwa2dOYW1lO1xuICAgIHRoaXMuX2NvbmZpZyA9IHtcbiAgICAgIHVzZToge1xuICAgICAgICB0aXRsZTogJ0VuYWJsZWQgRmVhdHVyZXMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0VuYWJsZSBhbmQgZGlzYWJsZSBpbmRpdmlkdWFsIGZlYXR1cmVzJyxcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIGNvbGxhcHNlZDogdHJ1ZSxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBCdWlsZCB0aGUgY29uZmlnLiBTaG91bGQgb2NjdXIgd2l0aCByb290IHBhY2thZ2UncyBsb2FkXG4gIGxvYWQoKTogdm9pZCB7XG4gICAgaW52YXJpYW50KCF0aGlzLl9sb2FkRGlzcG9zYWJsZS5kaXNwb3NlZCk7XG5cbiAgICAvLyBBZGQgYSBkdW1teSBkZXNlcmlhbGl6ZXIuIFRoaXMgZm9yY2VzIEF0b20gdG8gbG9hZCBOdWNsaWRlJ3MgbWFpbiBtb2R1bGVcbiAgICAvLyAodGhpcyBmaWxlKSB3aGVuIHRoZSBwYWNrYWdlIGlzIGxvYWRlZCwgd2hpY2ggaXMgc3VwZXIgaW1wb3J0YW50IGJlY2F1c2VcbiAgICAvLyB0aGlzIG1vZHVsZSBsb2FkcyBhbGwgb2YgdGhlIE51Y2xpZGUgZmVhdHVyZXMuIFdlIGNvdWxkIGFjY29tcGxpc2ggdGhlIHNhbWVcbiAgICAvLyB0aGluZyBieSB1bnNldHRpbmcgW3RoZSBsb2NhbCBzdG9yYWdlIHZhbHVlXVsxXSB0aGF0IEF0b20gdXNlcyB0byBpbmRpY2F0ZVxuICAgIC8vIHdoZXRoZXIgdGhlIG1haW4gbW9kdWxlIGxvYWQgY2FuIGJlIGRlZmVycmVkLCBob3dldmVyLCB0aGF0IHdvdWxkIG1lYW4gdGhhdFxuICAgIC8vIChmb3IgYSBicmllZiB0aW1lLCBhdCBsZWFzdCksIHRoZSBmbGFnIHdvdWxkIGJlIHNldC4gSWYgdGhlcmUgd2VyZSBhbiBlcnJvclxuICAgIC8vIGR1cmluZyB0aGF0IHRpbWUgYW5kIHdlIG5ldmVyIGdvdCBhIGNoYW5jZSB0byB1bnNldCB0aGUgZmxhZywgTnVjbGlkZVxuICAgIC8vIGZlYXR1cmVzIHdvdWxkIG5ldmVyIGxvYWQgYWdhaW4hXG4gICAgLy9cbiAgICAvLyBbMV0gaHR0cHM6Ly9naXRodWIuY29tL2F0b20vYXRvbS9ibG9iL3YxLjkuOC9zcmMvcGFja2FnZS5jb2ZmZWUjTDQ0MlxuICAgIHRoaXMuX2xvYWREaXNwb3NhYmxlLmFkZChcbiAgICAgIGF0b20uZGVzZXJpYWxpemVycy5hZGQoe1xuICAgICAgICBuYW1lOiBgJHt0aGlzLl9wa2dOYW1lfS5Gb3JjZU1haW5Nb2R1bGVMb2FkYCxcbiAgICAgICAgZGVzZXJpYWxpemUoKSB7fSxcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICAvL1xuICAgIC8vIEJ1aWxkIHRoZSBcImNvbmZpZ1wiIG9iamVjdC4gVGhpcyBkZXRlcm1pbmVzIHRoZSBjb25maWcgZGVmYXVsdHMgYW5kXG4gICAgLy8gaXQncyB3aGF0IGlzIHNob3duIGJ5IHRoZSBTZXR0aW5ncyB2aWV3LiBJdCBpbmNsdWRlczpcbiAgICAvLyAoMSkgQW4gZW50cnkgdG8gZW5hYmxlL2Rpc2FibGUgZWFjaCBmZWF0dXJlIC0gY2FsbGVkIFwiJHtwa2dOYW1lfS51c2UuKlwiLlxuICAgIC8vICgyKSBFYWNoIGZlYXR1cmUncyBtZXJnZWQgY29uZmlnLlxuICAgIC8vXG4gICAgLy8gaHR0cHM6Ly9hdG9tLmlvL2RvY3MvYXBpL2xhdGVzdC9Db25maWdcbiAgICAvL1xuICAgIHRoaXMuX2ZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICBjb25zdCBmZWF0dXJlUGtnID0gZmVhdHVyZS5wa2c7XG4gICAgICBjb25zdCBuYW1lID0gZmVhdHVyZVBrZy5uYW1lO1xuXG4gICAgICAvLyBTYW1wbGUgcGFja2FnZXMgYXJlIGRpc2FibGVkIGJ5IGRlZmF1bHQuIFRoZXkgYXJlIG1lYW50IGZvciBkZXZlbG9wbWVudFxuICAgICAgLy8gdXNlIG9ubHksIGFuZCBhcmVuJ3QgaW5jbHVkZWQgaW4gTnVjbGlkZSBidWlsZHMuXG4gICAgICBjb25zdCBlbmFibGVkID0gIW5hbWUuc3RhcnRzV2l0aCgnc2FtcGxlLScpO1xuXG4gICAgICAvLyBFbnRyeSBmb3IgZW5hYmxpbmcvZGlzYWJsaW5nIHRoZSBmZWF0dXJlXG4gICAgICBjb25zdCBzZXR0aW5nID0ge1xuICAgICAgICB0aXRsZTpcbiAgICAgICAgICBmZWF0dXJlUGtnLmRpc3BsYXlOYW1lID09IG51bGxcbiAgICAgICAgICAgID8gYEVuYWJsZSB0aGUgXCIke25hbWV9XCIgZmVhdHVyZWBcbiAgICAgICAgICAgIDogYEVuYWJsZSAke2ZlYXR1cmVQa2cuZGlzcGxheU5hbWV9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGZlYXR1cmVQa2cuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgZGVmYXVsdDogZW5hYmxlZCxcbiAgICAgIH07XG5cbiAgICAgIGlmIChkZXZNb2RlKSB7XG4gICAgICAgIGlmIChmZWF0dXJlUGtnLnByb3ZpZGVkU2VydmljZXMpIHtcbiAgICAgICAgICBjb25zdCBwcm92aWRlcyA9IE9iamVjdC5rZXlzKGZlYXR1cmVQa2cucHJvdmlkZWRTZXJ2aWNlcykuam9pbignLCAnKTtcbiAgICAgICAgICBzZXR0aW5nLmRlc2NyaXB0aW9uICs9IGA8YnIvPioqUHJvdmlkZXM6KiogXyR7cHJvdmlkZXN9X2A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZlYXR1cmVQa2cuY29uc3VtZWRTZXJ2aWNlcykge1xuICAgICAgICAgIGNvbnN0IGNvbnN1bWVzID0gT2JqZWN0LmtleXMoZmVhdHVyZVBrZy5jb25zdW1lZFNlcnZpY2VzKS5qb2luKCcsICcpO1xuICAgICAgICAgIHNldHRpbmcuZGVzY3JpcHRpb24gKz0gYDxici8+KipDb25zdW1lczoqKiBfJHtjb25zdW1lc31fYDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9jb25maWcudXNlLnByb3BlcnRpZXNbbmFtZV0gPSBzZXR0aW5nO1xuXG4gICAgICAvLyBNZXJnZSBpbiB0aGUgZmVhdHVyZSdzIGNvbmZpZ1xuICAgICAgY29uc3QgZmVhdHVyZVBrZ0NvbmZpZyA9XG4gICAgICAgIGZlYXR1cmVQa2cuYXRvbUNvbmZpZyB8fFxuICAgICAgICAoZmVhdHVyZVBrZy5udWNsaWRlICYmIGZlYXR1cmVQa2cubnVjbGlkZS5jb25maWcpO1xuXG4gICAgICBpZiAoZmVhdHVyZVBrZ0NvbmZpZykge1xuICAgICAgICB0aGlzLl9jb25maWdbbmFtZV0gPSB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgdGl0bGU6IGZlYXR1cmVQa2cuZGlzcGxheU5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGZlYXR1cmVQa2cuZGVzY3JpcHRpb24sXG4gICAgICAgICAgY29sbGFwc2VkOiB0cnVlLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICB9O1xuICAgICAgICBPYmplY3Qua2V5cyhmZWF0dXJlUGtnQ29uZmlnKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgdGhpcy5fY29uZmlnW25hbWVdLnByb3BlcnRpZXNba2V5XSA9IHtcbiAgICAgICAgICAgIC4uLmZlYXR1cmVQa2dDb25maWdba2V5XSxcbiAgICAgICAgICAgIHRpdGxlOiBmZWF0dXJlUGtnQ29uZmlnW2tleV0udGl0bGUgfHwga2V5LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGZlYXR1cmVDb25maWcuc2V0UGFja2FnZU5hbWUodGhpcy5fcGtnTmFtZSk7XG5cbiAgICAvLyBOZXN0aW5nIGxvYWRzIHdpdGhpbiBsb2FkcyBsZWFkcyB0byByZXZlcnNlIGFjdGl2YXRpb24gb3JkZXItIHRoYXQgaXMsIGlmXG4gICAgLy8gdGhlIHJvb3QgcGFja2FnZSBsb2FkcyBmZWF0dXJlIHBhY2thZ2VzLCB0aGVuIHRoZSBmZWF0dXJlIHBhY2thZ2UgYWN0aXZhdGlvbnMgd2lsbFxuICAgIC8vIGhhcHBlbiBiZWZvcmUgdGhlIHJvb3QgcGFja2FnZSdzLiBTbyB3ZSB3YWl0IHVudGlsIHRoZSByb290IHBhY2thZ2UgaXMgZG9uZSBsb2FkaW5nLFxuICAgIC8vIGJ1dCBiZWZvcmUgaXQgYWN0aXZhdGVzLCB0byBsb2FkIHRoZSBmZWF0dXJlcy5cbiAgICBjb25zdCBpbml0aWFsTG9hZERpc3Bvc2FibGUgPSBhdG9tLnBhY2thZ2VzLm9uRGlkTG9hZFBhY2thZ2UocGFjayA9PiB7XG4gICAgICBpZiAocGFjay5uYW1lICE9PSB0aGlzLl9wa2dOYW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTG9hZCBhbGwgdGhlIGZlYXR1cmVzLiBUaGlzIG5lZWRzIHRvIGJlIGRvbmUgZHVyaW5nIEF0b20ncyBsb2FkIHBoYXNlIHRvXG4gICAgICAvLyBtYWtlIHN1cmUgdGhhdCBkZXNlcmlhbGl6ZXJzIGFyZSByZWdpc3RlcmVkLCBldGMuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXRvbS9hdG9tL2Jsb2IvdjEuMS4wL3NyYy9hdG9tLWVudmlyb25tZW50LmNvZmZlZSNMNjI1LUw2MzFcbiAgICAgIC8vIGh0dHBzOi8vYXRvbS5pby9kb2NzL2FwaS9sYXRlc3QvUGFja2FnZU1hbmFnZXJcbiAgICAgIHRoaXMuX2ZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgIC8vIENvbmZpZyBkZWZhdWx0cyBhcmUgbm90IG1lcmdlZCB3aXRoIHVzZXIgZGVmYXVsdHMgdW50aWwgYWN0aXZhdGUuIEF0XG4gICAgICAgIC8vIHRoaXMgcG9pbnQgYGF0b20uY29uZmlnLmdldGAgcmV0dXJucyB0aGUgdXNlciBzZXQgdmFsdWUuIElmIGl0J3NcbiAgICAgICAgLy8gYHVuZGVmaW5lZGAsIHRoZW4gdGhlIHVzZXIgaGFzIG5vdCBzZXQgaXQuXG4gICAgICAgIGNvbnN0IGVuYWJsZWQgPSBhdG9tLmNvbmZpZy5nZXQodGhpcy51c2VLZXlQYXRoRm9yRmVhdHVyZShmZWF0dXJlKSk7XG4gICAgICAgIGNvbnN0IHNob3VsZEVuYWJsZSA9XG4gICAgICAgICAgZW5hYmxlZCA9PSBudWxsXG4gICAgICAgICAgICA/IHRoaXMuX2NvbmZpZy51c2UucHJvcGVydGllc1tmZWF0dXJlLnBrZy5uYW1lXS5kZWZhdWx0XG4gICAgICAgICAgICA6IGVuYWJsZWQ7XG5cbiAgICAgICAgaWYgKHNob3VsZEVuYWJsZSkge1xuICAgICAgICAgIGF0b20ucGFja2FnZXMubG9hZFBhY2thZ2UoZmVhdHVyZS5kaXJuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGludmFyaWFudChpbml0aWFsTG9hZERpc3Bvc2FibGUgIT0gbnVsbCk7XG4gICAgICB0aGlzLl9sb2FkRGlzcG9zYWJsZS5yZW1vdmUoaW5pdGlhbExvYWREaXNwb3NhYmxlKTtcbiAgICAgIGluaXRpYWxMb2FkRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9sb2FkRGlzcG9zYWJsZS5hZGQoaW5pdGlhbExvYWREaXNwb3NhYmxlKTtcbiAgfVxuXG4gIGFjdGl2YXRlKCk6IHZvaWQge1xuICAgIGludmFyaWFudCh0aGlzLl9hY3RpdmF0aW9uRGlzcG9zYWJsZSA9PSBudWxsKTtcblxuICAgIGNvbnN0IHJvb3RQYWNrYWdlID0gYXRvbS5wYWNrYWdlcy5nZXRMb2FkZWRQYWNrYWdlKHRoaXMuX3BrZ05hbWUpO1xuICAgIGludmFyaWFudChyb290UGFja2FnZSAhPSBudWxsKTtcblxuICAgIC8vIFRoaXMgaXMgYSBmYWlsc2FmZSBpbiBjYXNlIHRoZSBgLkZvcmNlTWFpbk1vZHVsZUxvYWRgIGRlc2VyaWFsaXplclxuICAgIC8vIGRlZmluZWQgYWJvdmUgZG9lcyBub3QgcmVnaXN0ZXIgaW4gdGltZSwgb3IgaWYgdGhlIGRlZmVyIGtleSBoYXMgYmVlbiBzZXRcbiAgICAvLyB3L28gb3VyIGtub3dsZWRnZS4gVGhpcyBjYW4gaGFwcGVuIGR1cmluZyBPU1MgdXBncmFkZXMuXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXG4gICAgICByb290UGFja2FnZS5nZXRDYW5EZWZlck1haW5Nb2R1bGVSZXF1aXJlU3RvcmFnZUtleSgpLFxuICAgICk7XG5cbiAgICB0aGlzLl9mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgaWYgKGF0b20uY29uZmlnLmdldCh0aGlzLnVzZUtleVBhdGhGb3JGZWF0dXJlKGZlYXR1cmUpKSkge1xuICAgICAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZShmZWF0dXJlLmRpcm5hbWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gV2F0Y2ggdGhlIGNvbmZpZyB0byBtYW5hZ2UgdG9nZ2xpbmcgZmVhdHVyZXNcbiAgICB0aGlzLl9hY3RpdmF0aW9uRGlzcG9zYWJsZSA9IG5ldyBVbml2ZXJzYWxEaXNwb3NhYmxlKFxuICAgICAgLi4udGhpcy5fZmVhdHVyZXMubWFwKGZlYXR1cmUgPT5cbiAgICAgICAgYXRvbS5jb25maWcub25EaWRDaGFuZ2UodGhpcy51c2VLZXlQYXRoRm9yRmVhdHVyZShmZWF0dXJlKSwgZXZlbnQgPT4ge1xuICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UoZmVhdHVyZS5kaXJuYW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50Lm5ld1ZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgc2FmZURlYWN0aXZhdGUoZmVhdHVyZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIGRlYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgaW52YXJpYW50KFxuICAgICAgdGhpcy5fYWN0aXZhdGlvbkRpc3Bvc2FibGUgJiYgIXRoaXMuX2FjdGl2YXRpb25EaXNwb3NhYmxlLmRpc3Bvc2VkLFxuICAgICk7XG5cbiAgICB0aGlzLl9mZWF0dXJlcy5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgLy8gRGVhY3RpdmF0ZSB0aGUgcGFja2FnZSwgYnV0IGRvbid0IHNlcmlhbGl6ZS4gVGhhdCBuZWVkcyB0byBiZSBkb25lIGluIGEgc2VwYXJhdGUgcGhhc2Ugc28gdGhhdFxuICAgICAgLy8gd2UgZG9uJ3QgZW5kIHVwIGRpc2Nvbm5lY3RpbmcgYSBzZXJ2aWNlIGFuZCB0aGVuIHNlcmlhbGl6aW5nIHRoZSBkaXNjb25uZWN0ZWQgc3RhdGUuXG4gICAgICBzYWZlRGVhY3RpdmF0ZShmZWF0dXJlLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIGludmFyaWFudCh0aGlzLl9hY3RpdmF0aW9uRGlzcG9zYWJsZSk7IC8vIHJlYXNzZXJ0aW5nIGZvciBmbG93XG4gICAgdGhpcy5fYWN0aXZhdGlvbkRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIHRoaXMuX2FjdGl2YXRpb25EaXNwb3NhYmxlID0gbnVsbDtcbiAgfVxuXG4gIGdldENvbmZpZygpOiBPYmplY3Qge1xuICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gIH1cblxuICBzZXJpYWxpemUoKTogdm9pZCB7XG4gICAgLy8gV2hlbiB0aGUgcm9vdCBwYWNrYWdlIGlzIHNlcmlhbGl6ZWQsIGFsbCBvZiBpdHMgZmVhdHVyZXMgbmVlZCB0byBiZSBzZXJpYWxpemVkLiBUaGlzIGlzIGFuIGFidXNlIG9mXG4gICAgLy8gYHNlcmlhbGl6ZSgpYCBzaW5jZSB3ZSdyZSB1c2luZyBpdCB0byBkbyBzaWRlIGVmZmVjdHMgaW5zdGVhZCBvZiByZXR1cm5pbmcgdGhlIHNlcmlhbGl6YXRpb24sXG4gICAgLy8gYnV0IGl0IGVuc3VyZXMgdGhhdCBzZXJpYWxpemF0aW9uIG9mIHRoZSBBdG9tIHBhY2thZ2VzIGhhcHBlbnMgYXQgdGhlIHJpZ2h0IHBvaW50IGluIHRoZVxuICAgIC8vIHBhY2thZ2UgbGlmZWN5Y2xlLiBVbmZvcnR1bmF0ZWx5LCBpdCBhbHNvIG1lYW5zIHRoYXQgTnVjbGlkZSBmZWF0dXJlcyB3aWxsIGJlIHNlcmlhbGl6ZWQgdHdpY2VcbiAgICAvLyBvbiBkZWFjdGl2YXRpb24uXG4gICAgdGhpcy5fZmVhdHVyZXMuZm9yRWFjaChzYWZlU2VyaWFsaXplKTtcbiAgfVxuXG4gIHVzZUtleVBhdGhGb3JGZWF0dXJlKGZlYXR1cmU6IEZlYXR1cmUpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLl9wa2dOYW1lfS51c2UuJHtmZWF0dXJlLnBrZy5uYW1lfWA7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2FmZURlYWN0aXZhdGUoXG4gIGZlYXR1cmU6IEZlYXR1cmUsXG4gIHN1cHByZXNzU2VyaWFsaXphdGlvbjogYm9vbGVhbiA9IGZhbHNlLFxuKSB7XG4gIGNvbnN0IG5hbWUgPSBmZWF0dXJlLnBrZy5uYW1lO1xuICB0cnkge1xuICAgIGNvbnN0IHBhY2sgPSBhdG9tLnBhY2thZ2VzLmdldExvYWRlZFBhY2thZ2UobmFtZSk7XG4gICAgaWYgKHBhY2sgIT0gbnVsbCkge1xuICAgICAgYXRvbS5wYWNrYWdlcy5kZWFjdGl2YXRlUGFja2FnZShuYW1lLCBzdXBwcmVzc1NlcmlhbGl6YXRpb24pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBkZWFjdGl2YXRpbmcgXCIke25hbWV9XCI6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2FmZVNlcmlhbGl6ZShmZWF0dXJlOiBGZWF0dXJlKSB7XG4gIGNvbnN0IG5hbWUgPSBmZWF0dXJlLnBrZy5uYW1lO1xuICB0cnkge1xuICAgIGNvbnN0IHBhY2sgPSBhdG9tLnBhY2thZ2VzLmdldEFjdGl2ZVBhY2thZ2UobmFtZSk7XG4gICAgaWYgKHBhY2sgIT0gbnVsbCkge1xuICAgICAgLy8gU2VyaWFsaXplIHRoZSBwYWNrYWdlXG4gICAgICBhdG9tLnBhY2thZ2VzLnNlcmlhbGl6ZVBhY2thZ2UocGFjayk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNlcmlhbGl6aW5nIFwiJHtuYW1lfVwiOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG59XG4iXX0=