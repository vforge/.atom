"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var parse_1 = require("./parse");
var utils_1 = require("./utils");
var path_1 = require("path");
function parseFile(file, options) {
    var dirname = options.dirname, module = options.module;
    var filepath;
    return utils_1.findFile(file, dirname)
        .then(function (file2) {
        if (file2)
            return file2;
        return utils_1.findFile('index', path_1.resolve(dirname, file));
    })
        .then(function (file3) {
        if (!file3)
            return Promise.reject(undefined);
        filepath = file3;
        return utils_1.readFile(filepath, 'utf8');
    })
        .then(function (sourceText) {
        return parse_1.parse(sourceText, { filepath: filepath, module: module });
    })
        .catch(function (err) {
        return Promise.resolve([]);
    });
}
exports.parseFile = parseFile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UtZmlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXJzZS1maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaUNBQWdDO0FBRWhDLGlDQUE2QztBQUM3Qyw2QkFBK0I7QUFPL0IsbUJBQTBCLElBQVksRUFBRSxPQUF5QjtJQUN4RCxJQUFBLHlCQUFPLEVBQUUsdUJBQU0sQ0FBYTtJQUNwQyxJQUFJLFFBQWdCLENBQUM7SUFDckIsTUFBTSxDQUFDLGdCQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQztTQUM1QixJQUFJLENBQUMsVUFBQSxLQUFLO1FBQ1YsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUN4QixNQUFNLENBQUMsZ0JBQVEsQ0FBQyxPQUFPLEVBQUUsY0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2xELENBQUMsQ0FBQztTQUNELElBQUksQ0FBQyxVQUFBLEtBQUs7UUFDVixFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzdDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsTUFBTSxDQUFDLGdCQUFRLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQztTQUNELElBQUksQ0FBQyxVQUFDLFVBQWtCO1FBQ3hCLE1BQU0sQ0FBQyxhQUFLLENBQUMsVUFBVSxFQUFFLEVBQUUsUUFBUSxVQUFBLEVBQUUsTUFBTSxRQUFBLEVBQUUsQ0FBQyxDQUFDO0lBQ2hELENBQUMsQ0FBQztTQUNELEtBQUssQ0FBQyxVQUFBLEdBQUc7UUFDVCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFuQkQsOEJBbUJDIn0=