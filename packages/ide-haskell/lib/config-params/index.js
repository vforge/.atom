"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
const param_control_1 = require("./param-control");
const param_store_1 = require("./param-store");
class ConfigParamManager {
    constructor(outputPanel, state) {
        this.outputPanel = outputPanel;
        this.store = new param_store_1.ConfigParamStore(state);
    }
    destroy() {
        this.store.destroy();
    }
    serialize() {
        return this.store.serialize();
    }
    add(pluginName, paramName, spec) {
        const disp = new atom_1.CompositeDisposable();
        disp.add(this.store.addParamSpec(pluginName, paramName, spec), this.outputPanel.addPanelControl({
            element: param_control_1.ParamControl,
            opts: {
                pluginName,
                name: paramName,
                spec,
                store: this.store,
            },
        }));
        return disp;
    }
    async get(pluginName, name) {
        return this.store.getValue(pluginName, name);
    }
    async set(pluginName, name, value) {
        return this.store.setValue(pluginName, name, value);
    }
}
exports.ConfigParamManager = ConfigParamManager;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29uZmlnLXBhcmFtcy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUEwQztBQUMxQyxtREFBOEM7QUFDOUMsK0NBQXVFO0FBUXZFO0lBRUUsWUFBb0IsV0FBd0IsRUFBRSxLQUFhO1FBQXZDLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQzFDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSw4QkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUMxQyxDQUFDO0lBRU0sT0FBTztRQUNaLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDdEIsQ0FBQztJQUVNLFNBQVM7UUFDZCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQTtJQUMvQixDQUFDO0lBRU0sR0FBRyxDQUFDLFVBQWtCLEVBQUUsU0FBaUIsRUFBRSxJQUE0QjtRQUM1RSxNQUFNLElBQUksR0FBRyxJQUFJLDBCQUFtQixFQUFFLENBQUE7UUFDdEMsSUFBSSxDQUFDLEdBQUcsQ0FDTixJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUNwRCxJQUFJLENBQUMsV0FBVyxDQUFDLGVBQWUsQ0FBQztZQUMvQixPQUFPLEVBQUUsNEJBQVk7WUFDckIsSUFBSSxFQUFFO2dCQUNKLFVBQVU7Z0JBQ1YsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsSUFBSTtnQkFDSixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7YUFDbEI7U0FDRixDQUFDLENBQ0gsQ0FBQTtRQUNELE1BQU0sQ0FBQyxJQUFJLENBQUE7SUFDYixDQUFDO0lBRU0sS0FBSyxDQUFDLEdBQUcsQ0FBSSxVQUFrQixFQUFFLElBQVk7UUFDbEQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFJLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUNqRCxDQUFDO0lBRU0sS0FBSyxDQUFDLEdBQUcsQ0FBSSxVQUFrQixFQUFFLElBQVksRUFBRSxLQUFTO1FBQzdELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3JELENBQUM7Q0FDRjtBQXRDRCxnREFzQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb3NpdGVEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSdcbmltcG9ydCB7IFBhcmFtQ29udHJvbCB9IGZyb20gJy4vcGFyYW0tY29udHJvbCdcbmltcG9ydCB7IENvbmZpZ1BhcmFtU3RvcmUsIElTdGF0ZSBhcyBJU3RvcmVTdGF0ZSB9IGZyb20gJy4vcGFyYW0tc3RvcmUnXG5cbmltcG9ydCB7IE91dHB1dFBhbmVsIH0gZnJvbSAnLi4vb3V0cHV0LXBhbmVsJ1xuaW1wb3J0ICogYXMgVVBJIGZyb20gJ2F0b20taGFza2VsbC11cGknXG5cbnR5cGUgSVN0YXRlID0gSVN0b3JlU3RhdGVcbmV4cG9ydCB7IElTdGF0ZSB9XG5cbmV4cG9ydCBjbGFzcyBDb25maWdQYXJhbU1hbmFnZXIge1xuICBwcml2YXRlIHN0b3JlOiBDb25maWdQYXJhbVN0b3JlXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgb3V0cHV0UGFuZWw6IE91dHB1dFBhbmVsLCBzdGF0ZTogSVN0YXRlKSB7XG4gICAgdGhpcy5zdG9yZSA9IG5ldyBDb25maWdQYXJhbVN0b3JlKHN0YXRlKVxuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdG9yZS5kZXN0cm95KClcbiAgfVxuXG4gIHB1YmxpYyBzZXJpYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuc2VyaWFsaXplKClcbiAgfVxuXG4gIHB1YmxpYyBhZGQocGx1Z2luTmFtZTogc3RyaW5nLCBwYXJhbU5hbWU6IHN0cmluZywgc3BlYzogVVBJLklQYXJhbVNwZWM8T2JqZWN0Pikge1xuICAgIGNvbnN0IGRpc3AgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXG4gICAgZGlzcC5hZGQoXG4gICAgICB0aGlzLnN0b3JlLmFkZFBhcmFtU3BlYyhwbHVnaW5OYW1lLCBwYXJhbU5hbWUsIHNwZWMpLFxuICAgICAgdGhpcy5vdXRwdXRQYW5lbC5hZGRQYW5lbENvbnRyb2woe1xuICAgICAgICBlbGVtZW50OiBQYXJhbUNvbnRyb2wsXG4gICAgICAgIG9wdHM6IHtcbiAgICAgICAgICBwbHVnaW5OYW1lLFxuICAgICAgICAgIG5hbWU6IHBhcmFtTmFtZSxcbiAgICAgICAgICBzcGVjLFxuICAgICAgICAgIHN0b3JlOiB0aGlzLnN0b3JlLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgKVxuICAgIHJldHVybiBkaXNwXG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0PFQ+KHBsdWdpbk5hbWU6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0VmFsdWU8VD4ocGx1Z2luTmFtZSwgbmFtZSlcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBzZXQ8VD4ocGx1Z2luTmFtZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHZhbHVlPzogVCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlLnNldFZhbHVlKHBsdWdpbk5hbWUsIG5hbWUsIHZhbHVlKVxuICB9XG59XG4iXX0=