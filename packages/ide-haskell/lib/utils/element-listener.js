"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
function listen(element, event, selector, callback) {
    const bound = (evt) => {
        const sel = evt.target.closest(selector);
        if (sel && element.contains(sel)) {
            callback(evt);
        }
    };
    element.addEventListener(event, bound);
    return new atom_1.Disposable(() => {
        element.removeEventListener(event, bound);
    });
}
exports.listen = listen;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudC1saXN0ZW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9lbGVtZW50LWxpc3RlbmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQWlDO0FBRWpDLGdCQUNFLE9BQW9CLEVBQUUsS0FBUSxFQUFFLFFBQWdCLEVBQUUsUUFBaUQ7SUFFbkcsTUFBTSxLQUFLLEdBQUcsQ0FBQyxHQUFVLEVBQUUsRUFBRTtRQUMzQixNQUFNLEdBQUcsR0FBSSxHQUFHLENBQUMsTUFBc0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDekQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNmLENBQUM7SUFDSCxDQUFDLENBQUE7SUFDRCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3RDLE1BQU0sQ0FBQyxJQUFJLGlCQUFVLENBQUMsR0FBRyxFQUFFO1FBQ3pCLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDM0MsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBYkQsd0JBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSdcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbjxUIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcD4oXG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBldmVudDogVCwgc2VsZWN0b3I6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtUXSkgPT4gdm9pZCxcbik6IERpc3Bvc2FibGUge1xuICBjb25zdCBib3VuZCA9IChldnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3Qgc2VsID0gKGV2dC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3Qoc2VsZWN0b3IpXG4gICAgaWYgKHNlbCAmJiBlbGVtZW50LmNvbnRhaW5zKHNlbCkpIHtcbiAgICAgIGNhbGxiYWNrKGV2dClcbiAgICB9XG4gIH1cbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBib3VuZClcbiAgcmV0dXJuIG5ldyBEaXNwb3NhYmxlKCgpID0+IHtcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGJvdW5kKVxuICB9KVxufVxuIl19