"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const atom_1 = require("atom");
function listen(element, event, selector, callback) {
    const bound = (evt) => {
        const sel = evt.target.closest(selector);
        if (sel && element.contains(sel)) {
            callback(evt);
        }
    };
    element.addEventListener(event, bound);
    return new atom_1.Disposable(() => {
        element.removeEventListener(event, bound);
    });
}
exports.listen = listen;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudC1saXN0ZW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9lbGVtZW50LWxpc3RlbmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsK0JBQWlDO0FBRWpDLGdCQUNFLE9BQW9CLEVBQUUsS0FBYSxFQUFFLFFBQWdCLEVBQUUsUUFBZ0M7SUFFdkYsTUFBTSxLQUFLLEdBQUcsQ0FBQyxHQUFVLEVBQUUsRUFBRTtRQUMzQixNQUFNLEdBQUcsR0FBSSxHQUFHLENBQUMsTUFBc0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDekQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUNmLENBQUM7SUFDSCxDQUFDLENBQUE7SUFDRCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3RDLE1BQU0sQ0FBQyxJQUFJLGlCQUFVLENBQUMsR0FBRyxFQUFFO1FBQ3pCLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDM0MsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDO0FBYkQsd0JBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnYXRvbSdcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbihcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQsIGV2ZW50OiBzdHJpbmcsIHNlbGVjdG9yOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkLFxuKTogRGlzcG9zYWJsZSB7XG4gIGNvbnN0IGJvdW5kID0gKGV2dDogRXZlbnQpID0+IHtcbiAgICBjb25zdCBzZWwgPSAoZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdChzZWxlY3RvcilcbiAgICBpZiAoc2VsICYmIGVsZW1lbnQuY29udGFpbnMoc2VsKSkge1xuICAgICAgY2FsbGJhY2soZXZ0KVxuICAgIH1cbiAgfVxuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGJvdW5kKVxuICByZXR1cm4gbmV3IERpc3Bvc2FibGUoKCkgPT4ge1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgYm91bmQpXG4gIH0pXG59XG4iXX0=